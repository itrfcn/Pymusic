import{d as e,a,c as t,w as s,o as i,n as l,aA as o,e as r,f as n,h as c,m as p,p as d}from"./index-DxSWhjl1.js";import{E as u}from"./el-empty-BI85Vzrg.js";import"./index-Duxs7wf3.js";import{i as v}from"./install-DDFsmAWw.js";import{_ as m}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BdUhC8Rj.js";const b={class:"ip-locations-container"},f={class:"stats-summary"},_={class:"stat-item"},h={class:"stat-value"},D={class:"stat-item"},j={class:"stat-value"},y={class:"stat-item"},g={class:"stat-value"},w={class:"chart-container"},O={key:0,class:"no-data"},k=m(e({__name:"ip-locations",props:{ipData:{}},setup(e){const m=e,k=a(null),x=a(null),z=t(()=>m.ipData.ip_counts?Object.keys(m.ipData.ip_counts).length:0),E=t(()=>{if(!m.ipData.ip_counts)return"";let e="",a=0;return Object.entries(m.ipData.ip_counts).forEach(([t,s])=>{s>a&&(a=s,e=t)}),e}),L=()=>{if(!k.value||!m.ipData.ip_counts||0===Object.keys(m.ipData.ip_counts).length)return;x.value&&x.value.dispose(),x.value=v(k.value);const e=Object.keys(m.ipData.ip_counts),a=Object.values(m.ipData.ip_counts),t=["#6366f1","#22d3ee","#ec4899","#10b981","#f59e0b","#ef4444","#8b5cf6","#0ea5e9","#ca8a04","#a855f7"],s=e.map((e,a)=>t[a%t.length]),i={title:{text:"用户地区分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",right:10,top:"center"},series:[{name:"IP分布",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:e.map((e,t)=>({value:a[t],name:e})),color:s}]};x.value.setOption(i)},I=()=>{var e;null==(e=x.value)||e.resize()};return s(()=>m.ipData,()=>{l(()=>{L()})},{deep:!0}),i(()=>{l(()=>{L()}),window.addEventListener("resize",I)}),o(()=>{window.removeEventListener("resize",I),x.value&&x.value.dispose()}),(a,t)=>{const s=u;return n(),r("div",b,[c("div",f,[c("div",_,[c("div",h,p(e.ipData.total_ips||0),1),t[0]||(t[0]=c("div",{class:"stat-label"},"总IP数",-1))]),c("div",D,[c("div",j,p(z.value),1),t[1]||(t[1]=c("div",{class:"stat-label"},"地区数",-1))]),c("div",y,[c("div",g,p(E.value),1),t[2]||(t[2]=c("div",{class:"stat-label"},"访问量最高地区",-1))])]),c("div",w,[e.ipData.ip_counts&&0!==Object.keys(e.ipData.ip_counts).length?(n(),r("div",{key:1,ref_key:"chartRef",ref:k,class:"echart-container"},null,512)):(n(),r("div",O,[d(s,{description:"暂无数据"})]))])])}}}),[["__scopeId","data-v-bd46cdba"]]);export{k as default};
