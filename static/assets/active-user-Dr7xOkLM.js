var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&l(e,a,t[a]);if(s)for(var a of s(t))r.call(t,a)&&l(e,a,t[a]);return e};import{d as i,c as d,G as c,aP as u,e as p,f as h,g as m,aU as y,a as f,r as g,o as x,p as v,h as b,l as A,m as w,a3 as L,am as S}from"./index-DtLPO4VG.js";import{u as j,a as k,g as O}from"./useChart-BH-H8fWP.js";import{d as P}from"./analytics-DfysDv-f.js";import"./install-DDFsmAWw.js";const B=i((_=n({},{name:"ArtBarChart"}),W={__name:"index",props:{data:{default:()=>[0,0,0,0,0,0,0]},xAxisData:{default:()=>[]},barWidth:{default:"40%"},stack:{type:Boolean,default:!1},borderRadius:{default:4},height:{default:j().chartHeight},loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},colors:{default:()=>j().colors},showAxisLabel:{type:Boolean,default:!0},showAxisLine:{type:Boolean,default:!0},showSplitLine:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!1},legendPosition:{default:"bottom"}},setup(e){const t=e,a=d(()=>Array.isArray(t.data)&&t.data.length>0&&"object"==typeof t.data[0]&&"name"in t.data[0]),s=(e,a)=>e||(void 0!==a?t.colors[a%t.colors.length]:new O.LinearGradient(0,0,0,1,[{offset:0,color:y("--el-color-primary-light-4")},{offset:1,color:y("--el-color-primary")}])),o=e=>new O.LinearGradient(0,0,0,1,[{offset:0,color:e},{offset:1,color:e}]),r=e=>{const a=v();return n({name:e.name,data:e.data,type:"bar",stack:e.stack,itemStyle:(s=e.color,{borderRadius:t.borderRadius,color:"string"==typeof s?o(s):s}),barWidth:e.barWidth||t.barWidth},a);var s},{chartRef:l,getAxisLineStyle:i,getAxisLabelStyle:f,getAxisTickStyle:g,getSplitLineStyle:x,getAnimationConfig:v,getTooltipStyle:b,getLegendStyle:A,getGridWithLegend:w}=k({props:t,checkEmpty:()=>{if(Array.isArray(t.data)&&"number"==typeof t.data[0]){const e=t.data;return!e.length||e.every(e=>0===e)}if(Array.isArray(t.data)&&"object"==typeof t.data[0]){const e=t.data;return!e.length||e.every(e=>{var t;return!(null==(t=e.data)?void 0:t.length)||e.data.every(e=>0===e)})}return!0},watchSources:[()=>t.data,()=>t.xAxisData,()=>t.colors],generateOptions:()=>{const e={grid:w(t.showLegend&&a.value,t.legendPosition,{top:15,right:0,left:0}),tooltip:t.showTooltip?b():void 0,xAxis:{type:"category",data:t.xAxisData,axisTick:g(),axisLine:i(t.showAxisLine),axisLabel:f(t.showAxisLabel)},yAxis:{type:"value",axisLabel:f(t.showAxisLabel),axisLine:i(t.showAxisLine),splitLine:x(t.showSplitLine)}};if(t.showLegend&&a.value&&(e.legend=A(t.legendPosition)),a.value){const a=t.data;e.series=a.map((e,a)=>{const o=s(t.colors[a],a);return r({name:e.name,data:e.data,color:o,barWidth:e.barWidth,stack:t.stack?e.stack||"total":void 0})})}else{const a=t.data,o=s();e.series=[r({data:a,color:o})]}return e}});return(e,a)=>{const s=u;return c((h(),p("div",{ref_key:"chartRef",ref:l,style:m({height:t.height})},null,4)),[[s,t.loading]])}}},t(_,a(W))));var _,W;const D={class:"art-card h-105 p-4 box-border mb-5 max-sm:mb-4"},R={class:"ml-1"},T={class:"mt-1 text-sm"},G={class:"text-success font-medium"},C={class:"flex-b mt-2"},E={class:"text-2xl text-g-900"},I={class:"text-xs text-g-500"},H=i({__name:"active-user",setup(e){const t=f(["1月","2月","3月","4月","5月","6月","7月"]),a=f([0,0,0,0,0,0,0]),s=f(0),o=g([{name:"总用户量",num:"0"},{name:"总访问量",num:"0"},{name:"总IP数",num:"0"},{name:"今日新增",num:"0"}]),r=()=>{return e=null,r=null,l=function*(){try{const e=yield P();if(e){const r=e.user_growth;if(t.value=Object.keys(r),a.value=Object.values(r),o[0].num=e.total_users.toString(),o[1].num=e.total_visits.toString(),o[2].num=e.total_ips.toString(),a.value.length>0&&(o[3].num=a.value[a.value.length-1].toString()),a.value.length>=2){const e=a.value[a.value.length-2]||0,t=a.value[a.value.length-1]||0;s.value=e>0?Math.round((t-e)/e*100):0}}}catch(e){}},new Promise((t,a)=>{var s=e=>{try{n(l.next(e))}catch(t){a(t)}},o=e=>{try{n(l.throw(e))}catch(t){a(t)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,o);n((l=l.apply(e,r)).next())});var e,r,l};return x(()=>{r()}),(e,r)=>{const l=B;return h(),p("div",D,[v(l,{class:"box-border p-2",barWidth:"50%",height:"13.7rem",showAxisLine:!1,data:a.value,xAxisData:t.value},null,8,["data","xAxisData"]),b("div",R,[r[1]||(r[1]=b("h3",{class:"mt-5 text-lg font-medium"},"用户增长趋势",-1)),b("p",T,[r[0]||(r[0]=A("比上周 ",-1)),b("span",G,w(s.value)+"%",1)]),r[2]||(r[2]=b("p",{class:"mt-1 text-sm"},"最近7天的用户增长情况",-1))]),b("div",C,[(h(!0),p(L,null,S(o,(e,t)=>(h(),p("div",{class:"flex-1",key:t},[b("p",E,w(e.num),1),b("p",I,w(e.name),1)]))),128))])])}}});export{H as default};
