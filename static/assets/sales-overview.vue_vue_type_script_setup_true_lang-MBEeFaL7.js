var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{d as u,a as d,c,aU as h,w as y,o as p,b as m,G as v,aP as f,e as g,f as b,g as x,n as w,b1 as A,h as L,p as S,l as O,m as j}from"./index-DtLPO4VG.js";import{u as D,a as P,g as B}from"./useChart-BH-H8fWP.js";import{d as C}from"./analytics-DfysDv-f.js";const T=u(i(n({},{name:"ArtLineChart"}),{__name:"index",props:{data:{default:()=>[0,0,0,0,0,0,0]},xAxisData:{default:()=>[]},lineWidth:{default:2.5},showAreaColor:{type:Boolean,default:!1},smooth:{type:Boolean,default:!0},symbol:{default:"none"},symbolSize:{default:6},animationDelay:{default:200},height:{default:D().chartHeight},loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},colors:{default:()=>D().colors},showAxisLabel:{type:Boolean,default:!0},showAxisLine:{type:Boolean,default:!0},showSplitLine:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},showLegend:{type:Boolean,default:!1},legendPosition:{default:"bottom"}},setup(e){const a=e,t=d(!1),l=d([]),o=d([]),r=()=>{l.value.forEach(e=>clearTimeout(e)),l.value=[]},s=c(()=>Array.isArray(a.data)&&a.data.length>0&&"object"==typeof a.data[0]&&"name"in a.data[0]),u=c(()=>{if(s.value){return a.data.reduce((e,a)=>{var t;if(null==(t=a.data)?void 0:t.length){const t=Math.max(...a.data);return Math.max(e,t)}return e},0)}{const e=a.data;return(null==e?void 0:e.length)?Math.max(...e):0}}),L=c(()=>h("--el-color-primary")),S=(e,t)=>e||(void 0!==t?a.colors[t%a.colors.length]:L.value),O=e=>{var t,l,o,r,s;return{name:e.name,data:e.data,type:"line",color:e.color,smooth:null!=(t=e.smooth)?t:a.smooth,symbol:null!=(l=e.symbol)?l:a.symbol,symbolSize:null!=(o=e.symbolSize)?o:a.symbolSize,lineStyle:{width:null!=(r=e.lineWidth)?r:a.lineWidth,color:e.color},areaStyle:e.areaStyle,emphasis:{focus:"series",lineStyle:{width:(null!=(s=e.lineWidth)?s:a.lineWidth)+1}}}},j=(e=!1)=>{const t={animation:!0,animationDuration:e?0:1300,animationDurationUpdate:e?0:1300,grid:R(a.showLegend&&s.value,a.legendPosition,{top:15,right:15,left:0}),tooltip:a.showTooltip?z():void 0,xAxis:{type:"category",boundaryGap:!1,data:a.xAxisData,axisTick:k(),axisLine:_(a.showAxisLine),axisLabel:E(a.showAxisLabel)},yAxis:{type:"value",min:0,max:u.value,axisLabel:E(a.showAxisLabel),axisLine:_(a.showAxisLine),splitLine:G(a.showSplitLine)}};if(a.showLegend&&s.value&&(t.legend=M(a.legendPosition)),s.value){const e=o.value;t.series=e.map((e,t)=>{const l=S(a.colors[t],t),o=((e,t)=>{if(!e.areaStyle&&!e.showAreaColor&&!a.showAreaColor)return;const l=e.areaStyle||{};return l.custom?l.custom:{color:new B.LinearGradient(0,0,0,1,[{offset:0,color:A(t,l.startOpacity||.2).rgba},{offset:1,color:A(t,l.endOpacity||.02).rgba}])}})(e,l);return O({name:e.name,data:e.data,color:l,smooth:e.smooth,symbol:e.symbol,lineWidth:e.lineWidth,areaStyle:o})})}else{const e=o.value,l=S(a.colors[0]),r=(()=>{if(!a.showAreaColor)return;const e=S(a.colors[0]);return{color:new B.LinearGradient(0,0,0,1,[{offset:0,color:A(e,.2).rgba},{offset:1,color:A(e,.02).rgba}])}})();t.series=[O({data:e,color:l,areaStyle:r})]}return t},D=e=>{W(e)},C=()=>{if(r(),t.value=!0,o.value=(()=>{if(s.value)return a.data.map(e=>i(n({},e),{data:Array(e.data.length).fill(0)}));const e=a.data;return Array(e.length).fill(0)})(),D(j(!0)),s.value){const e=a.data,r=o.value;e.forEach((e,t)=>{const s=window.setTimeout(()=>{r[t]=i(n({},e),{data:[...e.data]}),o.value=[...r],D(j(!1))},t*a.animationDelay+100);l.value.push(s)});const s=(e.length-1)*a.animationDelay+1500,u=window.setTimeout(()=>{t.value=!1},s);l.value.push(u)}else w(()=>{o.value=s.value?a.data.map(e=>i(n({},e),{data:[...e.data]})):[...a.data],D(j(!1)),t.value=!1})},{chartRef:T,initChart:W,getAxisLineStyle:_,getAxisLabelStyle:E,getAxisTickStyle:k,getSplitLineStyle:G,getTooltipStyle:z,getLegendStyle:M,getGridWithLegend:R,isEmpty:U}=P({props:a,checkEmpty:()=>{if(Array.isArray(a.data)&&"number"==typeof a.data[0]){const e=a.data;return!e.length||e.every(e=>0===e)}if(Array.isArray(a.data)&&"object"==typeof a.data[0]){const e=a.data;return!e.length||e.every(e=>{var a;return!(null==(a=e.data)?void 0:a.length)||e.data.every(e=>0===e)})}return!0},watchSources:[()=>a.data,()=>a.xAxisData,()=>a.colors],onVisible:()=>{U.value||C()},generateOptions:()=>j(!1)}),H=()=>{t.value||U.value||C()};return y([()=>a.data,()=>a.xAxisData,()=>a.colors],H,{deep:!0}),p(()=>{H()}),m(()=>{r()}),(e,t)=>{const l=f;return v((b(),g("div",{ref_key:"chartRef",ref:T,class:"relative w-[calc(100%+10px)]",style:x({height:a.height})},null,4)),[[l,a.loading]])}}})),W={class:"art-card h-105 p-5 mb-5 max-sm:mb-4"},_={class:"art-card-header"},E={class:"title"},k={class:"text-success"},G=u({__name:"sales-overview",setup(e){const a=d(["1月","2月","3月","4月","5月","6月","7月"]),t=d([0,0,0,0,0,0,0]),l=d(0),o=()=>{return e=null,o=null,r=function*(){try{const e=yield C();if(e){const o=e.daily_visits;a.value=Object.keys(o),t.value=Object.values(o),t.value.length>0&&(l.value=t.value[t.value.length-1])}}catch(e){}},new Promise((a,t)=>{var l=e=>{try{n(r.next(e))}catch(a){t(a)}},s=e=>{try{n(r.throw(e))}catch(a){t(a)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,s);n((r=r.apply(e,o)).next())});var e,o,r};return p(()=>{o()}),(e,o)=>{const r=T;return b(),g("div",W,[L("div",_,[L("div",E,[o[1]||(o[1]=L("h4",null,"网站访问量",-1)),L("p",null,[o[0]||(o[0]=O("今日 ",-1)),L("span",k,j(l.value),1)])])]),S(r,{height:"calc(100% - 56px)",data:t.value,xAxisData:a.value,showAreaColor:!0,showAxisLine:!1},null,8,["data","xAxisData"])])}}});export{G as _};
