var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,i,r)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,s=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&n(e,i,t[i]);if(r)for(var i of r(t))a.call(t,i)&&n(e,i,t[i]);return e},l=(e,t,i)=>new Promise((r,o)=>{var a=e=>{try{s(i.next(e))}catch(t){o(t)}},n=e=>{try{s(i.throw(e))}catch(t){o(t)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,n);s((i=i.apply(e,t)).next())});import{d as p,a as m,e as d,f as u,p as c,u as j,z as g,F as h,$ as v,b9 as f,n as y,ba as b,aQ as _}from"./index-DtLPO4VG.js";import{E as x}from"./el-card-BIanTcix.js";import{_ as w}from"./index-DAWUdvV6.js";import{_ as P}from"./useTableColumns-CzKdEvSf.js";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang-CLUfterB.js";import{u as O}from"./useTable-CZ1PsPko.js";import{u as D}from"./useLayoutHeight-ruQ42BNA.js";import{_ as z}from"./playlist-search.vue_vue_type_script_setup_true_lang-D5-HlV2w.js";import S from"./playlist-dialog-w7EVMqe7.js";import{a as T}from"./message-box-fEnVxrsx.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                  */import"./el-option-Ov18kU7i.js";import"./index-DA2u0qjG.js";import"./index-CP_mWmfc.js";import"./index-BrpO1YGF.js";import"./aria-Dle50h-X.js";import"./index-B-FCdvUf.js";import"./index-Dw6dGDDE.js";import"./index-BbweI3YS.js";import"./token-DWNpOE8r.js";import"./castArray-BDKD0Zvx.js";import"./index-DbLJzq82.js";import"./event-BwRzfsZt.js";import"./vnode-C8cdOOkd.js";import"./debounce-ClIsgN62.js";import"./index-Cw_vhjvW.js";/* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    *//* empty css                   */import"./el-empty-Bn1z00vH.js";import"./_initCloneObject-BaiE7a9Y.js";import"./el-radio-VjS3vhSd.js";import"./index-Dcq227u9.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";/* empty css                  */import"./el-dropdown-item-hSqLg9mQ.js";import"./index-B1oc1BI_.js";import"./refs-Cw5r5QN8.js";import"./index.vue_vue_type_script_setup_true_lang-B1k7ctHe.js";import"./tree-select-v4UM_rlF.js";import"./index-Rg8GWnlI.js";import"./index-Bbf00Op9.js";import"./index-EwWHi5tt.js";import"./index-iLZH01ON.js";import"./index-BIfVGNIa.js";import"./index-BedqjicC.js";import"./index-BFHcZp96.js";/* empty css                     */import"./el-row-DaT-_pz0.js";import"./el-col-Ki2JLbCA.js";import"./index-D_yz80at.js";import"./validator-Wj-UOzUY.js";import"./index-7btWiO1t.js";import"./index-ClKRQ_I3.js";import"./use-dialog-BBStnoor.js";const k={class:"playlist-page art-full-height"},F=p((I=s({},{name:"Playlist"}),t(I,i({__name:"index",setup(e){D();const t=m("add"),i=m(!1),r=m({}),o=m([]),a=m({name:void 0,creator_name:void 0,user_id:void 0}),{columns:n,columnChecks:p,data:F,loading:I,pagination:R,getData:E,searchParams:U,resetSearchParams:V,handleSizeChange:B,handleCurrentChange:L,refreshData:N}=O({core:{apiFn:f,apiParams:s({current:1,size:20},a.value),columnsFactory:()=>[{type:"selection"},{type:"index",width:60,label:"序号"},{prop:"name",label:"歌单名称",width:200},{prop:"description",label:"歌单描述",formatter:e=>e.description||"-"},{prop:"id",label:"创建人ID",width:120},{prop:"create_time",label:"创建时间",width:180,formatter:e=>{const t=new Date(e.create_time);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}},{prop:"update_time",label:"更新时间",width:180,formatter:e=>{const t=new Date(e.update_time);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)}},{prop:"operation",label:"操作",width:120,fixed:"right",formatter:e=>v("div",[v(C,{type:"edit",onClick:()=>A("edit",e)}),v(C,{type:"delete",onClick:()=>G(e)})])}]}}),Q=e=>{const t=["current","size"];Object.keys(U).forEach(e=>{t.includes(e)||delete U[e]}),Object.assign(U,e),E()},A=(e,o)=>{t.value=e,r.value=o||{},y(()=>{i.value=!0})},G=e=>{T.confirm("确定要删除该歌单吗？","删除歌单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(()=>l(null,null,function*(){try{yield b(e.id),_.success("删除歌单成功"),E()}catch(t){_.error("删除歌单失败")}}))},H=()=>l(null,null,function*(){try{i.value=!1,r.value={},E()}catch(e){}}),K=e=>{o.value=e};return(e,o)=>{const s=P,l=w,m=x;return u(),d("div",k,[c(z,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),onSearch:Q,onReset:j(V)},null,8,["modelValue","onReset"]),c(m,{class:"art-table-card",shadow:"never"},{default:g(()=>[c(s,{columns:j(p),"onUpdate:columns":o[1]||(o[1]=e=>h(p)?p.value=e:null),loading:j(I),onRefresh:j(N)},{left:g(()=>[...o[3]||(o[3]=[])]),_:1},8,["columns","loading","onRefresh"]),c(l,{loading:j(I),data:j(F),columns:j(n),pagination:j(R),onSelectionChange:K,"onPagination:sizeChange":j(B),"onPagination:currentChange":j(L)},null,8,["loading","data","columns","pagination","onPagination:sizeChange","onPagination:currentChange"]),c(S,{visible:i.value,"onUpdate:visible":o[2]||(o[2]=e=>i.value=e),type:t.value,"playlist-data":r.value,onSubmit:H},null,8,["visible","type","playlist-data"])]),_:1})])}}}))));var I;export{F as default};
