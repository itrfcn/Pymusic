var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&i(e,a,t[a]);return e},o=(e,n)=>t(e,a(n));import{eN as u,au as c,B as p,cB as h,E as d,eO as m,ai as v,Z as g,eP as f,bI as y,L as b,aM as L,bO as S,eQ as x,b3 as C,d8 as E,bB as w,aN as O,eR as D,eS as A,dL as F,eT as P,eU as z,cY as R,eV as T,q as k,eW as B,cX as I,d6 as j,eX as V,eY as q,v as G,cc as M,er as H,eq as W,es as _,et as N,eu as U,ev as X,ew as Y,eC as J,eA as Q,ex as Z,eF as $,eG as K,eD as ee,eE as te,ez as ae,eB as ne,ey as le,eJ as re,ep as ie,i as se}from"./install-DDFsmAWw.js";import{aU as oe,c as ue,q as ce,s as pe,a as he,o as de,b as me,aA as ve,w as ge,n as fe}from"./index-DtLPO4VG.js";const ye=Object.freeze(Object.defineProperty({__proto__:null,Arc:u,BezierCurve:c,BoundingRect:p,Circle:h,CompoundPath:d,Ellipse:m,Group:v,Image:g,IncrementalDisplayable:f,Line:y,LinearGradient:b,Polygon:L,Polyline:S,RadialGradient:x,Rect:C,Ring:E,Sector:w,Text:O,clipPointsByRect:D,clipRectByRect:A,createIcon:F,extendPath:P,extendShape:z,getShapeClass:R,getTransform:T,initProps:k,makeImage:B,makePath:I,mergePath:j,registerShape:V,resizePath:q,updateProps:G},Symbol.toStringTag,{value:"Module"}));M([H,W,_,N,U,X,Y,J,Q,Z,$,K,ee,te,ae,ne,le,re,ie]);const be=ye,Le=()=>({chartHeight:"16rem",fontSize:13,fontColor:"#999",themeColor:oe("--el-color-primary-light-1"),colors:[oe("--el-color-primary-light-1"),"#4ABEFF","#EDF2FF","#14DEBA","#FFAF20","#FA8A6C","#FFAF20"]}),Se=[50,100,200,350],xe=[50,100,200];function Ce(e={}){const{initOptions:t,initDelay:a=0,threshold:n=.1,autoTheme:l=!0}=e,r=ce(),{isDark:i,menuOpen:u,menuType:c}=pe(r),p=he();let h=null,d=null,m=null,v=null,g=null,f=!1,y=null;const b=()=>{g&&cancelAnimationFrame(g),g=requestAnimationFrame(()=>{T(),g=null})},L=()=>{v&&clearTimeout(v),v=window.setTimeout(()=>{b(),v=null},100)},S=e=>{fe(b),e.forEach(e=>{setTimeout(b,e)})};let x=null,C=null;let E=null;const w=(e,t=1,a)=>s({color:e,width:t},a&&{type:a}),O={axisLine:null,splitLine:null,axisLabel:null,lastDarkValue:i.value},D=()=>{O.axisLine=null,O.splitLine=null,O.axisLabel=null,O.lastDarkValue=i.value},A=()=>{d&&(d.disconnect(),d=null)},F=e=>{h||!p.value||f||(h=se(p.value),x=ge(u,()=>S(Se)),C=ge(c,()=>{fe(b),setTimeout(()=>S(xe),0)}),l&&(E=ge(i,()=>{P.updateStyle(),h&&!f&&requestAnimationFrame(()=>{if(h&&!f){const e=h.getOption();e&&R(e)}})}))),h&&!f&&(h.setOption(e),m=null)},P={create:()=>{p.value&&!y&&(y=document.createElement("div"),y.style.cssText=`\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        color: ${i.value?"#555555":"#B3B2B2"};\n        background: transparent;\n        z-index: 10;\n      `,y.innerHTML="<span>暂无数据</span>","relative"!==p.value.style.position&&"absolute"!==p.value.style.position&&(p.value.style.position="relative"),p.value.appendChild(y))},remove:()=>{y&&p.value&&(p.value.removeChild(y),y=null)},updateStyle:()=>{y&&(y.style.color=i.value?"#666":"#999")}},z=(e={},l=!1)=>{if(!p.value||f)return;const r=s(s({},t),e);try{if(l)return h&&h.clear(),void P.create();P.remove(),(e=>{const t=e.getBoundingClientRect();return t.width>0&&t.height>0&&t.top<window.innerHeight&&t.bottom>0})(p.value)?a>0?setTimeout(()=>F(r),a):F(r):(m=r,!d&&p.value&&(d=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&m&&!f&&requestAnimationFrame(()=>{if(!f&&m)try{h||(h=se(e.target));const t=new CustomEvent("chartVisible",{detail:{options:m}});e.target.dispatchEvent(t),m=null,A()}catch(t){}})})},{threshold:n}),d.observe(p.value)))}catch(i){}},R=e=>{if(!f)try{if(!h)return void z(e);h.setOption(e)}catch(t){}},T=()=>{if(h&&!f)try{h.resize()}catch(e){}},k=()=>{if(f=!0,h)try{h.dispose()}catch(e){}finally{h=null}null==x||x(),null==C||C(),x=null,C=null,null==E||E(),E=null,P.remove(),A(),v&&(clearTimeout(v),v=null),g&&(cancelAnimationFrame(g),g=null),D(),m=null};return de(()=>{window.addEventListener("resize",L)}),me(()=>{window.removeEventListener("resize",L)}),ve(()=>{k()}),{isDark:i,chartRef:p,initChart:z,updateChart:R,handleResize:T,destroyChart:k,getChartInstance:()=>h,isChartInitialized:()=>null!==h,emptyStateManager:P,getAxisLineStyle:(e=!0)=>(O.lastDarkValue!==i.value&&D(),O.axisLine||(O.axisLine={show:e,lineStyle:w(i.value?"#444":"#EDEDED")}),O.axisLine),getSplitLineStyle:(e=!0)=>(O.lastDarkValue!==i.value&&D(),O.splitLine||(O.splitLine={show:e,lineStyle:w(i.value?"#444":"#EDEDED",1,"dashed")}),O.splitLine),getAxisLabelStyle:(e=!0)=>{if(O.lastDarkValue!==i.value&&D(),!O.axisLabel){const{fontColor:t,fontSize:a}=Le();O.axisLabel={show:e,color:t,fontSize:a}}return O.axisLabel},getAxisTickStyle:()=>({show:!1}),getAnimationConfig:(e=50,t=1500)=>({animationDelay:t=>t*e+200,animationDuration:e=>t-50*e,animationEasing:"quarticOut"}),getTooltipStyle:(e="axis",t={})=>s({trigger:e,backgroundColor:i.value?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",borderColor:i.value?"#333":"#ddd",borderWidth:1,textStyle:{color:i.value?"#fff":"#333"}},t),getLegendStyle:(e="bottom",t={})=>{const a=s({textStyle:{color:i.value?"#fff":"#333"},itemWidth:12,itemHeight:12,itemGap:20},t);switch(e){case"bottom":return o(s({},a),{bottom:0,left:"center",orient:"horizontal",icon:"roundRect"});case"top":return o(s({},a),{top:0,left:"center",orient:"horizontal",icon:"roundRect"});case"left":return o(s({},a),{left:0,top:"center",orient:"vertical",icon:"roundRect"});case"right":return o(s({},a),{right:0,top:"center",orient:"vertical",icon:"roundRect"});default:return a}},useChartOps:Le,getGridWithLegend:(e,t="bottom",a={})=>{const n=s({top:15,right:15,bottom:8,left:0,containLabel:!0},a);if(!e)return n;switch(t){case"bottom":return o(s({},n),{bottom:40});case"top":return o(s({},n),{top:40});case"left":return o(s({},n),{left:120});case"right":return o(s({},n),{right:120});default:return n}}}}function Ee(e){const{props:t,generateOptions:a,checkEmpty:n,watchSources:l=[],onVisible:r,chartOptions:i={}}=e,u=Ce(i),{chartRef:c,initChart:p,isDark:h,emptyStateManager:d}=u,m=ue(()=>!!t.isEmpty||!!n&&n()),v=()=>{fe(()=>{var e;m.value?(u.getChartInstance()&&(null==(e=u.getChartInstance())||e.clear()),d.create()):(d.remove(),p(a()))})},g=()=>{r?r():v()},f=[];return(()=>{if(l.length>0){const e=ge(l,v,{deep:!0});f.push(e)}const e=ge(h,()=>{d.updateStyle(),v()});f.push(e)})(),de(()=>{v(),c.value&&c.value.addEventListener("chartVisible",g)}),me(()=>{c.value&&c.value.removeEventListener("chartVisible",g),f.forEach(e=>e()),f.length=0,d.remove()}),o(s({},u),{isEmpty:m,updateChart:v,handleChartVisible:g})}export{Ee as a,be as g,Le as u};
