import{d as e,c as a,aV as t,av as s,aW as u,w as l,aA as r,e as n,f as i,m as o,i as d,n as c,r as v,o as m,y as f,z as p,a3 as x,am as g,h,p as b}from"./index-DtLPO4VG.js";import{E as _}from"./el-row-DaT-_pz0.js";import{E as y}from"./el-col-Ki2JLbCA.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-B1k7ctHe.js";import{d as S}from"./analytics-DfysDv-f.js";const V="easeOutExpo",w=e({__name:"index",props:{target:{default:0},duration:{default:2e3},autoStart:{type:Boolean,default:!0},decimals:{default:0},decimal:{default:"."},separator:{default:""},prefix:{default:""},suffix:{default:""},easing:{default:V},disabled:{type:Boolean,default:!1}},emits:["started","finished","paused","reset"],setup(e,{expose:v,emit:m}){const f=Number.EPSILON,p=e,x=m,g=(e,a,t)=>Number.isFinite(e)?e:t,h=(e,a,t)=>Math.max(a,Math.min(e,t)),b=a(()=>g(p.target,0,0)),_=a(()=>h(g(p.duration,0,2e3),100,6e4)),y=a(()=>h(g(p.decimals,0,0),0,10)),j=a(()=>{const e=p.easing;return e in t?e:V}),S=s(0),w=s(b.value),F=s(!1),N=s(!1),E=s(0),M=u(S,{duration:_,transition:a(()=>t[j.value]),onStarted:()=>{F.value=!0,N.value=!1,x("started",w.value)},onFinished:()=>{F.value=!1,N.value=!1,x("finished",w.value)}}),P=a(()=>{const e=N.value?E.value:M.value;if(!Number.isFinite(e))return`${p.prefix}0${p.suffix}`;const a=((e,a,t,s)=>{let u=a>0?e.toFixed(a):Math.floor(e).toString();if("."!==t&&u.includes(".")&&(u=u.replace(".",t)),s){const e=u.split(t);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),u=e.join(t)}return u})(e,y.value,p.decimal,p.separator);return`${p.prefix}${a}${p.suffix}`}),$=()=>{N.value=!1,E.value=0},O=e=>{if(p.disabled)return;const a=void 0!==e?e:w.value;Number.isFinite(a)&&(w.value=a,(e=>{const a=N.value?E.value:M.value;return Math.abs(a-e)<f})(a)||(N.value&&(S.value=E.value,$()),c(()=>{S.value=a})))},B=()=>{(F.value||N.value)&&(S.value=0,$(),x("paused",0))};return l(b,e=>{p.autoStart&&!p.disabled?O(e):w.value=e},{immediate:p.autoStart&&!p.disabled}),l(()=>p.disabled,e=>{e&&F.value&&B()}),r(()=>{F.value&&B()}),v({start:O,pause:()=>{F.value&&!N.value&&(N.value=!0,E.value=M.value,S.value=E.value,x("paused",E.value))},reset:(e=0)=>{const a=g(e,0,0);S.value=a,w.value=a,$(),x("reset")},stop:B,setTarget:e=>{Number.isFinite(e)&&(w.value=e,!F.value&&!p.autoStart||p.disabled||O(e))},get isRunning(){return F.value},get isPaused(){return N.value},get currentValue(){return N.value?E.value:M.value},get targetValue(){return w.value},get progress(){const e=N.value?E.value:M.value,a=w.value;return 0===a?0===e?1:0:Math.abs(e/a)}}),(e,a)=>(i(),n("span",{class:d(["text-g-900 tabular-nums",F.value?"transition-opacity duration-300 ease-in-out":""])},o(P.value),3))}}),F={class:"art-card relative flex flex-col justify-center h-35 px-5 mb-5 max-sm:mb-4"},N={class:"text-g-700 text-sm"},E={class:"flex-c mt-1"},M={class:"absolute top-0 bottom-0 right-5 m-auto size-12.5 rounded-xl flex-cc bg-theme/10"},P=e({__name:"card-list",setup(e){const a=v([{des:"总用户量",icon:"ri:pie-chart-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"总访问量",icon:"ri:group-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"总IP数",icon:"ri:fire-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"今日新增用户",icon:"ri:progress-2-line",startVal:0,duration:1e3,num:0,change:"+0%"}]),t=()=>{return e=null,t=null,s=function*(){try{const e=yield S();if(e){a[0].num=e.total_users,a[1].num=e.total_visits,a[2].num=e.total_ips;const t=Object.keys(e.user_growth);if(t.length>0){const s=t[t.length-1];a[3].num=e.user_growth[s]||0}}}catch(e){}},new Promise((a,u)=>{var l=e=>{try{n(s.next(e))}catch(a){u(a)}},r=e=>{try{n(s.throw(e))}catch(a){u(a)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);n((s=s.apply(e,t)).next())});var e,t,s};return m(()=>{t()}),(e,t)=>{const s=w,u=j,l=y,r=_;return i(),f(r,{gutter:20,class:"flex"},{default:p(()=>[(i(!0),n(x,null,g(a,(e,a)=>(i(),f(l,{key:a,sm:12,md:6,lg:6},{default:p(()=>[h("div",F,[h("span",N,o(e.des),1),b(s,{class:"text-[26px] font-medium mt-2",target:e.num,duration:1300},null,8,["target"]),h("div",E,[t[0]||(t[0]=h("span",{class:"text-xs text-g-600"},"较上周",-1)),h("span",{class:d(["ml-1 text-xs font-semibold",[-1===e.change.indexOf("+")?"text-danger":"text-success"]])},o(e.change),3)]),h("div",M,[b(u,{icon:e.icon,class:"text-xl text-theme"},null,8,["icon"])])])]),_:2},1024))),128))]),_:1})}}});export{P as _};
