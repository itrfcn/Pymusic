import{d as s,a as t,c as a,w as i,o as e,n as l,aA as r,e as v,f as o,h as n,m as d,p as c}from"./index-DtLPO4VG.js";import{E as u}from"./el-empty-Bn1z00vH.js";import"./index-Duxs7wf3.js";import{i as p,L as m}from"./install-DDFsmAWw.js";import{_ as y}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-B-FCdvUf.js";const f={class:"website-visits-container"},_={class:"stats-summary"},b={class:"stat-item"},D={class:"stat-value"},g={class:"stat-item"},h={class:"stat-value"},j={class:"stat-item"},x={class:"stat-value"},w={class:"chart-container"},k={key:0,class:"no-data"},O=y(s({__name:"website-visits",props:{visitsData:{}},setup(s){const y=s,O=t(null),L=t(null),E=a(()=>{if(!y.visitsData.daily_visits)return 0;const s=Object.values(y.visitsData.daily_visits).length;return s>0?Math.round(y.visitsData.total_visits/s):0}),z=a(()=>{if(!y.visitsData.daily_visits)return"";let s="",t=0;return Object.entries(y.visitsData.daily_visits).forEach(([a,i])=>{i>t&&(t=i,s=a)}),s}),A=()=>{if(!O.value||!y.visitsData.daily_visits||0===Object.keys(y.visitsData.daily_visits).length)return;L.value&&L.value.dispose(),L.value=p(O.value);const s=Object.keys(y.visitsData.daily_visits).sort(),t=s.map(s=>y.visitsData.daily_visits[s]),a={title:{text:"网站访问量统计",left:"center"},tooltip:{trigger:"axis"},legend:{data:["每日访问量"],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:s,axisLabel:{rotate:45}},yAxis:{type:"value",name:"访问量"},series:[{name:"每日访问量",type:"bar",data:t,itemStyle:{color:new m(0,0,0,1,[{offset:0,color:"rgba(34, 211, 238, 0.9)"},{offset:1,color:"rgba(34, 211, 238, 0.5)"}]),borderRadius:[4,4,0,0]}}]};L.value.setOption(a)},R=()=>{var s;null==(s=L.value)||s.resize()};return i(()=>y.visitsData,()=>{l(()=>{A()})},{deep:!0}),e(()=>{l(()=>{A()}),window.addEventListener("resize",R)}),r(()=>{window.removeEventListener("resize",R),L.value&&L.value.dispose()}),(t,a)=>{const i=u;return o(),v("div",f,[n("div",_,[n("div",b,[n("div",D,d(s.visitsData.total_visits||0),1),a[0]||(a[0]=n("div",{class:"stat-label"},"总访问量",-1))]),n("div",g,[n("div",h,d(E.value),1),a[1]||(a[1]=n("div",{class:"stat-label"},"平均日访问量",-1))]),n("div",j,[n("div",x,d(z.value),1),a[2]||(a[2]=n("div",{class:"stat-label"},"访问峰值日",-1))])]),n("div",w,[s.visitsData.daily_visits&&0!==Object.keys(s.visitsData.daily_visits).length?(o(),v("div",{key:1,ref_key:"chartRef",ref:O,class:"echart-container"},null,512)):(o(),v("div",k,[c(i,{description:"暂无数据"})]))])])}}}),[["__scopeId","data-v-19f6490c"]]);export{O as default};
