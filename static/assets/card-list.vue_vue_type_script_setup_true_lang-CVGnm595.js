import{d as e,c as a,aV as t,av as u,aW as s,w as l,aA as r,e as n,f as i,m as o,i as d,n as v,r as c,o as m,y as p,z as f,a3 as g,am as x,h,p as b}from"./index-DxSWhjl1.js";import{E as _}from"./el-row-BbFCgjqK.js";import{E as y}from"./el-col-ZA0CGZf_.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang-VvwPD4Pm.js";import{d as F}from"./analytics-CbHPOkSB.js";const S="easeOutExpo",V=e({__name:"index",props:{target:{default:0},duration:{default:2e3},autoStart:{type:Boolean,default:!0},decimals:{default:0},decimal:{default:"."},separator:{default:""},prefix:{default:""},suffix:{default:""},easing:{default:S},disabled:{type:Boolean,default:!1}},emits:["started","finished","paused","reset"],setup(e,{expose:c,emit:m}){const p=Number.EPSILON,f=e,g=m,x=(e,a,t)=>Number.isFinite(e)?e:t,h=(e,a,t)=>Math.max(a,Math.min(e,t)),b=a(()=>x(f.target,0,0)),_=a(()=>h(x(f.duration,0,2e3),100,6e4)),y=a(()=>h(x(f.decimals,0,0),0,10)),j=a(()=>{const e=f.easing;return e in t?e:S}),F=u(0),V=u(b.value),w=u(!1),N=u(!1),M=u(0),P=s(F,{duration:_,transition:a(()=>t[j.value]),onStarted:()=>{w.value=!0,N.value=!1,g("started",V.value)},onFinished:()=>{w.value=!1,N.value=!1,g("finished",V.value)}}),$=a(()=>{const e=N.value?M.value:P.value;if(!Number.isFinite(e))return`${f.prefix}0${f.suffix}`;const a=((e,a,t,u)=>{let s=a>0?e.toFixed(a):Math.floor(e).toString();if("."!==t&&s.includes(".")&&(s=s.replace(".",t)),u){const e=s.split(t);e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,u),s=e.join(t)}return s})(e,y.value,f.decimal,f.separator);return`${f.prefix}${a}${f.suffix}`}),E=()=>{N.value=!1,M.value=0},B=e=>{if(f.disabled)return;const a=void 0!==e?e:V.value;Number.isFinite(a)&&(V.value=a,(e=>{const a=N.value?M.value:P.value;return Math.abs(a-e)<p})(a)||(N.value&&(F.value=M.value,E()),v(()=>{F.value=a})))},O=()=>{(w.value||N.value)&&(F.value=0,E(),g("paused",0))};return l(b,e=>{f.autoStart&&!f.disabled?B(e):V.value=e},{immediate:f.autoStart&&!f.disabled}),l(()=>f.disabled,e=>{e&&w.value&&O()}),r(()=>{w.value&&O()}),c({start:B,pause:()=>{w.value&&!N.value&&(N.value=!0,M.value=P.value,F.value=M.value,g("paused",M.value))},reset:(e=0)=>{const a=x(e,0,0);F.value=a,V.value=a,E(),g("reset")},stop:O,setTarget:e=>{Number.isFinite(e)&&(V.value=e,!w.value&&!f.autoStart||f.disabled||B(e))},get isRunning(){return w.value},get isPaused(){return N.value},get currentValue(){return N.value?M.value:P.value},get targetValue(){return V.value},get progress(){const e=N.value?M.value:P.value,a=V.value;return 0===a?0===e?1:0:Math.abs(e/a)}}),(e,a)=>(i(),n("span",{class:d(["text-g-900 tabular-nums",w.value?"transition-opacity duration-300 ease-in-out":""])},o($.value),3))}}),w={class:"art-card relative flex flex-col justify-center h-35 px-5 mb-5 max-sm:mb-4"},N={class:"text-g-700 text-sm"},M={class:"absolute top-0 bottom-0 right-5 m-auto size-12.5 rounded-xl flex-cc bg-theme/10"},P=e({__name:"card-list",setup(e){const a=c([{des:"总用户量",icon:"ri:pie-chart-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"总访问量",icon:"ri:group-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"总IP数",icon:"ri:fire-line",startVal:0,duration:1e3,num:0,change:"+0%"},{des:"今日新增用户",icon:"ri:progress-2-line",startVal:0,duration:1e3,num:0,change:"+0%"}]),t=()=>{return e=null,t=null,u=function*(){try{const e=yield F();if(e){a[0].num=e.total_users,a[1].num=e.total_visits,a[2].num=e.total_ips;const t=Object.keys(e.user_growth);if(t.length>0){const u=t[t.length-1];a[3].num=e.user_growth[u]||0}}}catch(e){}},new Promise((a,s)=>{var l=e=>{try{n(u.next(e))}catch(a){s(a)}},r=e=>{try{n(u.throw(e))}catch(a){s(a)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);n((u=u.apply(e,t)).next())});var e,t,u};return m(()=>{t()}),(e,t)=>{const u=V,s=j,l=y,r=_;return i(),p(r,{gutter:20,class:"flex"},{default:f(()=>[(i(!0),n(g,null,x(a,(e,a)=>(i(),p(l,{key:a,sm:12,md:6,lg:6},{default:f(()=>[h("div",w,[h("span",N,o(e.des),1),b(u,{class:"text-[26px] font-medium mt-2",target:e.num,duration:1300},null,8,["target"]),h("div",M,[b(s,{icon:e.icon,class:"text-xl text-theme"},null,8,["icon"])])])]),_:2},1024))),128))]),_:1})}}});export{P as _};
