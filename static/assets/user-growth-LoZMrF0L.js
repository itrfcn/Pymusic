import{d as e,a,c as t,w as s,o as r,n as l,aA as o,e as i,f as n,h as u,m as c,p as d}from"./index-DtLPO4VG.js";import{E as v}from"./el-empty-Bn1z00vH.js";import"./index-Duxs7wf3.js";import{i as p,L as m}from"./install-DDFsmAWw.js";import{_ as h}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-B-FCdvUf.js";const f={class:"user-growth-container"},w={class:"stats-summary"},b={class:"stat-item"},y={class:"stat-value"},g={class:"stat-item"},j={class:"stat-value"},x={class:"stat-item"},G={class:"stat-value"},D={class:"chart-container"},_={key:0,class:"no-data"},k=h(e({__name:"user-growth",props:{userGrowthData:{}},setup(e){const h=e,k=a(null),O=a(null),L=t(()=>Object.values(h.userGrowthData).reduce((e,a)=>e+a,0)),E=t(()=>{const e=Object.values(h.userGrowthData).length;return e>0?Math.round(L.value/e):0}),z=t(()=>{let e="",a=0;return Object.entries(h.userGrowthData).forEach(([t,s])=>{s>a&&(a=s,e=t)}),e}),A=()=>{if(!k.value||0===Object.keys(h.userGrowthData).length)return;O.value&&O.value.dispose(),O.value=p(k.value);const e=Object.keys(h.userGrowthData).sort(),a=e.map(e=>h.userGrowthData[e]),t={title:{text:"用户增长趋势",left:"center"},tooltip:{trigger:"axis"},legend:{data:["用户增长数"],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",name:"新增用户数",axisLabel:{formatter:"{value}"}},series:[{name:"用户增长数",type:"line",stack:"Total",data:a,lineStyle:{color:"#6366f1",width:2},areaStyle:{color:new m(0,0,0,1,[{offset:0,color:"rgba(99, 102, 241, 0.6)"},{offset:1,color:"rgba(99, 102, 241, 0.1)"}])},itemStyle:{color:"#6366f1",borderColor:"#6366f1",borderWidth:2}}]};O.value.setOption(t)},S=()=>{var e;null==(e=O.value)||e.resize()};return s(()=>h.userGrowthData,()=>{l(()=>{A()})},{deep:!0}),r(()=>{l(()=>{A()}),window.addEventListener("resize",S)}),o(()=>{window.removeEventListener("resize",S),O.value&&O.value.dispose()}),(a,t)=>{const s=v;return n(),i("div",f,[u("div",w,[u("div",b,[u("div",y,c(L.value),1),t[0]||(t[0]=u("div",{class:"stat-label"},"总用户增长",-1))]),u("div",g,[u("div",j,c(E.value),1),t[1]||(t[1]=u("div",{class:"stat-label"},"平均日增长",-1))]),u("div",x,[u("div",G,c(z.value),1),t[2]||(t[2]=u("div",{class:"stat-label"},"增长峰值日",-1))])]),u("div",D,[0===Object.keys(e.userGrowthData).length?(n(),i("div",_,[d(s,{description:"暂无数据"})])):(n(),i("div",{key:1,ref_key:"chartRef",ref:k,class:"echart-container"},null,512))])])}}}),[["__scopeId","data-v-9a4cf07e"]]);export{k as default};
