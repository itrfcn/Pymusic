var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&i(e,a,l[a]);return e};import{d as n,b4 as u,v as p,c as d,aJ as m,b5 as b,b6 as c,t as y,E as f,e as h,f as v,p as g,z as k,u as x,a3 as w,am as j,y as _,b7 as T,an as E,m as P,j as V,O as B,k as O,h as R,G as S,l as D,g as H,a as I,r as L,w as C,F as M,$ as U,a1 as F,b8 as N,aQ as A,n as q,aC as $}from"./index-DtLPO4VG.js";/* empty css                  *//* empty css                   *//* empty css                  */import{b as W,a as J,E as K}from"./el-radio-VjS3vhSd.js";/* empty css                        */import{E as z,a as G,b as Q,c as X,d as Y,e as Z,f as ee,g as le}from"./tree-select-v4UM_rlF.js";/* empty css                     */import{E as ae}from"./el-row-DaT-_pz0.js";import{E as te}from"./el-col-Ki2JLbCA.js";import{a as se,b as oe}from"./el-option-Ov18kU7i.js";/* empty css              */import{a as ie,E as re}from"./index-Rg8GWnlI.js";import{E as ne,a as ue}from"./index-Dcq227u9.js";import{E as pe}from"./index-B1oc1BI_.js";import{E as de}from"./index-Bbf00Op9.js";import{E as me}from"./index-D_yz80at.js";import{E as be}from"./index-iLZH01ON.js";import{E as ce}from"./index-DbLJzq82.js";import{E as ye}from"./index-7btWiO1t.js";import{E as fe}from"./index-DA2u0qjG.js";const he={class:"px-4 pb-0 pt-4 md:px-4 md:pt-4"},ve={key:1},ge={class:"flex gap-2 md:justify-center"},ke=n((xe=r({},{name:"ArtForm"}),we={__name:"index",props:u({items:{default:()=>[]},span:{default:6},gutter:{default:12},labelPosition:{default:"right"},labelWidth:{default:"70px"},buttonLeftLimit:{default:2},showReset:{type:Boolean,default:!0},showSubmit:{type:Boolean,default:!0},disabledSubmit:{type:Boolean,default:!1}},{modelValue:{default:{}},modelModifiers:{}}),emits:u(["reset","submit"],["update:modelValue"]),setup(e,{expose:l,emit:a}){const t={input:ce,inputtag:ee,number:be,select:oe,switch:me,checkbox:ne,checkboxgroup:ue,radiogroup:J,date:de,daterange:de,datetime:de,datetimerange:de,rate:Z,slider:Y,cascader:X,timepicker:Q,timeselect:G,treeselect:z},{width:s}=m(),{t:o}=p(),i=d(()=>s.value<500),n=b("formRef"),u=e,I=a,L=c(e,"modelValue"),C=["label","labelWidth","key","type","hidden","span","slots"],M=e=>{if(e.props)return e.props;const l=r({},e);return C.forEach(e=>delete l[e]),l},U=e=>{if(!e.slots)return{};const l={};return Object.entries(e.slots).forEach(([e,a])=>{a&&(l[e]=a)}),l},F=e=>{if(e.render)return e.render;const{type:l}=e;return t[l]||t.input},N=(e,l)=>le(e,ye.value,l),A=d(()=>u.items.filter(e=>!e.hidden)),q=d(()=>({"justify-content":i.value?"flex-end":u.items.filter(e=>!e.hidden).length<=u.buttonLeftLimit?"flex-start":"flex-end"})),$=()=>{var e;null==(e=n.value)||e.resetFields(),Object.assign(L.value,Object.fromEntries(u.items.map(({key:e})=>[e,void 0]))),I("reset")},K=()=>{I("submit")};l({ref:n,validate:(...e)=>{var l;return null==(l=n.value)?void 0:l.validate(...e)},reset:$});const{span:ye,gutter:fe,labelPosition:ke,labelWidth:xe}=y(u);return(l,a)=>{const t=se,s=W,i=ie,n=te,u=pe,p=ae,d=re,m=f("ripple");return v(),h("section",he,[g(d,B({ref:"formRef",model:L.value,"label-position":x(ke)},r({},l.$attrs)),{default:k(()=>[g(p,{class:"flex flex-wrap",gutter:x(fe)},{default:k(()=>[(v(!0),h(w,null,j(x(A),e=>(v(),_(n,{key:e.key,xs:N(e.span,"xs"),sm:N(e.span,"sm"),md:N(e.span,"md"),lg:N(e.span,"lg"),xl:N(e.span,"xl")},{default:k(()=>[g(i,{prop:e.key,"label-width":e.label?e.labelWidth||x(xe):void 0},T({default:k(()=>[V(l.$slots,e.key,{item:e,modelValue:L.value},()=>[(v(),_(E(F(e)),B({modelValue:L.value[e.key],"onUpdate:modelValue":l=>L.value[e.key]=l},{ref_for:!0},M(e)),T({default:k(()=>{var l,a,o;return["select"===e.type&&(null==(l=M(e))?void 0:l.options)?(v(!0),h(w,{key:0},j(M(e).options,e=>(v(),_(t,B({ref_for:!0},e,{key:e.value}),null,16))),128)):O("",!0),"checkboxgroup"===e.type&&(null==(a=M(e))?void 0:a.options)?(v(!0),h(w,{key:1},j(M(e).options,e=>(v(),_(x(ne),B({ref_for:!0},e,{key:e.value}),null,16))),128)):O("",!0),"radiogroup"===e.type&&(null==(o=M(e))?void 0:o.options)?(v(!0),h(w,{key:2},j(M(e).options,e=>(v(),_(s,B({ref_for:!0},e,{key:e.value}),null,16))),128)):O("",!0)]}),_:2},[j(U(e),(e,l)=>({name:l,fn:k(()=>[(v(),_(E(e)))])}))]),1040,["modelValue","onUpdate:modelValue"]))])]),_:2},[e.label?{name:"label",fn:k(()=>["string"!=typeof e.label?(v(),_(E(e.label),{key:0})):(v(),h("span",ve,P(e.label),1))]),key:"0"}:void 0]),1032,["prop","label-width"])]),_:2},1032,["xs","sm","md","lg","xl"]))),128)),g(n,{xs:24,sm:24,md:x(ye),lg:x(ye),xl:x(ye),class:"max-w-full flex-1"},{default:k(()=>[R("div",{class:"mb-3 flex-c flex-wrap justify-end md:flex-row md:items-stretch md:gap-2",style:H(x(q))},[R("div",ge,[e.showReset?S((v(),_(u,{key:0,class:"reset-button",onClick:$},{default:k(()=>[D(P(x(o)("table.form.reset")),1)]),_:1})),[[m]]):O("",!0),e.showSubmit?S((v(),_(u,{key:1,type:"primary",class:"submit-button",onClick:K,disabled:e.disabledSubmit},{default:k(()=>[D(P(x(o)("table.form.submit")),1)]),_:1},8,["disabled"])),[[m]]):O("",!0)])],4)]),_:1},8,["md","lg","xl"])]),_:3},8,["gutter"])]),_:3},16,["model","label-position"])])}}},l(xe,a(we))));var xe,we;const je={class:"dialog-footer"},_e=n({__name:"menu-dialog",props:{visible:{type:Boolean,default:!1},editData:{},type:{default:"menu"},lockType:{type:Boolean,default:!1}},emits:["update:visible","submit"],setup(e,{emit:l}){const{width:a}=m(),t=(e,l)=>()=>U("span",{class:"flex items-center"},[U("span",e),U(fe,{content:l,placement:"top"},()=>U(F,{class:"ml-0.5 cursor-help"},()=>U(N)))]),s=e,o=l,i=I(),n=I(!1),u=L({menuType:"menu",id:0,name:"",path:"",label:"",component:"",icon:"",isEnable:!0,sort:1,isMenu:!0,keepAlive:!0,isHide:!1,isHideTab:!1,link:"",isIframe:!1,showBadge:!1,showTextBadge:"",fixedTab:!1,activePath:"",roles:[],isFullPage:!1,authName:"",authLabel:"",authIcon:"",authSort:1}),p=L({name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],label:[{required:!0,message:"输入权限标识",trigger:"blur"}],authName:[{required:!0,message:"请输入权限名称",trigger:"blur"}],authLabel:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}),b=d(()=>{const e=[{label:"菜单类型",key:"menuType",span:24}],l=a.value<640?12:6;return"menu"===u.menuType?[...e,{label:"菜单名称",key:"name",type:"input",props:{placeholder:"菜单名称"}},{label:t("路由地址","一级菜单：以 / 开头的绝对路径（如 /dashboard）\n二级及以下：相对路径（如 console、user）"),key:"path",type:"input",props:{placeholder:"如：/dashboard 或 console"}},{label:"权限标识",key:"label",type:"input",props:{placeholder:"如：User"}},{label:t("组件路径","一级父级菜单：填写 /index/index\n具体页面：填写组件路径（如 /system/user）\n目录菜单：留空"),key:"component",type:"input",props:{placeholder:"如：/system/user 或留空"}},{label:"图标",key:"icon",type:"input",props:{placeholder:"如：ri:user-line"}},{label:t("角色权限","仅用于前端权限模式：配置角色标识（如 R_SUPER、R_ADMIN）\n后端权限模式：无需配置"),key:"roles",type:"inputtag",props:{placeholder:"输入角色标识后按回车，如：R_SUPER"}},{label:"菜单排序",key:"sort",type:"number",props:{min:1,controlsPosition:"right",style:{width:"100%"}}},{label:"外部链接",key:"link",type:"input",props:{placeholder:"如：https://www.example.com"}},{label:"文本徽章",key:"showTextBadge",type:"input",props:{placeholder:"如：New、Hot"}},{label:t("激活路径",'用于详情页等隐藏菜单，指定高亮显示的父级菜单路径\n例如：用户详情页高亮显示"用户管理"菜单'),key:"activePath",type:"input",props:{placeholder:"如：/system/user"}},{label:"是否启用",key:"isEnable",type:"switch",span:l},{label:"页面缓存",key:"keepAlive",type:"switch",span:l},{label:"隐藏菜单",key:"isHide",type:"switch",span:l},{label:"是否内嵌",key:"isIframe",type:"switch",span:l},{label:"显示徽章",key:"showBadge",type:"switch",span:l},{label:"固定标签",key:"fixedTab",type:"switch",span:l},{label:"标签隐藏",key:"isHideTab",type:"switch",span:l},{label:"全屏页面",key:"isFullPage",type:"switch",span:l}]:[...e,{label:"权限名称",key:"authName",type:"input",props:{placeholder:"如：新增、编辑、删除"}},{label:"权限标识",key:"authLabel",type:"input",props:{placeholder:"如：add、edit、delete"}},{label:"权限排序",key:"authSort",type:"number",props:{min:1,controlsPosition:"right",style:{width:"100%"}}}]}),c=d(()=>{const e="menu"===u.menuType?"菜单":"按钮";return n.value?`编辑${e}`:`新建${e}`}),y=d(()=>!!n.value||!(n.value||"menu"!==u.menuType||!s.lockType)),f=()=>{return e=null,l=null,a=function*(){if(i.value)try{yield i.value.validate(),o("submit",r({},u)),A.success((n.value?"编辑":"新增")+"成功"),h()}catch(e){A.error("表单校验失败，请检查输入")}},new Promise((t,s)=>{var o=e=>{try{r(a.next(e))}catch(l){s(l)}},i=e=>{try{r(a.throw(e))}catch(l){s(l)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,i);r((a=a.apply(e,l)).next())});var e,l,a},h=()=>{o("update:visible",!1)},w=()=>{var e;null==(e=i.value)||e.reset(),u.menuType="menu",n.value=!1};return C(()=>s.visible,e=>{e&&(u.menuType=s.type,q(()=>{s.editData&&(()=>{var e,l,a,t,o,i,r,p,d,m,b,c,y,f,h,v,g,k,x,w,j,_,T,E,P;if(s.editData)if(n.value=!0,"menu"===u.menuType){const n=s.editData;u.id=n.id||0,u.name=$((null==(e=n.meta)?void 0:e.title)||""),u.path=n.path||"",u.label=n.name||"",u.component=n.component||"",u.icon=(null==(l=n.meta)?void 0:l.icon)||"",u.sort=(null==(a=n.meta)?void 0:a.sort)||1,u.isMenu=null==(o=null==(t=n.meta)?void 0:t.isMenu)||o,u.keepAlive=null!=(r=null==(i=n.meta)?void 0:i.keepAlive)&&r,u.isHide=null!=(d=null==(p=n.meta)?void 0:p.isHide)&&d,u.isHideTab=null!=(b=null==(m=n.meta)?void 0:m.isHideTab)&&b,u.isEnable=null==(y=null==(c=n.meta)?void 0:c.isEnable)||y,u.link=(null==(f=n.meta)?void 0:f.link)||"",u.isIframe=null!=(v=null==(h=n.meta)?void 0:h.isIframe)&&v,u.showBadge=null!=(k=null==(g=n.meta)?void 0:g.showBadge)&&k,u.showTextBadge=(null==(x=n.meta)?void 0:x.showTextBadge)||"",u.fixedTab=null!=(j=null==(w=n.meta)?void 0:w.fixedTab)&&j,u.activePath=(null==(_=n.meta)?void 0:_.activePath)||"",u.roles=(null==(T=n.meta)?void 0:T.roles)||[],u.isFullPage=null!=(P=null==(E=n.meta)?void 0:E.isFullPage)&&P}else{const e=s.editData;u.authName=e.title||"",u.authLabel=e.authMark||"",u.authIcon=e.icon||"",u.authSort=e.sort||1}})()}))}),C(()=>s.type,e=>{s.visible&&(u.menuType=e)}),(l,t)=>{const s=K,o=J,r=pe,n=ye;return v(),_(n,{title:x(c),"model-value":e.visible,"onUpdate:modelValue":h,width:"860px","align-center":"",class:"menu-dialog",onClosed:w},{footer:k(()=>[R("span",je,[g(r,{onClick:h},{default:k(()=>[...t[4]||(t[4]=[D("取 消",-1)])]),_:1}),g(r,{type:"primary",onClick:f},{default:k(()=>[...t[5]||(t[5]=[D("确 定",-1)])]),_:1})])]),default:k(()=>[g(ke,{ref_key:"formRef",ref:i,modelValue:x(u),"onUpdate:modelValue":t[1]||(t[1]=e=>M(u)?u.value=e:null),items:x(b),rules:x(p),span:x(a)>640?12:24,gutter:20,"label-width":"100px","show-reset":!1,"show-submit":!1},{menuType:k(()=>[g(o,{modelValue:x(u).menuType,"onUpdate:modelValue":t[0]||(t[0]=e=>x(u).menuType=e),disabled:x(y)},{default:k(()=>[g(s,{value:"menu",label:"menu"},{default:k(()=>[...t[2]||(t[2]=[D("菜单",-1)])]),_:1}),g(s,{value:"button",label:"button"},{default:k(()=>[...t[3]||(t[3]=[D("按钮",-1)])]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1},8,["modelValue","items","rules","span"])]),_:1},8,["title","model-value"])}}});export{_e as _};
