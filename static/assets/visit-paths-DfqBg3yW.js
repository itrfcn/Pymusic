import{d as a,a as e,c as t,w as s,o as i,n as l,aA as r,e as o,f as n,h as p,m as c,p as d}from"./index-DxSWhjl1.js";import{E as v}from"./el-empty-BI85Vzrg.js";import"./index-Duxs7wf3.js";import{i as u,L as m}from"./install-DDFsmAWw.js";import{_ as h}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BdUhC8Rj.js";const f={class:"visit-paths-container"},b={class:"stats-summary"},y={class:"stat-item"},g={class:"stat-value"},x={class:"stat-item"},j={class:"stat-value"},L={class:"chart-container"},_={key:0,class:"no-data"},w=h(a({__name:"visit-paths",props:{pathsData:{}},setup(a){const h=a,w=e(null),D=e(null),O=t(()=>Object.keys(h.pathsData).length),k=t(()=>{let a="",e=0;return Object.entries(h.pathsData).forEach(([t,s])=>{s>e&&(e=s,a=t)}),a}),z=()=>{if(!w.value||0===Object.keys(h.pathsData).length)return;D.value&&D.value.dispose(),D.value=u(w.value);const a=Object.entries(h.pathsData).sort(([,a],[,e])=>e-a).slice(0,10),e={title:{text:"访问路径TOP 10",left:"center"},tooltip:{trigger:"axis"},legend:{data:["访问次数"],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:"访问次数",axisLabel:{formatter:"{value}"},splitLine:{lineStyle:{color:"rgba(0, 0, 0, 0.05)"}}},yAxis:{type:"category",data:a.map(([a])=>a),name:"访问路径",axisLabel:{fontSize:12,interval:0},splitLine:{show:!1}},series:[{name:"访问次数",type:"bar",data:a.map(([,a])=>a),itemStyle:{color:new m(1,0,0,0,[{offset:0,color:"rgba(236, 72, 153, 0.9)"},{offset:1,color:"rgba(236, 72, 153, 0.5)"}]),borderRadius:[0,4,4,0]}}]};D.value.setOption(e)},E=()=>{var a;null==(a=D.value)||a.resize()};return s(()=>h.pathsData,()=>{l(()=>{z()})},{deep:!0}),i(()=>{l(()=>{z()}),window.addEventListener("resize",E)}),r(()=>{window.removeEventListener("resize",E),D.value&&D.value.dispose()}),(e,t)=>{const s=v;return n(),o("div",f,[p("div",b,[p("div",y,[p("div",g,c(O.value),1),t[0]||(t[0]=p("div",{class:"stat-label"},"总路径数",-1))]),p("div",x,[p("div",j,c(k.value),1),t[1]||(t[1]=p("div",{class:"stat-label"},"最常访问路径",-1))])]),p("div",L,[0===Object.keys(a.pathsData).length?(n(),o("div",_,[d(s,{description:"暂无数据"})])):(n(),o("div",{key:1,ref_key:"chartRef",ref:w,class:"echart-container"},null,512))])])}}}),[["__scopeId","data-v-33ed455a"]]);export{w as default};
