import{m as t,B as e,T as n,n as a,a as i,k as o,g as r,p as s,e as l,b as u,f as d,s as c,r as h,h as p,c as g,d as f,u as y,j as v,l as m,o as x,q as _,t as b,v as w,w as S,x as I,Z as M,y as C,z as L,D as T,A,C as D,E as P,F as N,G as k,H as E,I as R,J as z,K as O,M as V,P as B,N as G,O as W,Q as F,R as Y,S as U,U as H,V as X,W as Z,X as j,Y as q,_ as K,$,a0 as Q,a1 as J,a2 as tt,a3 as et,a4 as nt,a5 as at,a6 as it,a7 as ot,a8 as rt,a9 as st,aa as lt,ab as ut,ac as dt,ad as ct,ae as ht,af as pt,ag as gt,ah as ft,ai as yt,aj as vt,ak as mt,al as xt,am as _t,an as bt,ao as wt,ap as St,aq as It,ar as Mt,as as Ct,at as Lt,au as Tt,av as At,aw as Dt,ax as Pt,ay as Nt,az as kt,aA as Et,aB as Rt,aC as zt,aD as Ot,aE as Vt,aF as Bt,aG as Gt,aH as Wt,aI as Ft,aJ as Yt,aK as Ut,aL as Ht,aM as Xt,aN as Zt,aO as jt,aP as qt,aQ as Kt,aR as $t,aS as Qt,aT as Jt,aU as te,aV as ee,aW as ne,aX as ae,aY as ie,aZ as oe,a_ as re,a$ as se,b0 as le,b1 as ue,b2 as de,b3 as ce,b4 as he,b5 as pe,b6 as ge,b7 as fe,b8 as ye,b9 as ve,ba as me,bb as xe,bc as _e,bd as be,be as we,bf as Se,bg as Ie,bh as Me,bi as Ce,bj as Le,bk as Te,bl as Ae,bm as De,bn as Pe,bo as Ne,bp as ke,bq as Ee,br as Re,bs as ze,bt as Oe,bu as Ve,bv as Be,bw as Ge,bx as We,by as Fe,bz as Ye,bA as Ue,bB as He,bC as Xe,L as Ze,bD as je,bE as qe,bF as Ke,bG as $e,bH as Qe,bI as Je,bJ as tn,bK as en,bL as nn,bM as an,bN as on,bO as rn,bP as sn,bQ as ln,bR as un,bS as dn,bT as cn,bU as hn,bV as pn,bW as gn,bX as fn,bY as yn,bZ as vn,b_ as mn,b$ as xn,c0 as _n,c1 as bn,c2 as wn,c3 as Sn,c4 as In,c5 as Mn,c6 as Cn,c7 as Ln,c8 as Tn,c9 as An,ca as Dn,cb as Pn,cc as Nn,cd as kn,ce as En,cf as Rn,cg as zn,ch as On,ci as Vn,cj as Bn,ck as Gn,cl as Wn,cm as Fn,cn as Yn,co as Un,cp as Hn,cq as Xn,cr as Zn,cs as jn,ct as qn,cu as Kn,cv as $n,cw as Qn,cx as Jn,cy as ta,cz as ea,cA as na,cB as aa,cC as ia,cD as oa,cE as ra,cF as sa,cG as la,cH as ua,cI as da,cJ as ca,cK as ha,cL as pa,cM as ga,cN as fa,cO as ya,cP as va,cQ as ma,cR as xa,cS as _a,cT as ba,cU as wa,cV as Sa,cW as Ia,cX as Ma,cY as Ca,cZ as La,c_ as Ta,c$ as Aa,d0 as Da,d1 as Pa,d2 as Na,d3 as ka,d4 as Ea,d5 as Ra,d6 as za,d7 as Oa,d8 as Va,d9 as Ba,da as Ga,db as Wa,dc as Fa,dd as Ya,de as Ua,df as Ha,dg as Xa,dh as Za,di as ja,dj as qa,dk as Ka,dl as $a,dm as Qa,dn as Ja,dp as ti,dq as ei,dr as ni,ds as ai,dt as ii,du as oi,dv as ri,dw as si,dx as li,dy as ui,dz as di,dA as ci,dB as hi,dC as pi,dD as gi,dE as fi,dF as yi,dG as vi,dH as mi,dI as xi,dJ as _i,dK as bi,dL as wi,dM as Si,dN as Ii,dO as Mi,dP as Ci,dQ as Li,dR as Ti,dS as Ai,dT as Di,dU as Pi,dV as Ni,dW as ki,dX as Ei,dY as Ri,dZ as zi,d_ as Oi,d$ as Vi,e0 as Bi,e1 as Gi,e2 as Wi,e3 as Fi,e4 as Yi,e5 as Ui,e6 as Hi,e7 as Xi,e8 as Zi,e9 as ji,ea as qi,eb as Ki,ec as $i,ed as Qi,ee as Ji,ef as to,eg as eo,eh as no,ei as ao,ej as io,ek as oo,el as ro,em as so,en as lo,eo as uo,ep as co,eq as ho,er as po,es as go,et as fo,eu as yo,ev as vo,ew as mo,ex as xo,ey as _o,ez as bo,eA as wo,eB as So,eC as Io,eD as Mo,eE as Co,eF as Lo,eG as To,eH as Ao,eI as Do,eJ as Po,eK as No,eL as ko,eM as Eo}from"./install-DDFsmAWw.js";function Ro(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function zo(t,e){var n=t.label,a=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:Ro(a&&a.shape.points)}}var Oo=["align","verticalAlign","width","height","fontSize"],Vo=new n,Bo=t(),Go=t();function Wo(t,e,n){for(var a=0;a<n.length;a++){var i=n[a];null!=e[i]&&(t[i]=e[i])}}var Fo=["x","y","rotation"],Yo=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,n,i,o,r){var s=o.style,l=o.__hostTarget.textConfig||{},u=o.getComputedTransform(),d=o.getBoundingRect().plain();e.applyTransform(d,d,u),u?Vo.setLocalTransform(u):(Vo.x=Vo.y=Vo.rotation=Vo.originX=Vo.originY=0,Vo.scaleX=Vo.scaleY=1),Vo.rotation=a(Vo.rotation);var c,h=o.__hostTarget;if(h){c=h.getBoundingRect().plain();var p=h.getComputedTransform();e.applyTransform(c,c,p)}var g=c&&h.getTextGuideLine();this._labelList.push({label:o,labelLine:g,seriesModel:i,dataIndex:t,dataType:n,layoutOptionOrCb:r,layoutOption:null,rect:d,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:g&&g.ignore,x:Vo.x,y:Vo.y,scaleX:Vo.scaleX,scaleY:Vo.scaleY,rotation:Vo.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:o.cursor,attachedPos:l.position,attachedRot:l.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,a=n.get("labelLayout");(i(a)||o(a).length)&&t.group.traverse(function(t){if(t.ignore)return!0;var i=t.getTextContent(),o=r(t);i&&!i.disableLabelLayout&&e._addLabel(o.dataIndex,o.dataType,n,i,a)})},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function a(t,e){return function(){y(t,e)}}for(var o=0;o<this._labelList.length;o++){var r=this._labelList[o],l=r.label,u=l.__hostTarget,d=r.defaultAttr,c=void 0;c=(c=i(r.layoutOptionOrCb)?r.layoutOptionOrCb(zo(r,u)):r.layoutOptionOrCb)||{},r.layoutOption=c;var h=Math.PI/180;u&&u.setTextConfig({local:!1,position:null!=c.x||null!=c.y?null:d.attachedPos,rotation:null!=c.rotate?c.rotate*h:d.attachedRot,offset:[c.dx||0,c.dy||0]});var p=!1;if(null!=c.x?(l.x=s(c.x,e),l.setStyle("x",0),p=!0):(l.x=d.x,l.setStyle("x",d.style.x)),null!=c.y?(l.y=s(c.y,n),l.setStyle("y",0),p=!0):(l.y=d.y,l.setStyle("y",d.style.y)),c.labelLinePoints){var g=u.getTextGuideLine();g&&(g.setShape({points:c.labelLinePoints}),p=!1)}Bo(l).needsUpdateLabelLine=p,l.rotation=null!=c.rotate?c.rotate*h:d.rotation,l.scaleX=d.scaleX,l.scaleY=d.scaleY;for(var f=0;f<Oo.length;f++){var v=Oo[f];l.setStyle(v,null!=c[v]?c[v]:d.style[v])}if(c.draggable){if(l.draggable=!0,l.cursor="move",u){var m=r.seriesModel;if(null!=r.dataIndex)m=r.seriesModel.getData(r.dataType).getItemModel(r.dataIndex);l.on("drag",a(u,m.getModel("labelLine")))}}else l.off("drag"),l.cursor=d.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),a=[];l(this._labelList,function(t){t.defaultAttr.ignore||a.push(u({},t))});var i=d(a,function(t){return"shiftX"===t.layoutOption.moveOverlap}),o=d(a,function(t){return"shiftY"===t.layoutOption.moveOverlap});c(i,0,0,e),c(o,1,0,n);var r=d(a,function(t){return t.layoutOption.hideOverlap});h(r),p(r)},t.prototype.processLabelsOverall=function(){var t=this;l(this._chartViewList,function(e){var n=e.__model,a=e.ignoreLabelLineUpdate,i=n.isAnimationEnabled();e.group.traverse(function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var o=!a,r=e.getTextContent();!o&&r&&(o=Bo(r).needsUpdateLabelLine),o&&t._updateLabelLine(e,n),i&&t._animateLabels(e,n)})})},t.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),a=r(t),i=a.dataIndex;if(n&&null!=i){var o=e.getData(a.dataType),s=o.getItemModel(i),l={},u=o.getItemVisual(i,"style");if(u){var d=o.getVisual("drawType");l.stroke=u[d]}var c=s.getModel("labelLine");g(t,f(s),l),y(t,c)}},t.prototype._animateLabels=function(t,e){var n=t.getTextContent(),a=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!v(t))){var i=(g=Bo(n)).oldLayout,o=r(t),s=o.dataIndex,l={x:n.x,y:n.y,rotation:n.rotation},u=e.getData(o.dataType);if(i){n.attr(i);var d=t.prevStates;d&&(b(d,"select")>=0&&n.attr(g.oldLayoutSelect),b(d,"emphasis")>=0&&n.attr(g.oldLayoutEmphasis)),w(n,l,e,s)}else if(n.attr(l),!m(n).valueAnimation){var c=x(n.style.opacity,1);n.style.opacity=0,_(n,{style:{opacity:c}},e,s)}if(g.oldLayout=l,n.states.select){var h=g.oldLayoutSelect={};Wo(h,l,Fo),Wo(h,n.states.select,Fo)}if(n.states.emphasis){var p=g.oldLayoutEmphasis={};Wo(p,l,Fo),Wo(p,n.states.emphasis,Fo)}S(n,s,u,e,e)}if(a&&!a.ignore&&!a.invisible){i=(g=Go(a)).oldLayout;var g,f={points:a.shape.points};i?(a.attr({shape:i}),w(a,{shape:f},e)):(a.setShape(f),a.style.strokePercent=0,_(a,{style:{strokePercent:1}},e)),g.oldLayout=f}},t}(),Uo=t();var Ho=Math.sin,Xo=Math.cos,Zo=Math.PI,jo=2*Math.PI,qo=180/Zo,Ko=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,a,i,o){this._add("C",t,e,n,a,i,o)},t.prototype.quadraticCurveTo=function(t,e,n,a){this._add("Q",t,e,n,a)},t.prototype.arc=function(t,e,n,a,i,o){this.ellipse(t,e,n,n,0,a,i,o)},t.prototype.ellipse=function(t,e,n,a,i,o,r,s){var l=r-o,u=!s,d=Math.abs(l),c=I(d-jo)||(u?l>=jo:-l>=jo),h=l>0?l%jo:l%jo+jo,p=!1;p=!!c||!I(d)&&h>=Zo==!!u;var g=t+n*Xo(o),f=e+a*Ho(o);this._start&&this._add("M",g,f);var y=Math.round(i*qo);if(c){var v=1/this._p,m=(u?1:-1)*(jo-v);this._add("A",n,a,y,1,+u,t+n*Xo(o+m),e+a*Ho(o+m)),v>.01&&this._add("A",n,a,y,0,+u,g,f)}else{var x=t+n*Xo(r),_=e+a*Ho(r);this._add("A",n,a,y,+p,+u,x,_)}},t.prototype.rect=function(t,e,n,a){this._add("M",t,e),this._add("l",n,0),this._add("l",0,a),this._add("l",-n,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,n,a,i,o,r,s,l){for(var u=[],d=this._p,c=1;c<arguments.length;c++){var h=arguments[c];if(isNaN(h))return void(this._invalid=!0);u.push(Math.round(h*d)/d)}this._d.push(t+u.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),$o="none",Qo=Math.round;var Jo=["lineCap","miterLimit","lineJoin"],tr=A(Jo,function(t){return"stroke-"+t.toLowerCase()});function er(t,e,n,a){var i=null==e.opacity?1:e.opacity;if(n instanceof M)t("opacity",i);else{if(function(t){var e=t.fill;return null!=e&&e!==$o}(e)){var o=C(e.fill);t("fill",o.color);var r=null!=e.fillOpacity?e.fillOpacity*o.opacity*i:o.opacity*i;r<1&&t("fill-opacity",r)}else t("fill",$o);if(function(t){var e=t.stroke;return null!=e&&e!==$o}(e)){var s=C(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,u=l?(e.lineWidth||0)/l:0,d=null!=e.strokeOpacity?e.strokeOpacity*s.opacity*i:s.opacity*i,c=e.strokeFirst;if(1!==u&&t("stroke-width",u),c&&t("paint-order",c?"stroke":"fill"),d<1&&t("stroke-opacity",d),e.lineDash){var h=L(n),p=h[0],g=h[1];p&&(g=Qo(g||0),t("stroke-dasharray",p.join(",")),(g||a)&&t("stroke-dashoffset",g))}for(var f=0;f<Jo.length;f++){var y=Jo[f];if(e[y]!==T[y]){var v=e[y]||T[y];v&&t(tr[f],v)}}}}}var nr="http://www.w3.org/2000/svg",ar="http://www.w3.org/1999/xlink",ir="ecmeta_";function or(t){return document.createElementNS(nr,t)}function rr(t,e,n,a,i){return{tag:t,attrs:n||{},children:a,text:i,key:e}}function sr(t,e){var n=(e=e||{}).newline?"\n":"";return function t(e){var a=e.children,i=e.tag,o=e.attrs,r=e.text;return function(t,e){var n=[];if(e)for(var a in e){var i=e[a],o=a;!1!==i&&(!0!==i&&null!=i&&(o+='="'+i+'"'),n.push(o))}return"<"+t+" "+n.join(" ")+">"}(i,o)+("style"!==i?D(r):r||"")+(a?""+n+A(a,function(e){return t(e)}).join(n)+n:"")+("</"+i+">")}(t)}function lr(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function ur(t,e,n,a){return rr("svg","root",{width:t,height:e,xmlns:nr,"xmlns:xlink":ar,version:"1.1",baseProfile:"full",viewBox:!!a&&"0 0 "+t+" "+e},n)}var dr=0;function cr(){return dr++}var hr={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},pr="transform-origin";function gr(t,e,n){var a=R({},t.shape);R(a,e),t.buildPath(n,a);var i=new Ko;return i.reset(V(t)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function fr(t,e){var n=e.originX,a=e.originY;(n||a)&&(t[pr]=n+"px "+a+"px")}var yr={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function vr(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function mr(t){return N(t)?hr[t]?"cubic-bezier("+hr[t]+")":k(t)?t:"":""}function xr(t,e,n,a){var i=t.animators,r=i.length,s=[];if(t instanceof P){var u=function(t,e,n){var a,i,r=t.shape.paths,s={};if(l(r,function(t){var e=lr(n.zrId);e.animation=!0,xr(t,{},e,!0);var r=e.cssAnims,l=e.cssNodes,u=o(r),d=u.length;if(d){var c=r[i=u[d-1]];for(var h in c){var p=c[h];s[h]=s[h]||{d:""},s[h].d+=p.d||""}for(var g in l){var f=l[g].animation;f.indexOf(i)>=0&&(a=f)}}}),a){e.d=!1;var u=vr(s,n);return a.replace(i,u)}}(t,e,n);if(u)s.push(u);else if(!r)return}else if(!r)return;for(var c={},h=0;h<r;h++){var p=i[h],g=[p.getMaxTime()/1e3+"s"],f=mr(p.getClip().easing),y=p.getDelay();f?g.push(f):g.push("linear"),y&&g.push(y/1e3+"s"),p.getLoop()&&g.push("infinite");var v=g.join(" ");c[v]=c[v]||[v,[]],c[v][1].push(p)}function m(i){var r,s=i[1],l=s.length,u={},c={},h={},p="animation-timing-function";function g(t,e,n){for(var a=t.getTracks(),i=t.getMaxTime(),o=0;o<a.length;o++){var r=a[o];if(r.needsAnimate()){var s=r.keyframes,l=r.propName;if(n&&(l=n(l)),l)for(var u=0;u<s.length;u++){var d=s[u],c=Math.round(d.time/i*100)+"%",h=mr(d.easing),g=d.rawValue;(N(g)||O(g))&&(e[c]=e[c]||{},e[c][l]=d.rawValue,h&&(e[c][p]=h))}}}}for(var f=0;f<l;f++){(M=(I=s[f]).targetName)?"shape"===M&&g(I,c):!a&&g(I,u)}for(var y in u){var v={};E(v,t),R(v,u[y]);var m=z(v),x=u[y][p];h[y]=m?{transform:m}:{},fr(h[y],v),x&&(h[y][p]=x)}var _=!0;for(var y in c){h[y]=h[y]||{};var b=!r;x=c[y][p];b&&(r=new B);var w=r.len();r.reset(),h[y].d=gr(t,c[y],r);var S=r.len();if(!b&&w!==S){_=!1;break}x&&(h[y][p]=x)}if(!_)for(var y in h)delete h[y].d;if(!a)for(f=0;f<l;f++){var I,M;"style"===(M=(I=s[f]).targetName)&&g(I,h,function(t){return yr[t]})}var C,L=o(h),T=!0;for(f=1;f<L.length;f++){var A=L[f-1],D=L[f];if(h[A][pr]!==h[D][pr]){T=!1;break}C=h[A][pr]}if(T&&C){for(var y in h)h[y][pr]&&delete h[y][pr];e[pr]=C}if(d(L,function(t){return o(h[t]).length>0}).length)return vr(h,n)+" "+i[0]+" both"}for(var x in c){(u=m(c[x]))&&s.push(u)}if(s.length){var _=n.zrId+"-cls-"+cr();n.cssNodes["."+_]={animation:s.join(",")},e.class=_}}function _r(t,e,n,a){var i=JSON.stringify(t),o=n.cssStyleCache[i];o||(o=n.zrId+"-cls-"+cr(),n.cssStyleCache[i]=o,n.cssNodes["."+o+":hover"]=t),e.class=e.class?e.class+" "+o:o}var br=Math.round;function wr(t){return t&&N(t.src)}function Sr(t){return t&&i(t.toDataURL)}function Ir(t,e,n,a){er(function(i,o){var r="fill"===i||"stroke"===i;r&&ot(o)?Rr(e,t,i,a):r&&rt(o)?zr(n,t,i,a):t[i]=o,r&&a.ssr&&"none"===o&&(t["pointer-events"]="visible")},e,n,!1),function(t,e,n){var a=t.style;if(lt(a)){var i=ut(t),o=n.shadowCache,r=o[i];if(!r){var s=t.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var d=a.shadowOffsetX||0,c=a.shadowOffsetY||0,h=a.shadowBlur,p=C(a.shadowColor),g=p.opacity,f=p.color,y=h/2/l+" "+h/2/u;r=n.zrId+"-s"+n.shadowIdx++,n.defs[r]=rr("filter",r,{id:r,x:"-100%",y:"-100%",width:"300%",height:"300%"},[rr("feDropShadow","",{dx:d/l,dy:c/u,stdDeviation:y,"flood-color":f,"flood-opacity":g})]),o[i]=r}e.filter=Y(r)}}(n,t,a)}function Mr(t,e){var n=st(e);n&&(n.each(function(e,n){null!=e&&(t[(ir+n).toLowerCase()]=e+"")}),e.isSilent()&&(t[ir+"silent"]="true"))}function Cr(t){return I(t[0]-1)&&I(t[1])&&I(t[2])&&I(t[3]-1)}function Lr(t,e,n){if(e&&(!function(t){return I(t[4])&&I(t[5])}(e)||!Cr(e))){var a=1e4;t.transform=Cr(e)?"translate("+br(e[4]*a)/a+" "+br(e[5]*a)/a+")":it(e)}}function Tr(t,e,n){for(var a=t.points,i=[],o=0;o<a.length;o++)i.push(br(a[o][0]*n)/n),i.push(br(a[o][1]*n)/n);e.points=i.join(" ")}function Ar(t){return!t.smooth}var Dr,Pr,Nr={circle:[(Dr=["cx","cy","r"],Pr=A(Dr,function(t){return"string"==typeof t?[t,t]:t}),function(t,e,n){for(var a=0;a<Pr.length;a++){var i=Pr[a],o=t[i[0]];null!=o&&(e[i[1]]=br(o*n)/n)}})],polyline:[Tr,Ar],polygon:[Tr,Ar]};function kr(t,e){var n=t.style,a=t.shape,i=Nr[t.type],o={},r=e.animation,s="path",l=t.style.strokePercent,u=e.compress&&V(t)||4;if(!i||e.willUpdate||i[1]&&!i[1](a)||r&&function(t){for(var e=t.animators,n=0;n<e.length;n++)if("shape"===e[n].targetName)return!0;return!1}(t)||l<1){var d=!t.path||t.shapeChanged();t.path||t.createPathProxy();var c=t.path;d&&(c.beginPath(),t.buildPath(c,t.shape),t.pathUpdated());var h=c.getVersion(),p=t,g=p.__svgPathBuilder;p.__svgPathVersion===h&&g&&l===p.__svgPathStrokePercent||(g||(g=p.__svgPathBuilder=new Ko),g.reset(u),c.rebuildPath(g,l),g.generateStr(),p.__svgPathVersion=h,p.__svgPathStrokePercent=l),o.d=g.getStr()}else{s=t.type;var f=Math.pow(10,u);i[0](a,o,f)}return Lr(o,t.transform),Ir(o,n,t,e),Mr(o,t),e.animation&&xr(t,o,e),e.emphasis&&function(t,e,n){if(!t.ignore)if(t.isSilent())_r(u={"pointer-events":"none"},e,n);else{var a=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},i=a.fill;if(!i){var o=t.style&&t.style.fill,r=t.states.select&&t.states.select.style&&t.states.select.style.fill,s=t.currentStates.indexOf("select")>=0&&r||o;s&&(i=G(s))}var l=a.lineWidth;l&&(l/=!a.strokeNoScale&&t.transform?t.transform[0]:1);var u={cursor:"pointer"};i&&(u.fill=i),a.stroke&&(u.stroke=a.stroke),l&&(u["stroke-width"]=l),_r(u,e,n)}}(t,o,e),rr(s,t.id+"",o)}function Er(t,e){return t instanceof W?kr(t,e):t instanceof M?function(t,e){var n=t.style,a=n.image;if(a&&!N(a)&&(wr(a)?a=a.src:Sr(a)&&(a=a.toDataURL())),a){var i=n.x||0,o=n.y||0,r={href:a,width:n.width,height:n.height};return i&&(r.x=i),o&&(r.y=o),Lr(r,t.transform),Ir(r,n,t,e),Mr(r,t),e.animation&&xr(t,r,e),rr("image",t.id+"",r)}}(t,e):t instanceof F?function(t,e){var n=t.style,a=n.text;if(null!=a&&(a+=""),a&&!isNaN(n.x)&&!isNaN(n.y)){var i=n.font||U,o=n.x||0,r=H(n.y||0,X(i),n.textBaseline),s={"dominant-baseline":"central","text-anchor":Z[n.textAlign]||n.textAlign};if(j(n)){var l="",u=n.fontStyle,d=q(n.fontSize);if(!parseFloat(d))return;var c=n.fontFamily||K,h=n.fontWeight;l+="font-size:"+d+";font-family:"+c+";",u&&"normal"!==u&&(l+="font-style:"+u+";"),h&&"normal"!==h&&(l+="font-weight:"+h+";"),s.style=l}else s.style="font: "+i;return a.match(/\s/)&&(s["xml:space"]="preserve"),o&&(s.x=o),r&&(s.y=r),Lr(s,t.transform),Ir(s,n,t,e),Mr(s,t),e.animation&&xr(t,s,e),rr("text",t.id+"",s,void 0,a)}}(t,e):void 0}function Rr(t,e,n,a){var i,o=t[n],r={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if($(o))i="linearGradient",r.x1=o.x,r.y1=o.y,r.x2=o.x2,r.y2=o.y2;else{if(!Q(o))return;i="radialGradient",r.cx=x(o.x,.5),r.cy=x(o.y,.5),r.r=x(o.r,.5)}for(var s=o.colorStops,l=[],u=0,d=s.length;u<d;++u){var c=100*J(s[u].offset)+"%",h=s[u].color,p=C(h),g=p.color,f=p.opacity,y={offset:c};y["stop-color"]=g,f<1&&(y["stop-opacity"]=f),l.push(rr("stop",u+"",y))}var v=sr(rr(i,"",r,l)),m=a.gradientCache,_=m[v];_||(_=a.zrId+"-g"+a.gradientIdx++,m[v]=_,r.id=_,a.defs[_]=rr(i,_,r,l)),e[n]=Y(_)}function zr(t,e,n,a){var i,o=t.style[n],r=t.getBoundingRect(),s={},l=o.repeat,u="no-repeat"===l,d="repeat-x"===l,c="repeat-y"===l;if(tt(o)){var h=o.imageWidth,p=o.imageHeight,g=void 0,f=o.image;if(N(f)?g=f:wr(f)?g=f.src:Sr(f)&&(g=f.toDataURL()),"undefined"==typeof Image){var y="Image width/height must been given explictly in svg-ssr renderer.";et(h,y),et(p,y)}else if(null==h||null==p){var v=function(t,e){if(t){var n=t.elm,a=h||e.width,i=p||e.height;"pattern"===t.tag&&(d?(i=1,a/=r.width):c&&(a=1,i/=r.height)),t.attrs.width=a,t.attrs.height=i,n&&(n.setAttribute("width",a),n.setAttribute("height",i))}},m=nt(g,null,t,function(t){u||v(w,t),v(i,t)});m&&m.width&&m.height&&(h=h||m.width,p=p||m.height)}i=rr("image","img",{href:g,width:h,height:p}),s.width=h,s.height=p}else o.svgElement&&(i=at(o.svgElement),s.width=o.svgWidth,s.height=o.svgHeight);if(i){var x,_;u?x=_=1:d?(_=1,x=s.width/r.width):c?(x=1,_=s.height/r.height):s.patternUnits="userSpaceOnUse",null==x||isNaN(x)||(s.width=x),null==_||isNaN(_)||(s.height=_);var b=z(o);b&&(s.patternTransform=b);var w=rr("pattern","",s,[i]),S=sr(w),I=a.patternCache,M=I[S];M||(M=a.zrId+"-p"+a.patternIdx++,I[S]=M,s.id=M,w=a.defs[M]=rr("pattern",M,s,[i])),e[n]=Y(M)}}function Or(t,e,n){var a=n.clipPathCache,i=n.defs,o=a[t.id];if(!o){var r={id:o=n.zrId+"-c"+n.clipPathIdx++};a[t.id]=o,i[o]=rr("clipPath",o,r,[kr(t,n)])}e["clip-path"]=Y(o)}function Vr(t){return document.createTextNode(t)}function Br(t,e,n){t.insertBefore(e,n)}function Gr(t,e){t.removeChild(e)}function Wr(t,e){t.appendChild(e)}function Fr(t){return t.parentNode}function Yr(t){return t.nextSibling}function Ur(t,e){t.textContent=e}var Hr=rr("","");function Xr(t){return void 0===t}function Zr(t){return void 0!==t}function jr(t,e,n){for(var a={},i=e;i<=n;++i){var o=t[i].key;void 0!==o&&(a[o]=i)}return a}function qr(t,e){var n=t.key===e.key;return t.tag===e.tag&&n}function Kr(t){var e,n=t.children,a=t.tag;if(Zr(a)){var i=t.elm=or(a);if(Jr(Hr,t),dt(n))for(e=0;e<n.length;++e){var o=n[e];null!=o&&Wr(i,Kr(o))}else Zr(t.text)&&!ct(t.text)&&Wr(i,Vr(t.text))}else t.elm=Vr(t.text);return t.elm}function $r(t,e,n,a,i){for(;a<=i;++a){var o=n[a];null!=o&&Br(t,Kr(o),e)}}function Qr(t,e,n,a){for(;n<=a;++n){var i=e[n];if(null!=i)if(Zr(i.tag))Gr(Fr(i.elm),i.elm);else Gr(t,i.elm)}}function Jr(t,e){var n,a=e.elm,i=t&&t.attrs||{},o=e.attrs||{};if(i!==o){for(n in o){var r=o[n];i[n]!==r&&(!0===r?a.setAttribute(n,""):!1===r?a.removeAttribute(n):"style"===n?a.style.cssText=r:120!==n.charCodeAt(0)?a.setAttribute(n,r):"xmlns:xlink"===n||"xmlns"===n?a.setAttributeNS("http://www.w3.org/2000/xmlns/",n,r):58===n.charCodeAt(3)?a.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,r):58===n.charCodeAt(5)?a.setAttributeNS(ar,n,r):a.setAttribute(n,r))}for(n in i)n in o||a.removeAttribute(n)}}function ts(t,e){var n=e.elm=t.elm,a=t.children,i=e.children;t!==e&&(Jr(t,e),Xr(e.text)?Zr(a)&&Zr(i)?a!==i&&function(t,e,n){for(var a,i,o,r=0,s=0,l=e.length-1,u=e[0],d=e[l],c=n.length-1,h=n[0],p=n[c];r<=l&&s<=c;)null==u?u=e[++r]:null==d?d=e[--l]:null==h?h=n[++s]:null==p?p=n[--c]:qr(u,h)?(ts(u,h),u=e[++r],h=n[++s]):qr(d,p)?(ts(d,p),d=e[--l],p=n[--c]):qr(u,p)?(ts(u,p),Br(t,u.elm,Yr(d.elm)),u=e[++r],p=n[--c]):qr(d,h)?(ts(d,h),Br(t,d.elm,u.elm),d=e[--l],h=n[++s]):(Xr(a)&&(a=jr(e,r,l)),Xr(i=a[h.key])||(o=e[i]).tag!==h.tag?Br(t,Kr(h),u.elm):(ts(o,h),e[i]=void 0,Br(t,o.elm,u.elm)),h=n[++s]);(r<=l||s<=c)&&(r>l?$r(t,null==n[c+1]?null:n[c+1].elm,n,s,c):Qr(t,e,r,l))}(n,a,i):Zr(i)?(Zr(t.text)&&Ur(n,""),$r(n,null,i,0,i.length-1)):Zr(a)?Qr(n,a,0,a.length-1):Zr(t.text)&&Ur(n,""):t.text!==e.text&&(Zr(a)&&Qr(n,a,0,a.length-1),Ur(n,e.text)))}var es=0,ns=function(){function t(t,e,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=n=R({},n),this.root=t,this._id="zr"+es++,this._oldVNode=ur(n.width,n.height),t&&!n.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=or("svg");Jr(null,this._oldVNode),a.appendChild(i),t.appendChild(a)}this.resize(n.width,n.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(t,e){if(qr(t,e))ts(t,e);else{var n=t.elm,a=Fr(n);Kr(e),null!==a&&(Br(a,e.elm,Yr(n)),Qr(a,[t],0,0))}}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return Er(t,lr(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,a=this._height,i=lr(this._id);i.animation=t.animation,i.willUpdate=t.willUpdate,i.compress=t.compress,i.emphasis=t.emphasis,i.ssr=this._opts.ssr;var r=[],s=this._bgVNode=function(t,e,n,a){var i;if(n&&"none"!==n)if(i=rr("rect","bg",{width:t,height:e,x:"0",y:"0"}),ot(n))Rr({fill:n},i.attrs,"fill",a);else if(rt(n))zr({style:{fill:n},dirty:gt,getBoundingRect:function(){return{width:t,height:e}}},i.attrs,"fill",a);else{var o=C(n),r=o.color,s=o.opacity;i.attrs.fill=r,s<1&&(i.attrs["fill-opacity"]=s)}return i}(n,a,this._backgroundColor,i);s&&r.push(s);var l=t.compress?null:this._mainVNode=rr("g","main",{},[]);this._paintList(e,i,l?l.children:r),l&&r.push(l);var u=A(o(i.defs),function(t){return i.defs[t]});if(u.length&&r.push(rr("defs","defs",{},u)),t.animation){var d=function(t,e,n){var a=(n=n||{}).newline?"\n":"",i=" {"+a,r=a+"}",s=A(o(t),function(e){return e+i+A(o(t[e]),function(n){return n+":"+t[e][n]+";"}).join(a)+r}).join(a),l=A(o(e),function(t){return"@keyframes "+t+i+A(o(e[t]),function(n){return n+i+A(o(e[t][n]),function(a){var i=e[t][n][a];return"d"===a&&(i='path("'+i+'")'),a+":"+i+";"}).join(a)+r}).join(a)+r}).join(a);return s||l?["<![CDATA[",s,l,"]]>"].join(a):""}(i.cssNodes,i.cssAnims,{newline:!0});if(d){var c=rr("style","stl",{},[],d);r.push(c)}}return ur(n,a,r,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},sr(this.renderToVNode({animation:x(t.cssAnimation,!0),emphasis:x(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:x(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,e,n){for(var a,i,o=t.length,r=[],s=0,l=0,u=0;u<o;u++){var d=t[u];if(!d.invisible){var c=d.__clipPaths,h=c&&c.length||0,p=i&&i.length||0,g=void 0;for(g=Math.max(h-1,p-1);g>=0&&(!c||!i||c[g]!==i[g]);g--);for(var f=p-1;f>g;f--)a=r[--s-1];for(var y=g+1;y<h;y++){var v={};Or(c[y],v,e);var m=rr("g","clip-g-"+l++,v,[]);(a?a.children:n).push(m),r[s++]=m,a=m}i=c;var x=Er(d,e);x&&(a?a.children:n).push(x)}}},t.prototype.resize=function(t,e){var n=this._opts,a=this.root,i=this._viewport;if(null!=t&&(n.width=t),null!=e&&(n.height=e),a&&i&&(i.style.display="none",t=ht(a,0,n),e=ht(a,1,n),i.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,i){var o=i.style;o.width=t+"px",o.height=e+"px"}if(rt(this._backgroundColor))this.refresh();else{var r=this._svgDom;r&&(r.setAttribute("width",t),r.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",t),s.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=pt(e))&&n+"base64,"+e:n+"charset=UTF-8,"+encodeURIComponent(e)},t}();function as(t,e){var n=t.isExpand?t.children:[],a=t.parentNode.children,i=t.hierNode.i?a[t.hierNode.i-1]:null;if(n.length){!function(t){var e=t.children,n=e.length,a=0,i=0;for(;--n>=0;){var o=e[n];o.hierNode.prelim+=a,o.hierNode.modifier+=a,i+=o.hierNode.change,a+=o.hierNode.shift+i}}(t);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(t.hierNode.prelim=i.hierNode.prelim+e(t,i),t.hierNode.modifier=t.hierNode.prelim-o):t.hierNode.prelim=o}else i&&(t.hierNode.prelim=i.hierNode.prelim+e(t,i));t.parentNode.hierNode.defaultAncestor=function(t,e,n,a){if(e){for(var i=t,o=t,r=o.parentNode.children[0],s=e,l=i.hierNode.modifier,u=o.hierNode.modifier,d=r.hierNode.modifier,c=s.hierNode.modifier;s=ss(s),o=ls(o),s&&o;){i=ss(i),r=ls(r),i.hierNode.ancestor=t;var h=s.hierNode.prelim+c-o.hierNode.prelim-u+a(s,o);h>0&&(ds(us(s,t,n),t,h),u+=h,l+=h),c+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,d+=r.hierNode.modifier}s&&!ss(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=c-l),o&&!ls(r)&&(r.hierNode.thread=o,r.hierNode.modifier+=u-d,n=t)}return n}(t,i,t.parentNode.hierNode.defaultAncestor||a[0],e)}function is(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function os(t){return arguments.length?t:cs}function rs(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function ss(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function ls(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function us(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function ds(t,e,n){var a=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=a,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=a}function cs(t,e){return t.parentNode===e.parentNode?1:2}var hs=function(){return function(){this.parentPoint=[],this.childPoints=[]}}(),ps=function(t){function e(e){return t.call(this,e)||this}return ft(e,t),e.prototype.getDefaultStyle=function(){return{stroke:wt.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new hs},e.prototype.buildPath=function(t,e){var n=e.childPoints,a=n.length,i=e.parentPoint,o=n[0],r=n[a-1];if(1===a)return t.moveTo(i[0],i[1]),void t.lineTo(o[0],o[1]);var l=e.orient,u="TB"===l||"BT"===l?0:1,d=1-u,c=s(e.forkPosition,1),h=[];h[u]=i[u],h[d]=i[d]+(r[d]-i[d])*c,t.moveTo(i[0],i[1]),t.lineTo(h[0],h[1]),t.moveTo(o[0],o[1]),h[u]=o[u],t.lineTo(h[0],h[1]),h[u]=r[u],t.lineTo(h[0],h[1]),t.lineTo(r[0],r[1]);for(var p=1;p<a-1;p++){var g=n[p];t.moveTo(g[0],g[1]),h[u]=g[u],t.lineTo(h[0],h[1])}},e}(W),gs=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new yt,n}return ft(e,t),e.prototype.init=function(t,e){this._controller=new vt(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var a=t.getData(),i=t.layoutInfo,o=this._mainGroup;"radial"===t.get("layout")?(o.x=i.x+i.width/2,o.y=i.y+i.height/2):(o.x=i.x,o.y=i.y),this._updateViewCoordSys(t,n),this._updateController(t,null,e,n);var r=this._data;a.diff(r).add(function(e){fs(a,e)&&ys(a,e,null,o,t)}).update(function(e,n){var i=r.getItemGraphicEl(n);fs(a,e)?ys(a,e,i,o,t):i&&xs(r,n,i,o,t)}).remove(function(e){var n=r.getItemGraphicEl(e);n&&xs(r,e,n,o,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&a.eachItemGraphicEl(function(e,a){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:a})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,e){var n=t.getData(),a=[];n.each(function(t){var e=n.getItemLayout(t);!e||isNaN(e.x)||isNaN(e.y)||a.push([+e.x,+e.y])});var i=[],o=[];mt(a,i,o);var r=this._min,s=this._max;o[0]-i[0]===0&&(i[0]=r?r[0]:i[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-i[1]===0&&(i[1]=r?r[1]:i[1]-1,o[1]=s?s[1]:o[1]+1);var l=t.coordinateSystem=new xt(null,{api:e,ecModel:t.ecModel});l.zoomLimit=t.get("scaleLimit"),l.setBoundingRect(i[0],i[1],o[0]-i[0],o[1]-i[1]),l.setCenter(t.get("center")),l.setZoom(t.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=i,this._max=o},e.prototype._updateController=function(t,e,n,a){var i=this;_t(t,a,this.group,this._controller,this._controllerHost,e),this._controller.on("zoom",function(e){i._updateNodeAndLinkScale(t)})},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),n=this._getNodeGlobalScale(t);e.eachItemGraphicEl(function(t,e){t.setSymbolScale(n)})},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,a=e.scaleX||1;return((e.getZoom()-1)*n+1)/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(bt);function fs(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function ys(t,e,n,a,i){var o=!n,s=t.tree.getNodeByDataIndex(e),l=s.getModel(),u=s.getVisual("style").fill,d=!1===s.isExpand&&0!==s.children.length?u:wt.color.neutral00,c=t.tree.root,h=s.parentNode===c?s:s.parentNode||s,p=t.getItemGraphicEl(h.dataIndex),g=h.getLayout(),f=p?{x:p.__oldX,y:p.__oldY,rawX:p.__radialOldRawX,rawY:p.__radialOldRawY}:g,y=s.getLayout();o?((n=new St(t,e,null,{symbolInnerColor:d,useNameLabel:!0})).x=f.x,n.y=f.y):n.updateData(t,e,null,{symbolInnerColor:d,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=y.rawX,n.__radialRawY=y.rawY,a.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,w(n,{x:y.x,y:y.y},i);var v=n.getSymbolPath();if("radial"===i.get("layout")){var m=c.children[0],x=m.getLayout(),_=m.children.length,b=void 0,S=void 0;if(y.x===x.x&&!0===s.isExpand&&m.children.length){var I={x:(m.children[0].getLayout().x+m.children[_-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[_-1].getLayout().y)/2};(b=Math.atan2(I.y-x.y,I.x-x.x))<0&&(b=2*Math.PI+b),(S=I.x<x.x)&&(b-=Math.PI)}else(b=Math.atan2(y.y-x.y,y.x-x.x))<0&&(b=2*Math.PI+b),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(S=y.x<x.x)&&(b-=Math.PI):(S=y.x>x.x)||(b-=Math.PI);var M=S?"left":"right",C=l.getModel("label"),L=C.get("rotate"),T=L*(Math.PI/180),A=v.getTextContent();A&&(v.setTextConfig({position:C.get("position")||M,rotation:null==L?-b:T,origin:"center"}),A.setStyle("verticalAlign","middle"))}var D=l.get(["emphasis","focus"]),P="relative"===D?It(s.getAncestorsIndices(),s.getDescendantIndices()):"ancestor"===D?s.getAncestorsIndices():"descendant"===D?s.getDescendantIndices():null;P&&(r(n).focus=P),function(t,e,n,a,i,o,r,s){var l=e.getModel(),u=t.get("edgeShape"),d=t.get("layout"),c=t.getOrient(),h=t.get(["lineStyle","curveness"]),p=t.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),f=a.__edge;if("curve"===u)e.parentNode&&e.parentNode!==n&&(f||(f=a.__edge=new Tt({shape:_s(d,c,h,i,i)})),w(f,{shape:_s(d,c,h,o,r)},t));else if("polyline"===u&&"orthogonal"===d&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var y=e.children,v=[],m=0;m<y.length;m++){var x=y[m].getLayout();v.push([x.x,x.y])}f||(f=a.__edge=new ps({shape:{parentPoint:[r.x,r.y],childPoints:[[r.x,r.y]],orient:c,forkPosition:p}})),w(f,{shape:{parentPoint:[r.x,r.y],childPoints:v}},t)}f&&("polyline"!==u||e.isExpand)&&(f.useStyle(At({strokeNoScale:!0,fill:null},g)),Dt(f,l,"lineStyle"),Pt(f),s.add(f))}(i,s,c,n,f,g,y,a),n.__edge&&(n.onHoverStateChange=function(e){if("blur"!==e){var a=s.parentNode&&t.getItemGraphicEl(s.parentNode.dataIndex);a&&a.hoverState===Mt||Ct(n.__edge,e)}})}function vs(t,e,n,a,i){var o=ms(e.tree.root,t),r=o.source,s=o.sourceLayout,l=e.getItemGraphicEl(t.dataIndex);if(l){var u=e.getItemGraphicEl(r.dataIndex).__edge,d=l.__edge||(!1===r.isExpand||1===r.children.length?u:void 0),c=a.get("edgeShape"),h=a.get("layout"),p=a.get("orient"),g=a.get(["lineStyle","curveness"]);d&&("curve"===c?Lt(d,{shape:_s(h,p,g,s,s),style:{opacity:0}},a,{cb:function(){n.remove(d)},removeOpt:i}):"polyline"===c&&"orthogonal"===a.get("layout")&&Lt(d,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},a,{cb:function(){n.remove(d)},removeOpt:i}))}}function ms(t,e){for(var n,a=e.parentNode===t?e:e.parentNode||e;null==(n=a.getLayout());)a=a.parentNode===t?a:a.parentNode||a;return{source:a,sourceLayout:n}}function xs(t,e,n,a,i){var o=t.tree.getNodeByDataIndex(e),r=ms(t.tree.root,o).sourceLayout,s={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Lt(n,{x:r.x+1,y:r.y+1},i,{cb:function(){a.remove(n),t.setItemGraphicEl(e,null)},removeOpt:s}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:s}),o.children.forEach(function(e){vs(e,t,a,i,s)}),vs(o,t,a,i,s)}function _s(t,e,n,a,i){var o,r,s,l,u,d,c,h;if("radial"===t){u=a.rawX,c=a.rawY,d=i.rawX,h=i.rawY;var p=rs(u,c),g=rs(u,c+(h-c)*n),f=rs(d,h+(c-h)*n),y=rs(d,h);return{x1:p.x||0,y1:p.y||0,x2:y.x||0,y2:y.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:f.x||0,cpy2:f.y||0}}return u=a.x,c=a.y,d=i.x,h=i.y,"LR"!==e&&"RL"!==e||(o=u+(d-u)*n,r=c,s=d+(u-d)*n,l=h),"TB"!==e&&"BT"!==e||(o=u,r=c+(h-c)*n,s=d,l=h+(c-h)*n),{x1:u,y1:c,x2:d,y2:h,cpx1:o,cpy1:r,cpx2:s,cpy2:l}}var bs=t();function ws(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,Ts(e,n,t),l(n,function(n){l(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,Nt(Ss,t))})}),e.wrapMethod("cloneShallow",Nt(Ms,t)),l(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,Nt(Is,t))}),et(n[e.dataType]===e)}function Ss(t,e){if(bs(a=this).mainData===a){var n=R({},bs(this).datas);n[this.dataType]=e,Ts(e,n,t)}else As(e,this.dataType,bs(this).mainData,t);var a;return e}function Is(t,e){return t.struct&&t.struct.update(),e}function Ms(t,e){return l(bs(e).datas,function(n,a){n!==e&&As(n.cloneShallow(),a,e,t)}),e}function Cs(t){var e=bs(this).mainData;return null==t||null==e?e:bs(e).datas[t]}function Ls(){var t=bs(this).mainData;return null==t?[{data:t}]:A(o(bs(t).datas),function(e){return{type:e,data:bs(t).datas[e]}})}function Ts(t,e,n){bs(t).datas={},l(e,function(e,a){As(e,a,t,n)})}function As(t,e,n,a){bs(n).datas[e]=t,bs(t).mainData=n,t.dataType=e,a.struct&&(t[a.structAttr]=a.struct,a.struct[a.datasAttr[e]]=t),t.getLinkedData=Cs,t.getLinkedDataAll=Ls}var Ds=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){i(t)&&(n=e,e=t,t=null),N(t=t||{})&&(t={order:t});var a,o=t.order||"preorder",r=this[t.attr||"children"];"preorder"===o&&(a=e.call(n,this));for(var s=0;!a&&s<r.length;s++)r[s].eachNode(t,e,n);"postorder"===o&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var a=this.children[n];a.updateDepthAndHeight(t+1),a.height>e&&(e=a.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,a=n.length;e<a;e++){var i=n[e].getNodeById(t);if(i)return i}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,a=n.length;e<a;e++){var i=n[e].contains(t);if(i)return i}},t.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),Ps=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,a=e.length;n<a;n++)e[n].dataIndex=-1;for(n=0,a=t.count();n<a;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,a){var i=new t(n),o=[],r=1;!function t(e,n){var a=e.value;r=Math.max(r,dt(a)?a.length:1),o.push(e);var s=new Ds(kt(e.name,""),i);n?function(t,e){var n=e.children;if(t.parentNode===e)return;n.push(t),t.parentNode=e}(s,n):i.root=s,i._nodes.push(s);var l=e.children;if(l)for(var u=0;u<l.length;u++)t(l[u],s)}(e),i.root.updateDepthAndHeight(0);var s=Et(o,{coordDimensions:["value"],dimensionsCount:r}).dimensions,l=new Rt(s,n);return l.initData(o),a&&a(l),ws({mainData:l,struct:i,structAttr:"tree"}),i.update(),i},t}();function Ns(t,e,n){if(t&&b(e,t.type)>=0){var a=n.getData().tree.root,i=t.targetNode;if(N(i)&&(i=a.getNodeById(i)),i&&a.contains(i))return{node:i};var o=t.targetNodeId;if(null!=o&&(i=a.getNodeById(o)))return{node:i}}}function ks(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function Es(t,e){var n=ks(t);return b(n,e)>=0}function Rs(t,e){for(var n=[];t;){var a=t.dataIndex;n.push({name:t.name,dataIndex:a,value:e.getRawValue(a)}),t=t.parentNode}return n.reverse(),n}var zs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return ft(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},n=t.leaves||{},a=new zt(n,this,this.ecModel),i=Ps.createTree(e,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=i.getNodeByDataIndex(e);return n&&n.children.length&&n.isExpand||(t.parentModel=a),t})});var o=0;i.eachNode("preorder",function(t){t.depth>o&&(o=t.depth)});var r=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:o;return i.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=r}),i.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,n){for(var a=this.getData().tree,i=a.root.children[0],o=a.getNodeByDataIndex(t),r=o.getValue(),s=o.name;o&&o!==i;)s=o.parentNode.name+"."+s,o=o.parentNode;return Ot("nameValue",{name:s,value:r,noValue:isNaN(r)||null==r})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Rs(a,this),n.collapsed=!a.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:wt.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Vt);function Os(t,e){for(var n,a=[t];n=a.pop();)if(e(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)a.push(i[o])}}function Vs(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var n=Bt(t,e).refContainer,a=Gt(t.getBoxLayoutParams(),n);t.layoutInfo=a;var i=t.get("layout"),o=0,r=0,s=null;"radial"===i?(o=2*Math.PI,r=Math.min(a.height,a.width)/2,s=os(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(o=a.width,r=a.height,s=os());var l=t.getData().tree.root,u=l.children[0];if(u){!function(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n,a,i=[e];n=i.pop();)if(a=n.children,n.isExpand&&a.length)for(var o=a.length-1;o>=0;o--){var r=a[o];r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},i.push(r)}}(l),function(t,e,n){for(var a,i=[t],o=[];a=i.pop();)if(o.push(a),a.isExpand){var r=a.children;if(r.length)for(var s=0;s<r.length;s++)i.push(r[s])}for(;a=o.pop();)e(a,n)}(u,as,s),l.hierNode.modifier=-u.hierNode.prelim,Os(u,is);var d=u,c=u,h=u;Os(u,function(t){var e=t.getLayout().x;e<d.getLayout().x&&(d=t),e>c.getLayout().x&&(c=t),t.depth>h.depth&&(h=t)});var p=d===c?1:s(d,c)/2,g=p-d.getLayout().x,f=0,y=0,v=0,m=0;if("radial"===i)f=o/(c.getLayout().x+p+g),y=r/(h.depth-1||1),Os(u,function(t){v=(t.getLayout().x+g)*f,m=(t.depth-1)*y;var e=rs(v,m);t.setLayout({x:e.x,y:e.y,rawX:v,rawY:m},!0)});else{var x=t.getOrient();"RL"===x||"LR"===x?(y=r/(c.getLayout().x+p+g),f=o/(h.depth-1||1),Os(u,function(t){m=(t.getLayout().x+g)*y,v="LR"===x?(t.depth-1)*f:o-(t.depth-1)*f,t.setLayout({x:v,y:m},!0)})):"TB"!==x&&"BT"!==x||(f=o/(c.getLayout().x+p+g),y=r/(h.depth-1||1),Os(u,function(t){v=(t.getLayout().x+g)*f,m="TB"===x?(t.depth-1)*y:r-(t.depth-1)*y,t.setLayout({x:v,y:m},!0)}))}}}(t,e)})}function Bs(t){t.eachSeriesByType("tree",function(t){var e=t.getData();e.tree.eachNode(function(t){var n=t.getModel().getModel("itemStyle").getItemStyle(),a=e.ensureUniqueItemVisual(t.dataIndex,"style");R(a,n)})})}var Gs=["treemapZoomToNode","treemapRender","treemapMove"];function Ws(t){var e=t.getData().tree,n={};e.eachNode(function(e){for(var a=e;a&&a.depth>1;)a=a.parentNode;var i=Ft(t.ecModel,a.name||a.dataIndex+"",n);e.setVisual("decal",i)})}var Fs=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return ft(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};Ys(n);var a=t.levels||[],i=this.designatedVisualItemStyle={},o=new zt({itemStyle:i},this,e);a=t.levels=function(t,e){var n,a,i=Ut(e.get("color")),o=Ut(e.get(["aria","decal","decals"]));if(!i)return;t=t||[],l(t,function(t){var e=new zt(t),i=e.get("color"),o=e.get("decal");(e.get(["itemStyle","color"])||i&&"none"!==i)&&(n=!0),(e.get(["itemStyle","decal"])||o&&"none"!==o)&&(a=!0)});var r=t[0]||(t[0]={});n||(r.color=i.slice());!a&&o&&(r.decal=o.slice());return t}(a,e);var r=A(a||[],function(t){return new zt(t,o,e)},this),s=Ps.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=s.getNodeByDataIndex(e),a=n?r[n.depth]:null;return t.parentModel=a||o,t})});return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,n){var a=this.getData(),i=this.getRawValue(t),o=a.getName(t);return Ot("nameValue",{name:o,value:i})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=Rs(a,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},R(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=Yt(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){Ws(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,coordinateSystemUsage:"box",left:wt.size.l,top:wt.size.xxxl,right:wt.size.l,bottom:wt.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"â–¶",zoomToNodeRatio:.1024,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:wt.size.m,emptyItemWidth:25,itemStyle:{color:wt.color.backgroundShade,textStyle:{color:wt.color.secondary}},emphasis:{itemStyle:{color:wt.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:wt.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:wt.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Vt);function Ys(t){var e=0;l(t.children,function(t){Ys(t);var n=t.value;dt(n)&&(n=n[0]),e+=n});var n=t.value;dt(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),dt(t.value)?t.value[0]=n:t.value=n}var Us=function(){function t(t){this.group=new yt,t.add(this.group)}return t.prototype.render=function(t,e,n,a){var i=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),i.get("show")&&n){var r=i.getModel("itemStyle"),s=i.getModel("emphasis"),l=r.getModel("textStyle"),u=s.getModel(["itemStyle","textStyle"]),d=Bt(t,e).refContainer,c={left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},h={emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]},p=Gt(c,d);this._prepare(n,h,l),this._renderContent(t,h,p,r,s,l,u,a),Ht(o,c,d)}},t.prototype._prepare=function(t,e,n){for(var a=t;a;a=a.parentNode){var i=kt(a.getModel().get("name"),""),o=n.getTextRect(i),r=Math.max(o.width+16,e.emptyItemWidth);e.totalWidth+=r+8,e.renderList.push({node:a,text:i,width:r})}},t.prototype._renderContent=function(t,e,n,a,i,o,r,s){for(var l=0,u=e.emptyItemWidth,d=t.get(["breadcrumb","height"]),c=e.totalWidth,h=e.renderList,p=i.getModel("itemStyle").getItemStyle(),g=h.length-1;g>=0;g--){var f=h[g],y=f.node,v=f.width,m=f.text;c>n.width&&(c-=v-u,v=u,m=null);var x=new Xt({shape:{points:Hs(l,0,v,d,g===h.length-1,0===g)},style:At(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new Zt({style:qt(o,{text:m})}),textConfig:{position:"inside"},z2:1e4*jt,onclick:Nt(s,y)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=qt(r,{text:m}),x.ensureState("emphasis").style=p,Kt(x,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(x),Xs(x,t,y),l+=v+8}},t.prototype.remove=function(){this.group.removeAll()},t}();function Hs(t,e,n,a,i,o){var r=[[i?t:t-5,e],[t+n,e],[t+n,e+a],[i?t:t-5,e+a]];return!o&&r.splice(2,0,[t+n+5,e+a/2]),!i&&r.push([t,e+a/2]),r}function Xs(t,e,n){r(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&Rs(n,e)}}var Zs=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,n,a,i){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:a,easing:i}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},a=0,i=this._storage.length;a<i;a++){var o=this._storage[a];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},t}();var js=yt,qs=ce,Ks="label",$s="upperLabel",Qs=10*jt,Js=2*jt,tl=3*jt,el=re([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),nl=function(t){var e=el(t);return e.stroke=e.fill=e.lineWidth=null,e},al=t(),il=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return ft(n,t),n.prototype.render=function(t,e,n,a){var i=e.findComponents({mainType:"series",subType:"treemap",query:a});if(!(b(i,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var o=Ns(a,["treemapZoomToNode","treemapRootToNode"],t),r=a&&a.type,s=t.layoutInfo,l=!this._oldTree,u=this._storage,d="treemapRootToNode"===r&&o&&u?{rootNodeGroup:u.nodeGroup[o.node.getRawIndex()],direction:a.direction}:null,c=this._giveContainerGroup(s),h=t.get("animation"),p=this._doRender(c,t,d);!h||l||r&&"treemapZoomToNode"!==r&&"treemapRootToNode"!==r?p.renderFinally():this._doAnimation(c,p,t,d),this._resetController(n),this._renderBreadcrumb(t,n,o)}},n.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new js,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},n.prototype._doRender=function(t,e,n){var a=e.getData().tree,i=this._oldTree,o={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},u=this._storage,d=[];function c(t,a,i,l){return function(t,e,n,a,i,o,s,l,u,d){if(!s)return;var c=s.getLayout(),h=t.getData(),p=s.getModel();if(h.setItemGraphicEl(s.dataIndex,null),!c||!c.isInView)return;var g=c.width,f=c.height,y=c.borderWidth,v=c.invisible,m=s.getRawIndex(),x=l&&l.getRawIndex(),_=s.viewChildren,b=c.upperHeight,w=_&&_.length,S=p.getModel("itemStyle"),I=p.getModel(["emphasis","itemStyle"]),M=p.getModel(["blur","itemStyle"]),C=p.getModel(["select","itemStyle"]),L=S.get("borderRadius")||0,T=Y("nodeGroup",js);if(!T)return;if(u.add(T),T.x=c.x||0,T.y=c.y||0,T.markRedraw(),al(T).nodeWidth=g,al(T).nodeHeight=f,c.isAboveViewRoot)return T;var A=Y("background",qs,d,Js);A&&V(T,A,w&&c.upperLabelHeight);var D=p.getModel("emphasis"),P=D.get("focus"),N=D.get("blurScope"),k=D.get("disabled"),E="ancestor"===P?s.getAncestorsIndices():"descendant"===P?s.getDescendantIndices():P;if(w)ae(T)&&ie(T,!1),A&&(ie(A,!k),h.setItemGraphicEl(s.dataIndex,A),oe(A,E,N));else{var z=Y("content",qs,d,tl);z&&B(T,z),A.disableMorphing=!0,A&&ae(A)&&ie(A,!1),ie(T,!k),h.setItemGraphicEl(s.dataIndex,T);var O=p.getShallow("cursor");O&&z.attr("cursor",O),oe(T,E,N)}return T;function V(e,n,a){var i=r(n);if(i.dataIndex=s.dataIndex,i.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:g,height:f,r:L}),v)G(n);else{n.invisible=!1;var o=s.getVisual("style"),l=o.stroke,u=nl(S);u.fill=l;var d=el(I);d.fill=I.get("borderColor");var c=el(M);c.fill=M.get("borderColor");var h=el(C);if(h.fill=C.get("borderColor"),a){var p=g-2*y;W(n,l,o.opacity,{x:y,y:0,width:p,height:b})}else n.removeTextContent();n.setStyle(u),n.ensureState("emphasis").style=d,n.ensureState("blur").style=c,n.ensureState("select").style=h,Pt(n)}e.add(n)}function B(e,n){var a=r(n);a.dataIndex=s.dataIndex,a.seriesIndex=t.seriesIndex;var i=Math.max(g-2*y,0),o=Math.max(f-2*y,0);if(n.culling=!0,n.setShape({x:y,y:y,width:i,height:o,r:L}),v)G(n);else{n.invisible=!1;var l=s.getVisual("style"),u=l.fill,d=nl(S);d.fill=u,d.decal=l.decal;var c=el(I),h=el(M),p=el(C);W(n,u,l.opacity,null),n.setStyle(d),n.ensureState("emphasis").style=c,n.ensureState("blur").style=h,n.ensureState("select").style=p,Pt(n)}e.add(n)}function G(t){!t.invisible&&o.push(t)}function W(e,n,a,i){var o=p.getModel(i?$s:Ks),r=kt(p.get("name"),null),l=o.getShallow("show");se(e,le(p,i?$s:Ks),{defaultText:l?r:null,inheritColor:n,defaultOpacity:a,labelFetcher:t,labelDataIndex:s.dataIndex});var u=e.getTextContent();if(u){var d=u.style,h=ue(d.padding||0);i&&(e.setTextConfig({layoutRect:i}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var t=Math.max((i?i.width:e.shape.width)-h[1]-h[3],0),n=Math.max((i?i.height:e.shape.height)-h[0]-h[2],0);d.width===t&&d.height===n||u.setStyle({width:t,height:n})},d.truncateMinChar=2,d.lineOverflow="truncate",F(d,i,c);var g=u.getState("emphasis");F(g?g.style:null,i,c)}}function F(e,n,a){var i=e?e.text:null;if(!n&&a.isLeafRoot&&null!=i){var o=t.get("drillDownIcon",!0);e.text=o?o+" "+i:i}}function Y(t,a,o,r){var s=null!=x&&n[t][x],l=i[t];return s?(n[t][x]=null,U(l,s)):v||((s=new a)instanceof de&&(s.z2=function(t,e){return t*Qs+e}(o,r)),H(l,s)),e[t][m]=s}function U(t,e){var n=t[m]={};e instanceof js?(n.oldX=e.x,n.oldY=e.y):n.oldShape=R({},e.shape)}function H(t,e){var n=t[m]={},o=s.parentNode,r=e instanceof yt;if(o&&(!a||"drillDown"===a.direction)){var l=0,u=0,d=i.background[o.getRawIndex()];!a&&d&&d.oldShape&&(l=d.oldShape.width,u=d.oldShape.height),r?(n.oldX=0,n.oldY=u):n.oldShape={x:l,y:u,width:0,height:0}}n.fadein=!r}}(e,s,u,n,o,d,t,a,i,l)}!function t(e,n,a,i,o){i?(n=e,l(e,function(t,e){!t.isRemoved()&&s(e,e)})):new $t(n,e,r,r).add(s).update(s).remove(Nt(s,null)).execute();function r(t){return t.getId()}function s(r,s){var l=null!=r?e[r]:null,u=null!=s?n[s]:null,d=c(l,u,a,o);d&&t(l&&l.viewChildren||[],u&&u.viewChildren||[],d,i,o+1)}}(a.root?[a.root]:[],i&&i.root?[i.root]:[],t,a===i||!i,0);var h,p,g=(p={nodeGroup:[],background:[],content:[]},(h=u)&&l(h,function(t,e){var n=p[e];l(t,function(t){t&&(n.push(t),al(t).willDelete=!0)})}),p);if(this._oldTree=a,this._storage=s,this._controllerHost){var f=this.seriesModel.layoutInfo,y=a.root.getLayout();y.width===f.width&&y.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:g,renderFinally:function(){l(g,function(t){l(t,function(t){t.parent&&t.parent.remove(t)})}),l(d,function(t){t.invisible=!0,t.dirty()})}}},n.prototype._doAnimation=function(t,e,n,a){var o=n.get("animationDurationUpdate"),r=n.get("animationEasing"),s=(i(o)?0:o)||0,u=(i(r)?null:r)||"cubicOut",d=new Zs;l(e.willDeleteEls,function(t,e){l(t,function(t,n){if(!t.invisible){var i,o=t.parent,r=al(o);if(a&&"drillDown"===a.direction)i=o===a.rootNodeGroup?{shape:{x:0,y:0,width:r.nodeWidth,height:r.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var l=0,c=0;r.willDelete||(l=r.nodeWidth/2,c=r.nodeHeight/2),i="nodeGroup"===e?{x:l,y:c,style:{opacity:0}}:{shape:{x:l,y:c,width:0,height:0},style:{opacity:0}}}i&&d.add(t,i,s,0,u)}})}),l(this._storage,function(t,n){l(t,function(t,a){var i=e.lastsForAnimation[n][a],o={};i&&(t instanceof yt?null!=i.oldX&&(o.x=t.x,o.y=t.y,t.x=i.oldX,t.y=i.oldY):(i.oldShape&&(o.shape=R({},t.shape),t.setShape(i.oldShape)),i.fadein?(t.setStyle("opacity",0),o.style={opacity:1}):1!==t.style.opacity&&(o.style={opacity:1})),d.add(t,o,s,0,u))})},this),this._state="animating",d.finished(Qt(function(){this._state="ready",e.renderFinally()},this)).start()},n.prototype._resetController=function(t){var e=this,n=this._controller,a=this._controllerHost;a||(this._controllerHost={target:this.group},a=this._controllerHost);var i=this.seriesModel;n||((n=this._controller=new vt(t.getZr())).on("pan",Qt(this._onPan,this)),n.on("zoom",Qt(this._onZoom,this))),n.enable(i.get("roam"),{api:t,zInfo:{component:i},triggerInfo:{roamTrigger:i.get("roamTrigger"),isInSelf:function(t,n,a){var i=e._containerGroup;return!!i&&i.getBoundingRect().contain(n-i.x,a-i.y)}}}),a.zoomLimit=i.get("scaleLimit"),a.zoom=i.get("zoom")},n.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},n.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},n.prototype._onZoom=function(t){var n=t.originX,a=t.originY,i=t.scale;if("animating"!==this._state){var o=this.seriesModel.getData().tree.root;if(!o)return;var r=o.getLayout();if(!r)return;var s,l=new e(r.x,r.y,r.width,r.height),u=this._controllerHost;s=u.zoomLimit;var d=u.zoom=u.zoom||1;if(d*=i,s){var c=s.min||0,h=s.max||1/0;d=Math.max(Math.min(h,d),c)}var p=d/u.zoom;u.zoom=d;var g=this.seriesModel.layoutInfo;n-=g.x,a-=g.y;var f=te();Jt(f,f,[-n,-a]),ee(f,f,[p,p]),Jt(f,f,[n,a]),l.applyTransform(f),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},n.prototype._initEvents=function(t){var e=this;t.on("click",function(t){if("ready"===e._state){var n=e.seriesModel.get("nodeClick",!0);if(n){var a=e.findTarget(t.offsetX,t.offsetY);if(a){var i=a.node;if(i.getLayout().isLeafRoot)e._rootToNode(a);else if("zoomToNode"===n)e._zoomToNode(a);else if("link"===n){var o=i.hostTree.data.getItemModel(i.dataIndex),r=o.get("link",!0),s=o.get("target",!0)||"blank";r&&ne(r,s)}}}}},this)},n.prototype._renderBreadcrumb=function(t,e,n){var a=this;n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(n={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Us(this.group))).render(t,e,n.node,function(e){"animating"!==a._state&&(Es(t.getViewRoot(),e)?a._rootToNode({node:e}):a._zoomToNode({node:e}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},n.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},n.prototype.findTarget=function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(a){var i=this._storage.background[a.getRawIndex()];if(i){var o=i.transformCoordToLocal(t,e),r=i.shape;if(!(r.x<=o[0]&&o[0]<=r.x+r.width&&r.y<=o[1]&&o[1]<=r.y+r.height))return!1;n={node:a,offsetX:o[0],offsetY:o[1]}}},this),n},n.type="treemap",n}(bt);var ol=t();const rl={seriesType:"treemap",reset:function(t){var e=t.getData().tree.root;e.isRemoved()||sl(e,{},t.getViewRoot().getAncestors(),t)}};function sl(t,e,n,a){var i=t.getModel(),o=t.getLayout(),r=t.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,u=i.getModel("itemStyle"),d=function(t,e,n){var a=R({},e),i=n.designatedVisualItemStyle;return l(["color","colorAlpha","colorSaturation"],function(n){i[n]=e[n];var o=t.get(n);i[n]=null,null!=o&&(a[n]=o)}),a}(u,e,a),c=r.ensureUniqueItemVisual(t.dataIndex,"style"),h=u.get("borderColor"),p=u.get("borderColorSaturation");null!=p&&(h=function(t,e){return null!=e?he(e,null,null,t):null}(p,s=ll(d))),c.stroke=h;var g=t.viewChildren;if(g&&g.length){var f=function(t,e,n,a,i,o){if(!o||!o.length)return;var r=dl(e,"color")||null!=i.color&&"none"!==i.color&&(dl(e,"colorAlpha")||dl(e,"colorSaturation"));if(!r)return;var s=e.get("visualMin"),l=e.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var d=e.get("colorMappingBy"),c={type:r.name,dataExtent:u,visual:r.range};"color"!==c.type||"index"!==d&&"id"!==d?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var h=new ge(c);return ol(h).drColorMappingBy=d,h}(0,i,o,0,d,g);l(g,function(t,e){if(t.depth>=n.length||t===n[t.depth]){var o=function(t,e,n,a,i,o){var r=R({},e);if(i){var s=i.type,l="color"===s&&ol(i).drColorMappingBy,u="index"===l?a:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));r[s]=i.mapValueToVisual(u)}return r}(i,d,t,e,f,a);sl(t,o,n,a)}})}else s=ll(d),c.fill=s}}function ll(t){var e=ul(t,"color");if(e){var n=ul(t,"colorAlpha"),a=ul(t,"colorSaturation");return a&&(e=he(e,null,null,a)),n&&(e=pe(e,n)),e}}function ul(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function dl(t,e){var n=t.get(e);return dt(n)&&n.length?{name:e,range:n}:null}var cl=Math.max,hl=Math.min,pl=fe,gl=l,fl=["itemStyle","borderWidth"],yl=["itemStyle","gapWidth"],vl=["upperLabel","show"],ml=["upperLabel","height"];const xl={seriesType:"treemap",reset:function(t,n,a,i){var o=t.option,r=Bt(t,a).refContainer,l=Gt(t.getBoxLayoutParams(),r),u=o.size||[],d=s(pl(l.width,u[0]),r.width),c=s(pl(l.height,u[1]),r.height),h=i&&i.type,p=Ns(i,["treemapZoomToNode","treemapRootToNode"],t),g="treemapRender"===h||"treemapMove"===h?i.rootRect:null,f=t.getViewRoot(),y=ks(f);if("treemapMove"!==h){var v="treemapZoomToNode"===h?function(t,e,n,a,i){var o,r=(e||{}).node,s=[a,i];if(!r||r===n)return s;var l=a*i,u=l*t.option.zoomToNodeRatio;for(;o=r.parentNode;){for(var d=0,c=o.children,h=0,p=c.length;h<p;h++)d+=c[h].getValue();var g=r.getValue();if(0===g)return s;u*=d/g;var f=o.getModel(),y=f.get(fl);(u+=4*y*y+(3*y+Math.max(y,Il(f)))*Math.pow(u,.5))>ye&&(u=ye),r=o}u<l&&(u=l);var v=Math.pow(u/l,.5);return[a*v,i*v]}(t,p,f,d,c):g?[g.width,g.height]:[d,c],m=o.sort;m&&"asc"!==m&&"desc"!==m&&(m="desc");var x={squareRatio:o.squareRatio,sort:m,leafDepth:o.leafDepth};f.hostTree.clearLayouts();var _={x:0,y:0,width:v[0],height:v[1],area:v[0]*v[1]};f.setLayout(_),_l(f,x,!1,0),_=f.getLayout(),gl(y,function(t,e){var n=(y[e+1]||f).getValue();t.setLayout(R({dataExtent:[n,n],borderWidth:0,upperHeight:0},_))})}var b=t.getData().tree.root;b.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var a={x:0,y:0};if(!n)return a;var i=n.node,o=i.getLayout();if(!o)return a;var r=[o.width/2,o.height/2],s=i;for(;s;){var l=s.getLayout();r[0]+=l.x,r[1]+=l.y,s=s.parentNode}return{x:t.width/2-r[0],y:t.height/2-r[1]}}(l,g,p),!0),t.setLayoutInfo(l),Sl(b,new e(-l.x,-l.y,a.getWidth(),a.getHeight()),y,f,0)}};function _l(t,e,n,a){var i,o;if(!t.isRemoved()){var r=t.getLayout();i=r.width,o=r.height;var s=t.getModel(),l=s.get(fl),u=s.get(yl)/2,c=Il(s),h=Math.max(l,c),p=l-u,g=h-u;t.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:c},!0);var f=(i=cl(i-2*p,0))*(o=cl(o-p-g,0)),y=function(t,e,n,a,i,o){var r=t.children||[],s=a.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=a.leafDepth&&a.leafDepth<=o;if(i&&!l)return t.viewChildren=[];r=d(r,function(t){return!t.isRemoved()}),function(t,e){e&&t.sort(function(t,n){var a="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===a?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:a})}(r,s);var u=function(t,e,n){for(var a=0,i=0,o=e.length;i<o;i++)a+=e[i].getValue();var r,s=t.get("visualDimension");e&&e.length?"value"===s&&n?(r=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&r.reverse()):(r=[1/0,-1/0],gl(e,function(t){var e=t.getValue(s);e<r[0]&&(r[0]=e),e>r[1]&&(r[1]=e)})):r=[NaN,NaN];return{sum:a,dataExtent:r}}(e,r,s);if(0===u.sum)return t.viewChildren=[];if(u.sum=function(t,e,n,a,i){if(!a)return n;for(var o=t.get("visibleMin"),r=i.length,s=r,l=r-1;l>=0;l--){var u=i["asc"===a?r-l-1:l].getValue();u/n*e<o&&(s=l,n-=u)}return"asc"===a?i.splice(0,r-s):i.splice(s,r-s),n}(e,n,u.sum,s,r),0===u.sum)return t.viewChildren=[];for(var c=0,h=r.length;c<h;c++){var p=r[c].getValue()/u.sum*n;r[c].setLayout({area:p})}l&&(r.length&&t.setLayout({isLeafRoot:!0},!0),r.length=0);return t.viewChildren=r,t.setLayout({dataExtent:u.dataExtent},!0),r}(t,s,f,e,n,a);if(y.length){var v={x:p,y:g,width:i,height:o},m=hl(i,o),x=1/0,_=[];_.area=0;for(var b=0,w=y.length;b<w;){var S=y[b];_.push(S),_.area+=S.getLayout().area;var I=bl(_,m,e.squareRatio);I<=x?(b++,x=I):(_.area-=_.pop().getLayout().area,wl(_,m,v,u,!1),m=hl(v.width,v.height),_.length=_.area=0,x=1/0)}if(_.length&&wl(_,m,v,u,!0),!n){var M=s.get("childrenVisibleMin");null!=M&&f<M&&(n=!0)}for(b=0,w=y.length;b<w;b++)_l(y[b],e,n,a+1)}}}function bl(t,e,n){for(var a=0,i=1/0,o=0,r=void 0,s=t.length;o<s;o++)(r=t[o].getLayout().area)&&(r<i&&(i=r),r>a&&(a=r));var l=t.area*t.area,u=e*e*n;return l?cl(u*a/l,l/(u*i)):1/0}function wl(t,e,n,a,i){var o=e===n.width?0:1,r=1-o,s=["x","y"],l=["width","height"],u=n[s[o]],d=e?t.area/e:0;(i||d>n[l[r]])&&(d=n[l[r]]);for(var c=0,h=t.length;c<h;c++){var p=t[c],g={},f=d?p.getLayout().area/d:0,y=g[l[r]]=cl(d-2*a,0),v=n[s[o]]+n[l[o]]-u,m=c===h-1||v<f?v:f,x=g[l[o]]=cl(m-2*a,0);g[s[r]]=n[s[r]]+hl(a,y/2),g[s[o]]=u+hl(a,x/2),u+=m,p.setLayout(g,!0)}n[s[r]]+=d,n[l[r]]-=d}function Sl(t,n,a,i,o){var r=t.getLayout(),s=a[o],l=s&&s===t;if(!(s&&!l||o===a.length&&t!==i)){t.setLayout({isInView:!0,invisible:!l&&!n.intersect(r),isAboveViewRoot:l},!0);var u=new e(n.x-r.x,n.y-r.y,n.width,n.height);gl(t.viewChildren||[],function(t){Sl(t,u,a,i,o+1)})}}function Il(t){return t.get(vl)?t.get(ml):0}function Ml(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getGraph().data,i=n.mapArray(n.getName);a.filterSelf(function(t){var n=a.getItemModel(t).getShallow("category");if(null!=n){O(n)&&(n=i[n]);for(var o=0;o<e.length;o++)if(!e[o].isSelected(n))return!1}return!0})})}function Cl(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getData(),i={};n.each(function(a){var o=n.getName(a);i["ec-"+o]=a;var r=n.getItemModel(a),s=r.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(o,e)),n.setItemVisual(a,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var d=r.getShallow(l[u],!0);null!=d&&n.setItemVisual(a,l[u],d)}}),n.count()&&a.each(function(t){var e=a.getItemModel(t).getShallow("category");if(null!=e){N(e)&&(e=i["ec-"+e]);var o=n.getItemVisual(e,"style"),r=a.ensureUniqueItemVisual(t,"style");R(r,o);for(var s=["symbol","symbolSize","symbolKeepAspect"],l=0;l<s.length;l++)a.setItemVisual(t,s[l],n.getItemVisual(e,s[l]))}})})}function Ll(t){return t instanceof Array||(t=[t,t]),t}function Tl(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),a=Ll(t.get("edgeSymbol")),i=Ll(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",a&&a[0]),n.setVisual("toSymbol",a&&a[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each(function(t){var a=n.getItemModel(t),i=e.getEdgeByIndex(t),o=Ll(a.getShallow("symbol",!0)),r=Ll(a.getShallow("symbolSize",!0)),s=a.getModel("lineStyle").getLineStyle(),l=n.ensureUniqueItemVisual(t,"style");switch(R(l,s),l.stroke){case"source":var u=i.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=i.node2.getVisual("style");l.stroke=u&&u.fill}o[0]&&i.setVisual("fromSymbol",o[0]),o[1]&&i.setVisual("toSymbol",o[1]),r[0]&&i.setVisual("fromSymbolSize",r[0]),r[1]&&i.setVisual("toSymbolSize",r[1])})})}var Al="--\x3e",Dl=function(t){return t.get("autoCurveness")||null},Pl=function(t,e){var n=Dl(t),a=20,i=[];if(O(n))a=n;else if(dt(n))return void(t.__curvenessList=n);e>a&&(a=e);var o=a%2?a+2:a+3;i=[];for(var r=0;r<o;r++)i.push((r%2?r+1:r)/10*(r%2?-1:1));t.__curvenessList=i},Nl=function(t,e,n){var a=[t.id,t.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[n.uid,a,i].join(Al)},kl=function(t){var e=t.split(Al);return[e[0],e[2],e[1]].join(Al)},El=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function Rl(t,e,n,a){var i=Dl(e),o=dt(i);if(!i)return null;var r=function(t,e){var n=Nl(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!r)return null;for(var s=-1,l=0;l<r.length;l++)if(r[l]===n){s=l;break}var u=function(t,e){return El(Nl(t.node1,t.node2,e),e)+El(Nl(t.node2,t.node1,e),e)}(t,e);Pl(e,u),t.lineStyle=t.lineStyle||{};var d=Nl(t.node1,t.node2,e),c=e.__curvenessList,h=o||u%2?0:1;if(r.isForward)return c[h+s];var p=kl(d),g=El(p,e),f=c[s+g+h];return a?o?i&&0===i[0]?(g+h)%2?f:-f:((g%2?0:1)+h)%2?f:-f:(g+h)%2?f:-f:c[s+g+h]}function zl(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),Ol(n,t)}}function Ol(t,e){t.eachEdge(function(t,n){var a=ve(t.getModel().get(["lineStyle","curveness"]),-Rl(t,e,n,!0),0),i=me(t.node1.getLayout()),o=me(t.node2.getLayout()),r=[i,o];+a&&r.push([(i[0]+o[0])/2-(i[1]-o[1])*a,(i[1]+o[1])/2-(o[0]-i[0])*a]),t.setLayout(r)})}function Vl(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var a=t.getData(),i=[];l(n.dimensions,function(t){i=i.concat(a.mapDimensionsAll(t))});for(var o=0;o<a.count();o++){for(var r=[],s=!1,u=0;u<i.length;u++){var d=a.get(i[u],o);isNaN(d)||(s=!0),r.push(d)}s?a.setItemLayout(o,n.dataToPoint(r)):a.setItemLayout(o,[NaN,NaN])}Ol(a.graph,t)}else e&&"none"!==e||zl(t)})}function Bl(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,a=e.scaleX;return((e.getZoom()-1)*n+1)/a}function Gl(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Wl=Math.PI,Fl=[];function Yl(t,e,n,a){var i=t.coordinateSystem;if(!i||"view"===i.type){var o=i.getBoundingRect(),r=t.getData(),s=r.graph,l=o.width/2+o.x,u=o.height/2+o.y,d=Math.min(o.width,o.height)/2,c=r.count();if(r.setLayout({cx:l,cy:u}),c){if(n){var h=i.pointToData(a),p=h[0],g=h[1],f=[p-l,g-u];xe(f,f),_e(f,f,d),n.setLayout([l+f[0],u+f[1]],!0),Hl(n,t.get(["circular","rotateLabel"]),l,u)}Ul[e](t,s,r,d,l,u,c),s.eachEdge(function(e,n){var a,i=ve(e.getModel().get(["lineStyle","curveness"]),Rl(e,t,n),0),o=me(e.node1.getLayout()),r=me(e.node2.getLayout()),s=(o[0]+r[0])/2,d=(o[1]+r[1])/2;+i&&(a=[l*(i*=3)+s*(1-i),u*i+d*(1-i)]),e.setLayout([o,r,a])})}}}var Ul={value:function(t,e,n,a,i,o,r){var s=0,l=n.getSum("value"),u=2*Math.PI/(l||r);e.eachNode(function(t){var e=t.getValue("value"),n=u*(l?e:1)/2;s+=n,t.setLayout([a*Math.cos(s)+i,a*Math.sin(s)+o]),s+=n})},symbolSize:function(t,e,n,a,i,o,r){var s=0;Fl.length=r;var l=Bl(t);e.eachNode(function(t){var e=Gl(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=l;var n=Math.asin(e/2/a);isNaN(n)&&(n=Wl/2),Fl[t.dataIndex]=n,s+=2*n});var u=(2*Wl-s)/r/2,d=0;e.eachNode(function(t){var e=u+Fl[t.dataIndex];d+=e,(!t.getLayout()||!t.getLayout().fixed)&&t.setLayout([a*Math.cos(d)+i,a*Math.sin(d)+o]),d+=e})}};function Hl(t,e,n,a){var i=t.getGraphicEl();if(i){var o=t.getModel().get(["label","rotate"])||0,r=i.getSymbolPath();if(e){var s=t.getLayout(),l=Math.atan2(s[1]-a,s[0]-n);l<0&&(l=2*Math.PI+l);var u=s[0]<n;u&&(l-=Math.PI);var d=u?"left":"right";r.setTextConfig({rotation:-l,position:d,origin:"center"});var c=r.ensureState("emphasis");R(c.textConfig||(c.textConfig={}),{position:d})}else r.setTextConfig({rotation:o*=Math.PI/180})}}function Xl(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&Yl(t,"symbolSize")})}var Zl=Ie;function jl(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},a=t.getGraph(),i=a.data,o=a.edgeData,r=t.getModel("force"),s=r.get("initLayout");t.preservedPoints?i.each(function(t){var e=i.getId(t);i.setItemLayout(t,n[e]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&Yl(t,"value"):zl(t);var l=i.getDataExtent("value"),u=o.getDataExtent("value"),d=r.get("repulsion"),c=r.get("edgeLength"),h=dt(d)?d:[d,d],p=dt(c)?c:[c,c];p=[p[1],p[0]];var g=i.mapArray("value",function(t,e){var n=i.getItemLayout(e),a=Le(t,l,h);return isNaN(a)&&(a=(h[0]+h[1])/2),{w:a,rep:a,fixed:i.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),f=o.mapArray("value",function(e,n){var i=a.getEdgeByIndex(n),o=Le(e,u,p);isNaN(o)&&(o=(p[0]+p[1])/2);var r=i.getModel(),s=ve(i.getModel().get(["lineStyle","curveness"]),-Rl(i,t,n,!0),0);return{n1:g[i.node1.dataIndex],n2:g[i.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:r.get("ignoreForceLayout")}}),y=e.getBoundingRect(),v=function(t,e,n){for(var a=t,i=e,o=n.rect,r=o.width,s=o.height,l=[o.x+r/2,o.y+s/2],u=null==n.gravity?.1:n.gravity,d=0;d<a.length;d++){var c=a[d];c.p||(c.p=be(r*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),c.pp=me(c.p),c.edges=null}var h,p,g=null==n.friction?.6:n.friction,f=g;return{warmUp:function(){f=.8*g},setFixed:function(t){a[t].fixed=!0},setUnfixed:function(t){a[t].fixed=!1},beforeStep:function(t){h=t},afterStep:function(t){p=t},step:function(t){h&&h(a,i);for(var e=[],n=a.length,o=0;o<i.length;o++){var r=i[o];if(!r.ignoreForceLayout){var s=r.n1,d=r.n2;we(e,d.p,s.p);var c=Se(e)-r.d,g=d.w/(s.w+d.w);isNaN(g)&&(g=0),xe(e,e),!s.fixed&&Zl(s.p,s.p,e,g*c*f),!d.fixed&&Zl(d.p,d.p,e,-(1-g)*c*f)}}for(o=0;o<n;o++)(x=a[o]).fixed||(we(e,l,x.p),Zl(x.p,x.p,e,u*f));for(o=0;o<n;o++){s=a[o];for(var y=o+1;y<n;y++){d=a[y],we(e,d.p,s.p),0===(c=Se(e))&&(Me(e,Math.random()-.5,Math.random()-.5),c=1);var v=(s.rep+d.rep)/c/c;!s.fixed&&Zl(s.pp,s.pp,e,v),!d.fixed&&Zl(d.pp,d.pp,e,-v)}}var m=[];for(o=0;o<n;o++){var x;(x=a[o]).fixed||(we(m,x.p,x.pp),Zl(x.p,x.p,m,f),Ce(x.pp,x.p))}var _=(f*=.992)<.01;p&&p(a,i,_),t&&t(_)}}}(g,f,{rect:y,gravity:r.get("gravity"),friction:r.get("friction")});v.beforeStep(function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].fixed&&Ce(t[n].p,a.getNodeByIndex(n).getLayout())}),v.afterStep(function(t,e,o){for(var r=0,s=t.length;r<s;r++)t[r].fixed||a.getNodeByIndex(r).setLayout(t[r].p),n[i.getId(r)]=t[r].p;for(r=0,s=e.length;r<s;r++){var l=e[r],u=a.getEdgeByIndex(r),d=l.n1.p,c=l.n2.p,h=u.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],Ce(h[0],d),Ce(h[1],c),+l.curveness&&(h[2]=[(d[0]+c[0])/2-(d[1]-c[1])*l.curveness,(d[1]+c[1])/2-(c[0]-d[0])*l.curveness]),u.setLayout(h)}}),t.forceLayout=v,t.preservedPoints=n,v.step()}else t.forceLayout=null})}function ql(t,e){var n=[];return t.eachSeriesByType("graph",function(a){Te({targetModel:a,coordSysType:"view",coordSysProvider:function(){var i=a.getData(),o=i.mapArray(function(t){var e=i.getItemModel(t);return[+e.get("x"),+e.get("y")]}),r=[],s=[];mt(o,r,s),s[0]-r[0]===0&&(s[0]+=1,r[0]-=1);s[1]-r[1]===0&&(s[1]+=1,r[1]-=1);var l=(s[0]-r[0])/(s[1]-r[1]),u=function(t,e,n){var a=Bt(t,e),i=R(t.getBoxLayoutParams(),{aspect:n}),o=Gt(i,a.refContainer);return Ae(t,o,n)}(a,e,l);isNaN(l)&&(r=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var d=s[0]-r[0],c=s[1]-r[1],h=new xt(null,{api:e,ecModel:t});return h.zoomLimit=a.get("scaleLimit"),h.setBoundingRect(r[0],r[1],d,c),h.setViewRect(u.x,u.y,u.width,u.height),h.setCenter(a.get("center")),h.setZoom(a.get("zoom")),n.push(h),h},isDefaultDataCoordSys:!0})}),n}var Kl=[],$l=[],Ql=[],Jl=Pe,tu=Ne,eu=Math.abs;function nu(t,e,n){for(var a,i=t[0],o=t[1],r=t[2],s=1/0,l=n*n,u=.1,d=.1;d<=.9;d+=.1){Kl[0]=Jl(i[0],o[0],r[0],d),Kl[1]=Jl(i[1],o[1],r[1],d),(p=eu(tu(Kl,e)-l))<s&&(s=p,a=d)}for(var c=0;c<32;c++){var h=a+u;$l[0]=Jl(i[0],o[0],r[0],a),$l[1]=Jl(i[1],o[1],r[1],a),Ql[0]=Jl(i[0],o[0],r[0],h),Ql[1]=Jl(i[1],o[1],r[1],h);var p=tu($l,e)-l;if(eu(p)<.01)break;var g=tu(Ql,e)-l;u/=2,p<0?g>=0?a+=u:a-=u:g>=0?a-=u:a+=u}return a}function au(t,e){var n=[],a=De,i=[[],[],[]],o=[[],[]],r=[];e/=2,t.eachEdge(function(t,s){var l=t.getLayout(),u=t.getVisual("fromSymbol"),d=t.getVisual("toSymbol");l.__original||(l.__original=[me(l[0]),me(l[1])],l[2]&&l.__original.push(me(l[2])));var c=l.__original;if(null!=l[2]){if(Ce(i[0],c[0]),Ce(i[1],c[2]),Ce(i[2],c[1]),u&&"none"!==u){var h=Gl(t.node1),p=nu(i,c[0],h*e);a(i[0][0],i[1][0],i[2][0],p,n),i[0][0]=n[3],i[1][0]=n[4],a(i[0][1],i[1][1],i[2][1],p,n),i[0][1]=n[3],i[1][1]=n[4]}if(d&&"none"!==d){h=Gl(t.node2),p=nu(i,c[1],h*e);a(i[0][0],i[1][0],i[2][0],p,n),i[1][0]=n[1],i[2][0]=n[2],a(i[0][1],i[1][1],i[2][1],p,n),i[1][1]=n[1],i[2][1]=n[2]}Ce(l[0],i[0]),Ce(l[1],i[2]),Ce(l[2],i[1])}else{if(Ce(o[0],c[0]),Ce(o[1],c[1]),we(r,o[1],o[0]),xe(r,r),u&&"none"!==u){h=Gl(t.node1);Ie(o[0],o[0],r,h*e)}if(d&&"none"!==d){h=Gl(t.node2);Ie(o[1],o[1],r,-h*e)}Ce(l[0],o[0]),Ce(l[1],o[1])}})}var iu=t();function ou(t,e){t&&(iu(t).bridge=e)}function ru(t){return"view"===t.type}var su=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(t,e){var n=new ke,a=new Ee,i=this.group,o=new yt;this._controller=new vt(e.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(a.group),i.add(o),this._symbolDraw=n,this._lineDraw=a,this._mainGroup=o,this._firstRender=!0},e.prototype.render=function(t,e,n){var a=this,i=t.coordinateSystem,o=!1;this._model=t,this._api=n,this._active=!0;var s=this._getThumbnailInfo();s&&s.bridge.reset(n);var l=this._symbolDraw,u=this._lineDraw;if(ru(i)){var d={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?this._mainGroup.attr(d):w(this._mainGroup,d,t)}au(t.getGraph(),Bl(t));var c=t.getData();l.updateData(c);var h=t.getEdgeData();u.updateData(h),this._updateNodeAndLinkScale(),this._updateController(null,t,n),clearTimeout(this._layoutTimeout);var p=t.forceLayout,g=t.get(["force","layoutAnimation"]);p&&(o=!0,this._startForceLayoutIteration(p,n,g));var f=t.get("layout");c.graph.eachNode(function(e){var i=e.dataIndex,o=e.getGraphicEl(),s=e.getModel();if(o){o.off("drag").off("dragend");var l=s.get("draggable");l&&o.on("drag",function(r){switch(f){case"force":p.warmUp(),!a._layouting&&a._startForceLayoutIteration(p,n,g),p.setFixed(i),c.setItemLayout(i,[o.x,o.y]);break;case"circular":c.setItemLayout(i,[o.x,o.y]),e.setLayout({fixed:!0},!0),Yl(t,"symbolSize",e,[r.offsetX,r.offsetY]),a.updateLayout(t);break;default:c.setItemLayout(i,[o.x,o.y]),Ol(t.getGraph(),t),a.updateLayout(t)}}).on("dragend",function(){p&&p.setUnfixed(i)}),o.setDraggable(l,!!s.get("cursor")),"adjacency"===s.get(["emphasis","focus"])&&(r(o).focus=e.getAdjacentDataIndices())}}),c.graph.eachEdge(function(t){var e=t.getGraphicEl(),n=t.getModel().get(["emphasis","focus"]);e&&"adjacency"===n&&(r(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})});var y="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),v=c.getLayout("cx"),m=c.getLayout("cy");c.graph.eachNode(function(t){Hl(t,y,v,m)}),this._firstRender=!1,o||this._renderThumbnail(t,n,this._symbolDraw,this._lineDraw)},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e,n){var a=this,i=!1;!function o(){t.step(function(t){a.updateLayout(a._model),!t&&i||(i=!0,a._renderThumbnail(a._model,e,a._symbolDraw,a._lineDraw)),(a._layouting=!t)&&(n?a._layoutTimeout=setTimeout(o,16):o())})}()},e.prototype._updateController=function(t,e,n){var a=this._controller,i=this._controllerHost,o=e.coordinateSystem;ru(o)?(a.enable(e.get("roam"),{api:n,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(t,e,n){return o.containPoint([e,n])},isInClip:function(e,n,a){return!t||t.contain(n,a)}}}),i.zoomLimit=e.get("scaleLimit"),i.zoom=o.getZoom(),a.off("pan").off("zoom").on("pan",function(t){n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY})})):a.disable()},e.prototype.updateViewOnPan=function(t,e,n){this._active&&(Re(this._controllerHost,n.dx,n.dy),this._updateThumbnailWindow())},e.prototype.updateViewOnZoom=function(t,e,n){this._active&&(ze(this._controllerHost,n.zoom,n.originX,n.originY),this._updateNodeAndLinkScale(),au(t.getGraph(),Bl(t)),this._lineDraw.updateLayout(),e.updateLabelLayout(),this._updateThumbnailWindow())},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),n=Bl(t);e.eachItemGraphicEl(function(t,e){t&&t.setSymbolScale(n)})},e.prototype.updateLayout=function(t){this._active&&(au(t.getGraph(),Bl(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},e.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},e.prototype._getThumbnailInfo=function(){var t=this._model,e=t.coordinateSystem;if("view"===e.type){var n=function(t){if(t)return iu(t).bridge}(t);if(n)return{bridge:n,coordSys:e}}},e.prototype._updateThumbnailWindow=function(){var t=this._getThumbnailInfo();t&&t.bridge.updateWindow(t.coordSys.transform,this._api)},e.prototype._renderThumbnail=function(t,e,n,a){var i=this._getThumbnailInfo();if(i){var o=new yt,r=n.group.children(),s=a.group.children(),l=new yt,u=new yt;o.add(u),o.add(l);for(var d=0;d<r.length;d++){var c=(m=r[d]).children()[0],h=m.x,p=m.y,g=at(c.shape),f=R(g,{width:c.scaleX,height:c.scaleY,x:h-c.scaleX/2,y:p-c.scaleY/2}),y=at(c.style),v=new c.constructor({shape:f,style:y,z2:151});u.add(v)}for(d=0;d<s.length;d++){var m,x=(m=s[d]).children()[0],_=(y=at(x.style),f=at(x.shape),new Oe({style:y,shape:f,z2:151}));l.add(_)}i.bridge.renderContent({api:e,roamType:t.get("roam"),viewportRect:null,group:o,targetTrans:i.coordSys.transform})}},e.type="graph",e}(bt);function lu(t){return"_EC_"+t}var uu=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[lu(t)]){var a=new du(t,e);return a.hostGraph=this,this.nodes.push(a),n[lu(t)]=a,a}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[lu(t)]},t.prototype.addEdge=function(t,e,n){var a=this._nodesMap,i=this._edgesMap;if(O(t)&&(t=this.nodes[t]),O(e)&&(e=this.nodes[e]),t instanceof du||(t=a[lu(t)]),e instanceof du||(e=a[lu(e)]),t&&e){var o=t.id+"-"+e.id,r=new cu(t,e,n);return r.hostGraph=this,this._directed&&(t.outEdges.push(r),e.inEdges.push(r)),t.edges.push(r),t!==e&&e.edges.push(r),this.edges.push(r),i[o]=r,r}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof du&&(t=t.id),e instanceof du&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&t.call(e,n[i],i)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&t.call(e,n[i],i)},t.prototype.breadthFirstTraverse=function(t,e,n,a){if(e instanceof du||(e=this._nodesMap[lu(e)]),e){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(a,e,null))for(var r=[e];r.length;){var s=r.shift(),l=s[i];for(o=0;o<l.length;o++){var u=l[o],d=u.node1===s?u.node2:u.node1;if(!d.__visited){if(t.call(a,d,s))return;r.push(d),d.__visited=!0}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,a=this.edges,i=0,o=n.length;i<o;i++)n[i].dataIndex=-1;for(i=0,o=t.count();i<o;i++)n[t.getRawIndex(i)].dataIndex=i;e.filterSelf(function(t){var n=a[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(i=0,o=a.length;i<o;i++)a[i].dataIndex=-1;for(i=0,o=e.count();i<o;i++)a[e.getRawIndex(i)].dataIndex=i},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,a=this.edges,i=0;i<n.length;i++)e.addNode(n[i].id,n[i].dataIndex);for(i=0;i<a.length;i++){var o=a[i];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),du=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=Yt(),e=Yt(),n=0,a=this.edges.length;n<a;n++){var i=this.edges[n];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var o=[i.node1],r=[i.node2],s=0;s<o.length;){var l=o[s];s++,e.set(l.dataIndex,!0);for(var u=l.inEdges,d=0,c=u.length,h=void 0,p=void 0;d<c;d++)(p=(h=u[d]).dataIndex)>=0&&!t.hasKey(p)&&(t.set(p,!0),o.push(h.node1))}for(s=0;s<r.length;){var g=r[s];s++,e.set(g.dataIndex,!0);for(var f=g.outEdges,y=(d=0,f.length),v=void 0,m=void 0;d<y;d++)(m=(v=f[d]).dataIndex)>=0&&!t.hasKey(m)&&(t.set(m,!0),r.push(v.node2))}}}return{edge:t.keys(),node:e.keys()}},t}(),cu=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=Yt(),e=Yt();t.set(this.dataIndex,!0);for(var n=[this.node1],a=[this.node2],i=0;i<n.length;){var o=n[i];i++,e.set(o.dataIndex,!0);for(var r=0,s=o.inEdges.length,l=void 0,u=void 0;r<s;r++)(u=(l=o.inEdges[r]).dataIndex)>=0&&!t.hasKey(u)&&(t.set(u,!0),n.push(l.node1))}for(i=0;i<a.length;){var d=a[i];i++,e.set(d.dataIndex,!0);r=0,s=d.outEdges.length;for(var c=void 0,h=void 0;r<s;r++)(h=(c=d.outEdges[r]).dataIndex)>=0&&!t.hasKey(h)&&(t.set(h,!0),a.push(c.node2))}return{edge:t.keys(),node:e.keys()}},t}();function hu(t,e){return{getValue:function(n){var a=this[t][e];return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,a){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,a)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,a){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,a)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function pu(t,e,n,a,i){for(var o=new uu(a),r=0;r<t.length;r++)o.addNode(fe(t[r].id,t[r].name,r),r);var s=[],l=[],u=0;for(r=0;r<e.length;r++){var d=e[r],c=d.source,h=d.target;o.addEdge(c,h,u)&&(l.push(d),s.push(fe(kt(d.id,null),c+" > "+h)),u++)}var p,g=n.get("coordinateSystem");if("cartesian2d"===g||"polar"===g||"matrix"===g)p=Be(t,n);else{var f=Ge.get(g),y=f&&f.dimensions||[];b(y,"value")<0&&y.concat(["value"]);var v=Et(t,{coordDimensions:y,encodeDefine:n.getEncode()}).dimensions;(p=new Rt(v,n)).initData(t)}var m=new Rt(["value"],n);return m.initData(l,s),i&&i(p,m),ws({mainData:p,struct:o,structAttr:"graph",datas:{node:p,edge:m},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}Ve(du,hu("hostGraph","data")),Ve(cu,hu("hostGraph","edgeData"));var gu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return ft(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function a(){return n._categoriesData}this.legendVisualProvider=new We(a,a),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Fe(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var n,a=t.edges||t.links||[],i=t.data||t.nodes||[],o=this;if(i&&a){Dl(n=this)&&(n.__curvenessList=[],n.__edgeMap={},Pl(n));var r=pu(i,a,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t){var e=o._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var n=zt.prototype.getModel;function a(t,e){var a=n.call(this,t,e);return a.resolveParentPath=i,a}function i(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",function(t){return t.resolveParentPath=i,t.getModel=a,t})});return l(r.edges,function(t){!function(t,e,n,a){if(Dl(n)){var i=Nl(t,e,n),o=n.__edgeMap,r=o[kl(i)];o[i]&&!r?o[i].isForward=!0:r&&o[i]&&(r.isForward=!0,o[i].isForward=!1),o[i]=o[i]||[],o[i].push(a)}}(t.node1,t.node2,this,t.dataIndex)},this),r.data}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,n){if("edge"===n){var a=this.getData(),i=this.getDataParams(t,n),o=a.graph.getEdgeByIndex(t),r=a.getName(o.node1.dataIndex),s=a.getName(o.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),Ot("nameValue",{name:l.join(" > "),value:i.value,noValue:null==i.value})}return Ye({series:this,dataIndex:t,multipleSeries:e})},e.prototype._updateCategoriesData=function(){var t=A(this.option.categories||[],function(t){return null!=t.value?t:R({value:0},t)}),e=new Rt(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:wt.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:wt.color.primary}}},e}(Vt);var fu=function(t){function e(e,n,a){var i=t.call(this)||this;r(i).dataType="node",i.z2=2;var o=new Zt;return i.setTextContent(o),i.updateData(e,n,a,!0),i}return ft(e,t),e.prototype.updateData=function(t,e,n,a){var i=this,o=t.graph.getNodeByIndex(e),r=t.hostModel,s=o.getModel(),l=s.getModel("emphasis"),u=t.getItemLayout(e),d=R(Ue(s.getModel("itemStyle"),u,!0),u),c=this;if(isNaN(d.startAngle))c.setShape(d);else{a?c.setShape(d):w(c,{shape:d},r,e);var h=R(Ue(s.getModel("itemStyle"),u,!0),u);i.setShape(h),i.useStyle(t.getItemVisual(e,"style")),Dt(i,s),this._updateLabel(r,s,o),t.setItemGraphicEl(e,c),Dt(c,s,"itemStyle");var p=l.get("focus");Kt(this,"adjacency"===p?o.getAdjacentDataIndices():p,l.get("blurScope"),l.get("disabled"))}},e.prototype._updateLabel=function(t,e,n){var a=this.getTextContent(),i=n.getLayout(),o=(i.startAngle+i.endAngle)/2,r=Math.cos(o),s=Math.sin(o),l=e.getModel("label");a.ignore=!l.get("show");var u=le(e),d=n.getVisual("style");se(a,u,{labelFetcher:{getFormattedLabel:function(n,a,i,o,r,s){return t.getFormattedLabel(n,a,"node",o,ve(r,u.normal&&u.normal.get("formatter"),e.get("name")),s)}},labelDataIndex:n.dataIndex,defaultText:n.dataIndex+"",inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:"startArc"});var c,h=l.get("position")||"outside",p=l.get("distance")||0;c="outside"===h?i.r+p:(i.r+i.r0)/2,this.textConfig={inside:"outside"!==h};var g="outside"!==h?l.get("align")||"center":r>0?"left":"right",f="outside"!==h?l.get("verticalAlign")||"middle":s>0?"top":"bottom";a.attr({x:r*c+i.cx,y:s*c+i.cy,rotation:0,style:{align:g,verticalAlign:f}})},e}(He),yu=function(t){function e(e,n,a,i){var o=t.call(this)||this;return r(o).dataType="edge",o.updateData(e,n,a,i,!0),o}return ft(e,t),e.prototype.buildPath=function(t,e){t.moveTo(e.s1[0],e.s1[1]);var n=.7,a=e.clockwise;t.arc(e.cx,e.cy,e.r,e.sStartAngle,e.sEndAngle,!a),t.bezierCurveTo((e.cx-e.s2[0])*n+e.s2[0],(e.cy-e.s2[1])*n+e.s2[1],(e.cx-e.t1[0])*n+e.t1[0],(e.cy-e.t1[1])*n+e.t1[1],e.t1[0],e.t1[1]),t.arc(e.cx,e.cy,e.r,e.tStartAngle,e.tEndAngle,!a),t.bezierCurveTo((e.cx-e.t2[0])*n+e.t2[0],(e.cy-e.t2[1])*n+e.t2[1],(e.cx-e.s1[0])*n+e.s1[0],(e.cy-e.s1[1])*n+e.s1[1],e.s1[0],e.s1[1]),t.closePath()},e.prototype.updateData=function(t,e,n,a,i){var o=t.hostModel,r=e.graph.getEdgeByIndex(n),s=r.getLayout(),l=r.node1.getModel(),u=e.getItemModel(r.dataIndex),d=u.getModel("lineStyle"),c=u.getModel("emphasis"),h=c.get("focus"),p=R(Ue(l.getModel("itemStyle"),s,!0),s),g=this;isNaN(p.sStartAngle)||isNaN(p.tStartAngle)?g.setShape(p):(i?(g.setShape(p),vu(g,r,t,d)):(Xe(g),vu(g,r,t,d),w(g,{shape:p},o,n)),Kt(this,"adjacency"===h?r.getAdjacentDataIndices():h,c.get("blurScope"),c.get("disabled")),Dt(g,u,"lineStyle"),e.setItemGraphicEl(r.dataIndex,g))},e}(W);function vu(t,e,n,a){var i=e.node1,o=e.node2,r=t.style;switch(t.setStyle(a.getLineStyle()),a.get("color")){case"source":r.fill=n.getItemVisual(i.dataIndex,"style").fill,r.decal=i.getVisual("style").decal;break;case"target":r.fill=n.getItemVisual(o.dataIndex,"style").fill,r.decal=o.getVisual("style").decal;break;case"gradient":var s=n.getItemVisual(i.dataIndex,"style").fill,l=n.getItemVisual(o.dataIndex,"style").fill;if(N(s)&&N(l)){var u=t.shape,d=(u.s1[0]+u.s2[0])/2,c=(u.s1[1]+u.s2[1])/2,h=(u.t1[0]+u.t2[0])/2,p=(u.t1[1]+u.t2[1])/2;r.fill=new Ze(d,c,h,p,[{offset:0,color:s},{offset:1,color:l}],!0)}}}var mu=Math.PI/180,xu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(t,e){},e.prototype.render=function(t,e,n){var a=t.getData(),i=this._data,o=this.group,l=-t.get("startAngle")*mu;if(a.diff(i).add(function(t){if(a.getItemLayout(t)){var e=new fu(a,t,l);r(e).dataIndex=t,o.add(e)}}).update(function(e,n){var r=i.getItemGraphicEl(n);a.getItemLayout(e)?(r?r.updateData(a,e,l):r=new fu(a,e,l),o.add(r)):r&&je(r,t,n)}).remove(function(e){var n=i.getItemGraphicEl(e);n&&je(n,t,e)}).execute(),!i){var u=t.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=s(u[0],n.getWidth()),this.group.originY=s(u[1],n.getHeight()),_(this.group,{scaleX:1,scaleY:1},t)}this._data=a,this.renderEdges(t,l)},e.prototype.renderEdges=function(t,e){var n=t.getData(),a=t.getEdgeData(),i=this._edgeData,o=this.group;a.diff(i).add(function(t){var i=new yu(n,a,t,e);r(i).dataIndex=t,o.add(i)}).update(function(t,r){var s=i.getItemGraphicEl(r);s.updateData(n,a,t,e),o.add(s)}).remove(function(e){var n=i.getItemGraphicEl(e);n&&je(n,t,e)}).execute(),this._edgeData=a},e.prototype.dispose=function(){},e.type="chord",e}(bt),_u=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this.legendVisualProvider=new We(Qt(this.getData,this),Qt(this.getRawData,this))},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links)},e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],a=t.data||t.nodes||[];if(a&&n)return pu(a,n,this,!0,function(t,e){var n=zt.prototype.getModel;function a(t,e){var a=n.call(this,t,e);return a.resolveParentPath=i,a}function i(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",function(t){return t.resolveParentPath=i,t.getModel=a,t})}).data},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){var a=this.getDataParams(t,n);if("edge"===n){var i=this.getData(),o=i.graph.getEdgeByIndex(t),r=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),Ot("nameValue",{name:l.join(" > "),value:a.value,noValue:null==a.value})}return Ot("nameValue",{name:a.name,value:a.value,noValue:null==a.value})},e.prototype.getDataParams=function(e,n){var a=t.prototype.getDataParams.call(this,e,n);if("node"===n){var i=this.getData(),o=this.getGraph().getNodeByIndex(e);if(null==a.name&&(a.name=i.getName(e)),null==a.value){var r=o.getLayout().value;a.value=r}}return a},e.type="series.chord",e.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},e}(Vt),bu=Math.PI/180;function wu(t,e){t.eachSeriesByType("chord",function(t){!function(t,e){var n=t.getData(),a=n.graph,i=t.getEdgeData();if(!i.count())return;var o=qe(t,e),r=o.cx,s=o.cy,l=o.r,u=o.r0,d=Math.max((t.get("padAngle")||0)*bu,0),c=Math.max((t.get("minAngle")||0)*bu,0),h=-t.get("startAngle")*bu,p=h+2*Math.PI,g=t.get("clockwise"),f=g?1:-1,y=[h,p];Ke(y,!g);var v=y[0],m=y[1]-v,x=0===n.getSum("value")&&0===i.getSum("value"),_=[],b=0;a.eachEdge(function(t){var e=x?1:t.getValue("value");x&&(e>0||c)&&(b+=2);var n=t.node1.dataIndex,a=t.node2.dataIndex;_[n]=(_[n]||0)+e,_[a]=(_[a]||0)+e});var w=0;if(a.eachNode(function(t){var e=t.getValue("value");isNaN(e)||(_[t.dataIndex]=Math.max(e,_[t.dataIndex]||0)),!x&&(_[t.dataIndex]>0||c)&&b++,w+=_[t.dataIndex]||0}),0===b||0===w)return;d*b>=Math.abs(m)&&(d=Math.max(0,(Math.abs(m)-c*b)/b));(d+c)*b>=Math.abs(m)&&(c=(Math.abs(m)-d*b)/b);var S=(m-d*b*f)/w,I=0,M=0,C=0;a.eachNode(function(t){var e=_[t.dataIndex]||0,n=S*(w?e:1)*f;Math.abs(n)<c?I+=c-Math.abs(n):(M+=Math.abs(n)-c,C+=Math.abs(n)),t.setLayout({angle:n,value:e})});var L=!1;if(I>M){var T=I/M;a.eachNode(function(t){var e=t.getLayout().angle;Math.abs(e)>=c?t.setLayout({angle:e*T,ratio:T},!0):t.setLayout({angle:c,ratio:0===c?1:e/c},!0)})}else a.eachNode(function(t){if(!L){var e=t.getLayout().angle;e-Math.min(e/C,1)*I<c&&(L=!0)}});var A=I;a.eachNode(function(t){if(!(A<=0)){var e=t.getLayout().angle;if(e>c&&c>0){var n=L?1:Math.min(e/C,1),a=e-c,i=Math.min(a,Math.min(A,I*n));A-=i,t.setLayout({angle:e-i,ratio:(e-i)/e},!0)}else c>0&&t.setLayout({angle:c,ratio:0===e?1:c/e},!0)}});var D=v,P=[];a.eachNode(function(t){var e=Math.max(t.getLayout().angle,c);t.setLayout({cx:r,cy:s,r0:u,r:l,startAngle:D,endAngle:D+e*f,clockwise:g},!0),P[t.dataIndex]=D,D+=(e+d)*f}),a.eachEdge(function(t){var e=x?1:t.getValue("value"),n=S*(w?e:1)*f,a=t.node1.dataIndex,i=P[a]||0,o=i+Math.abs((t.node1.getLayout().ratio||1)*n)*f,l=[r+u*Math.cos(i),s+u*Math.sin(i)],d=[r+u*Math.cos(o),s+u*Math.sin(o)],c=t.node2.dataIndex,h=P[c]||0,p=h+Math.abs((t.node2.getLayout().ratio||1)*n)*f,y=[r+u*Math.cos(h),s+u*Math.sin(h)],v=[r+u*Math.cos(p),s+u*Math.sin(p)];t.setLayout({s1:l,s2:d,sStartAngle:i,sEndAngle:o,t1:y,t2:v,tStartAngle:h,tEndAngle:p,cx:r,cy:s,r:u,value:e,clockwise:g}),P[a]=o,P[c]=p})}(t,e)})}var Su=function(){return function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}}(),Iu=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointer",n}return ft(e,t),e.prototype.getDefaultShape=function(){return new Su},e.prototype.buildPath=function(t,e){var n=Math.cos,a=Math.sin,i=e.r,o=e.width,r=e.angle,s=e.x-n(r)*o*(o>=i/3?1:2),l=e.y-a(r)*o*(o>=i/3?1:2);r=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(r)*o,e.y+a(r)*o),t.lineTo(e.x+n(e.angle)*i,e.y+a(e.angle)*i),t.lineTo(e.x-n(r)*o,e.y-a(r)*o),t.lineTo(s,l)},e}(W);function Mu(t,e){var n=null==t?"":t+"";return e&&(N(e)?n=e.replace("{value}",n):i(e)&&(n=e(t))),n}var Cu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),i=function(t,e){var n=t.get("center"),a=e.getWidth(),i=e.getHeight(),o=Math.min(a,i);return{cx:s(n[0],e.getWidth()),cy:s(n[1],e.getHeight()),r:s(t.get("radius"),o/2)}}(t,n);this._renderMain(t,e,n,a,i),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,e,n,a,i){var o=this.group,r=t.get("clockwise"),s=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,d=t.getModel("axisLine"),c=d.get("roundCap")?Qe:He,h=d.get("show"),p=d.getModel("lineStyle"),g=p.get("width"),f=[s,u];Ke(f,!r);for(var y=(u=f[1])-(s=f[0]),v=s,m=[],x=0;h&&x<a.length;x++){var _=new c({shape:{startAngle:v,endAngle:u=s+y*Math.min(Math.max(a[x][0],0),1),cx:i.cx,cy:i.cy,clockwise:r,r0:i.r-g,r:i.r},silent:!0});_.setStyle({fill:a[x][1]}),_.setStyle(p.getLineStyle(["color","width"])),m.push(_),v=u}m.reverse(),l(m,function(t){return o.add(t)});var b=function(t){if(t<=0)return a[0][1];var e;for(e=0;e<a.length;e++)if(a[e][0]>=t&&(0===e?0:a[e-1][0])<t)return a[e][1];return a[e-1][1]};this._renderTicks(t,e,n,b,i,s,u,r,g),this._renderTitleAndDetail(t,e,n,b,i),this._renderAnchor(t,i),this._renderPointer(t,e,n,b,i,s,u,r,g)},e.prototype._renderTicks=function(t,e,n,a,i,o,r,l,u){for(var d,c,h=this.group,p=i.cx,g=i.cy,f=i.r,y=+t.get("min"),v=+t.get("max"),m=t.getModel("splitLine"),x=t.getModel("axisTick"),_=t.getModel("axisLabel"),b=t.get("splitNumber"),w=x.get("splitNumber"),S=s(m.get("length"),f),I=s(x.get("length"),f),M=o,C=(r-o)/b,L=C/w,T=m.getModel("lineStyle").getLineStyle(),A=x.getModel("lineStyle").getLineStyle(),D=m.get("distance"),P=0;P<=b;P++){if(d=Math.cos(M),c=Math.sin(M),m.get("show")){var N=new Je({shape:{x1:d*(f-(k=D?D+u:u))+p,y1:c*(f-k)+g,x2:d*(f-S-k)+p,y2:c*(f-S-k)+g},style:T,silent:!0});"auto"===T.stroke&&N.setStyle({stroke:a(P/b)}),h.add(N)}if(_.get("show")){var k=_.get("distance")+D,E=Mu(tn(P/b*(v-y)+y),_.get("formatter")),R=a(P/b),z=d*(f-S-k)+p,V=c*(f-S-k)+g,B=_.get("rotate"),G=0;"radial"===B?(G=-M+2*Math.PI)>Math.PI/2&&(G+=Math.PI):"tangential"===B?G=-M-Math.PI/2:O(B)&&(G=B*Math.PI/180),0===G?h.add(new Zt({style:qt(_,{text:E,x:z,y:V,verticalAlign:c<-.8?"top":c>.8?"bottom":"middle",align:d<-.4?"left":d>.4?"right":"center"},{inheritColor:R}),silent:!0})):h.add(new Zt({style:qt(_,{text:E,x:z,y:V,verticalAlign:"middle",align:"center"},{inheritColor:R}),silent:!0,originX:z,originY:V,rotation:G}))}if(x.get("show")&&P!==b){k=(k=x.get("distance"))?k+u:u;for(var W=0;W<=w;W++){d=Math.cos(M),c=Math.sin(M);var F=new Je({shape:{x1:d*(f-k)+p,y1:c*(f-k)+g,x2:d*(f-I-k)+p,y2:c*(f-I-k)+g},silent:!0,style:A});"auto"===A.stroke&&F.setStyle({stroke:a((P+W/w)/b)}),h.add(F),M+=L}M-=L}else M+=C}},e.prototype._renderPointer=function(t,e,n,a,i,o,r,l,u){var d=this.group,c=this._data,h=this._progressEls,p=[],g=t.get(["pointer","show"]),f=t.getModel("progress"),y=f.get("show"),v=t.getData(),m=v.mapDimension("value"),x=+t.get("min"),b=+t.get("max"),S=[x,b],I=[o,r];function C(e,n){var a,o=v.getItemModel(e).getModel("pointer"),r=s(o.get("width"),i.r),l=s(o.get("length"),i.r),u=t.get(["pointer","icon"]),d=o.get("offsetCenter"),c=s(d[0],i.r),h=s(d[1],i.r),p=o.get("keepAspect");return(a=u?nn(u,c-r/2,h-l,r,l,null,p):new Iu({shape:{angle:-Math.PI/2,width:r,r:l,x:c,y:h}})).rotation=-(n+Math.PI/2),a.x=i.cx,a.y=i.cy,a}function L(t,e){var n=f.get("roundCap")?Qe:He,a=f.get("overlap"),r=a?f.get("width"):u/v.count(),s=a?i.r-r:i.r-(t+1)*r,d=a?i.r:i.r-t*r,c=new n({shape:{startAngle:o,endAngle:e,cx:i.cx,cy:i.cy,clockwise:l,r0:s,r:d}});return a&&(c.z2=Le(v.get(m,t),[x,b],[100,0],!0)),c}(y||g)&&(v.diff(c).add(function(e){var n=v.get(m,e);if(g){var a=C(e,o);_(a,{rotation:-((isNaN(+n)?I[0]:Le(n,S,I,!0))+Math.PI/2)},t),d.add(a),v.setItemGraphicEl(e,a)}if(y){var i=L(e,o),r=f.get("clip");_(i,{shape:{endAngle:Le(n,S,I,r)}},t),d.add(i),en(t.seriesIndex,v.dataType,e,i),p[e]=i}}).update(function(e,n){var a=v.get(m,e);if(g){var i=c.getItemGraphicEl(n),r=i?i.rotation:o,s=C(e,r);s.rotation=r,w(s,{rotation:-((isNaN(+a)?I[0]:Le(a,S,I,!0))+Math.PI/2)},t),d.add(s),v.setItemGraphicEl(e,s)}if(y){var l=h[n],u=L(e,l?l.shape.endAngle:o),x=f.get("clip");w(u,{shape:{endAngle:Le(a,S,I,x)}},t),d.add(u),en(t.seriesIndex,v.dataType,e,u),p[e]=u}}).execute(),v.each(function(t){var e=v.getItemModel(t),n=e.getModel("emphasis"),i=n.get("focus"),o=n.get("blurScope"),r=n.get("disabled");if(g){var s=v.getItemGraphicEl(t),l=v.getItemVisual(t,"style"),u=l.fill;if(s instanceof M){var d=s.style;s.useStyle(R({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(u);s.setStyle(e.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",a(Le(v.get(m,t),S,[0,1],!0))),s.z2EmphasisLift=0,Dt(s,e),Kt(s,i,o,r)}if(y){var c=p[t];c.useStyle(v.getItemVisual(t,"style")),c.setStyle(e.getModel(["progress","itemStyle"]).getItemStyle()),c.z2EmphasisLift=0,Dt(c,e),Kt(c,i,o,r)}}),this._progressEls=p)},e.prototype._renderAnchor=function(t,e){var n=t.getModel("anchor");if(n.get("show")){var a=n.get("size"),i=n.get("icon"),o=n.get("offsetCenter"),r=n.get("keepAspect"),l=nn(i,e.cx-a/2+s(o[0],e.r),e.cy-a/2+s(o[1],e.r),a,a,null,r);l.z2=n.get("showAbove")?1:0,l.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(l)}},e.prototype._renderTitleAndDetail=function(t,e,n,a,i){var o=this,r=t.getData(),l=r.mapDimension("value"),u=+t.get("min"),d=+t.get("max"),c=new yt,h=[],p=[],g=t.isAnimationEnabled(),f=t.get(["pointer","showAbove"]);r.diff(this._data).add(function(t){h[t]=new Zt({silent:!0}),p[t]=new Zt({silent:!0})}).update(function(t,e){h[t]=o._titleEls[e],p[t]=o._detailEls[e]}).execute(),r.each(function(e){var n=r.getItemModel(e),o=r.get(l,e),y=new yt,v=a(Le(o,[u,d],[0,1],!0)),m=n.getModel("title");if(m.get("show")){var x=m.get("offsetCenter"),_=i.cx+s(x[0],i.r),b=i.cy+s(x[1],i.r);(D=h[e]).attr({z2:f?0:2,style:qt(m,{x:_,y:b,text:r.getName(e),align:"center",verticalAlign:"middle"},{inheritColor:v})}),y.add(D)}var w=n.getModel("detail");if(w.get("show")){var I=w.get("offsetCenter"),M=i.cx+s(I[0],i.r),C=i.cy+s(I[1],i.r),L=s(w.get("width"),i.r),T=s(w.get("height"),i.r),A=t.get(["progress","show"])?r.getItemVisual(e,"style").fill:v,D=p[e],P=w.get("formatter");D.attr({z2:f?0:2,style:qt(w,{x:M,y:C,text:Mu(o,P),width:isNaN(L)?null:L,height:isNaN(T)?null:T,align:"center",verticalAlign:"middle"},{inheritColor:A})}),an(D,{normal:w},o,function(t){return Mu(t,P)}),g&&S(D,e,r,t,{getFormattedLabel:function(t,e,n,a,i,r){return Mu(r?r.interpolatedValue:o,P)}}),y.add(D)}c.add(y)}),this.group.add(c),this._titleEls=h,this._detailEls=p},e.type="gauge",e}(bt),Lu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n}return ft(e,t),e.prototype.getInitialData=function(t,e){return on(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,wt.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:wt.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:wt.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:wt.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:wt.color.neutral00,borderWidth:0,borderColor:wt.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:wt.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:wt.color.transparent,borderWidth:0,borderColor:wt.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:wt.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Vt);var Tu=["itemStyle","opacity"],Au=function(t){function e(e,n){var a=t.call(this)||this,i=a,o=new rn,r=new Zt;return i.setTextContent(r),a.setTextGuideLine(o),a.updateData(e,n,!0),a}return ft(e,t),e.prototype.updateData=function(t,e,n){var a=this,i=t.hostModel,o=t.getItemModel(e),r=t.getItemLayout(e),s=o.getModel("emphasis"),l=o.get(Tu);l=null==l?1:l,n||Xe(a),a.useStyle(t.getItemVisual(e,"style")),a.style.lineJoin="round",n?(a.setShape({points:r.points}),a.style.opacity=0,_(a,{style:{opacity:l}},i,e)):w(a,{style:{opacity:l},shape:{points:r.points}},i,e),Dt(a,o),this._updateLabel(t,e),Kt(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t,e){var n=this,a=this.getTextGuideLine(),i=n.getTextContent(),o=t.hostModel,r=t.getItemModel(e),s=t.getItemLayout(e).label,l=t.getItemVisual(e,"style"),u=l.fill;se(i,le(r),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:l.opacity,defaultText:t.getName(e)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}});var d="inherit"===r.getModel("label").get("color")?u:null;n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:d,outsideFill:d});var c=s.linePoints;a.setShape({points:c}),n.textGuideLineConfig={anchor:c?new sn(c[0][0],c[0][1]):null},w(i,{style:{x:s.x,y:s.y}},o,e),i.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),g(n,f(r),{stroke:u})},e}(Xt),Du=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return ft(e,t),e.prototype.render=function(t,e,n){var a=t.getData(),i=this._data,o=this.group;a.diff(i).add(function(t){var e=new Au(a,t);a.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){var n=i.getItemGraphicEl(e);n.updateData(a,t),o.add(n),a.setItemGraphicEl(t,n)}).remove(function(e){var n=i.getItemGraphicEl(e);je(n,t,e)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(bt),Pu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(Qt(this.getData,this),Qt(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return on(this,{coordDimensions:["value"],encodeDefaulter:Nt(ln,this)})},e.prototype._defaultLabelLine=function(t){Fe(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var n=this.getData(),a=t.prototype.getDataParams.call(this,e),i=n.mapDimension("value"),o=n.getSum(i);return a.percent=o?+(n.get(i,e)/o*100).toFixed(2):0,a.$vars.push("percent"),a},e.type="series.funnel",e.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:wt.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:wt.color.primary}}},e}(Vt);function Nu(t,e){t.eachSeriesByType("funnel",function(t){var n=t.getData(),a=n.mapDimension("value"),o=t.get("sort"),r=Bt(t,e),l=Gt(t.getBoxLayoutParams(),r.refContainer),u=t.get("orient"),d=l.width,c=l.height,h=function(t,e){for(var n=t.mapDimension("value"),a=t.mapArray(n,function(t){return t}),o=[],r="ascending"===e,s=0,l=t.count();s<l;s++)o[s]=s;return i(e)?o.sort(e):"none"!==e&&o.sort(function(t,e){return r?a[t]-a[e]:a[e]-a[t]}),o}(n,o),p=l.x,g=l.y,f="horizontal"===u?[s(t.get("minSize"),c),s(t.get("maxSize"),c)]:[s(t.get("minSize"),d),s(t.get("maxSize"),d)],y=n.getDataExtent(a),v=t.get("min"),m=t.get("max");null==v&&(v=Math.min(y[0],0)),null==m&&(m=y[1]);var x=t.get("funnelAlign"),_=t.get("gap"),b=(("horizontal"===u?d:c)-_*(n.count()-1))/n.count(),w=function(t,e){if("horizontal"===u){var i=n.get(a,t)||0,o=Le(i,[v,m],f,!0),r=void 0;switch(x){case"top":r=g;break;case"center":r=g+(c-o)/2;break;case"bottom":r=g+(c-o)}return[[e,r],[e,r+o]]}var s,l=n.get(a,t)||0,h=Le(l,[v,m],f,!0);switch(x){case"left":s=p;break;case"center":s=p+(d-h)/2;break;case"right":s=p+d-h}return[[s,e],[s+h,e]]};"ascending"===o&&(b=-b,_=-_,"horizontal"===u?p+=d:g+=c,h=h.reverse());for(var S=0;S<h.length;S++){var I=h[S],M=h[S+1],C=n.getItemModel(I);if("horizontal"===u){var L=C.get(["itemStyle","width"]);null==L?L=b:(L=s(L,d),"ascending"===o&&(L=-L));var T=w(I,p),A=w(M,p+L);p+=L+_,n.setItemLayout(I,{points:T.concat(A.slice().reverse())})}else{var D=C.get(["itemStyle","height"]);null==D?D=b:(D=s(D,c),"ascending"===o&&(D=-D));T=w(I,g),A=w(M,g+D);g+=D+_,n.setItemLayout(I,{points:T.concat(A.slice().reverse())})}}!function(t){var e=t.hostModel.get("orient");t.each(function(n){var a,i,o,r,s=t.getItemModel(n),l=s.getModel("label").get("position"),u=s.getModel("labelLine"),d=t.getItemLayout(n),c=d.points,h="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(h)"insideLeft"===l?(i=(c[0][0]+c[3][0])/2+5,o=(c[0][1]+c[3][1])/2,a="left"):"insideRight"===l?(i=(c[1][0]+c[2][0])/2-5,o=(c[1][1]+c[2][1])/2,a="right"):(i=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,o=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,a="center"),r=[[i,o],[i,o]];else{var p=void 0,g=void 0,f=void 0,y=void 0,v=u.get("length");"left"===l?(p=(c[3][0]+c[0][0])/2,g=(c[3][1]+c[0][1])/2,i=(f=p-v)-5,a="right"):"right"===l?(p=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,i=(f=p+v)+5,a="left"):"top"===l?(p=(c[3][0]+c[0][0])/2,o=(y=(g=(c[3][1]+c[0][1])/2)-v)-5,a="center"):"bottom"===l?(p=(c[1][0]+c[2][0])/2,o=(y=(g=(c[1][1]+c[2][1])/2)+v)+5,a="center"):"rightTop"===l?(p="horizontal"===e?c[3][0]:c[1][0],g="horizontal"===e?c[3][1]:c[1][1],"horizontal"===e?(o=(y=g-v)-5,a="center"):(i=(f=p+v)+5,a="top")):"rightBottom"===l?(p=c[2][0],g=c[2][1],"horizontal"===e?(o=(y=g+v)+5,a="center"):(i=(f=p+v)+5,a="bottom")):"leftTop"===l?(p=c[0][0],g="horizontal"===e?c[0][1]:c[1][1],"horizontal"===e?(o=(y=g-v)-5,a="center"):(i=(f=p-v)-5,a="right")):"leftBottom"===l?(p="horizontal"===e?c[1][0]:c[3][0],g="horizontal"===e?c[1][1]:c[2][1],"horizontal"===e?(o=(y=g+v)+5,a="center"):(i=(f=p-v)-5,a="right")):(p=(c[1][0]+c[2][0])/2,g=(c[1][1]+c[2][1])/2,"horizontal"===e?(o=(y=g+v)+5,a="center"):(i=(f=p+v)+5,a="left")),"horizontal"===e?i=f=p:o=y=g,r=[[p,g],[f,y]]}d.label={linePoints:r,x:i,y:o,verticalAlign:"middle",textAlign:a,inside:h}})}(n)})}var ku=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new yt,n._initialized=!1,n}return ft(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,n,a){this._progressiveEls=null;var i=this._dataGroup,o=t.getData(),r=this._data,s=t.coordinateSystem,l=s.dimensions,u=zu(t);if(o.diff(r).add(function(t){Ou(Ru(o,i,t,l,s),o,t,u)}).update(function(e,n){var a=r.getItemGraphicEl(n),i=Eu(o,e,l,s);o.setItemGraphicEl(e,a),w(a,{shape:{points:i}},t,e),Xe(a),Ou(a,o,e,u)}).remove(function(t){var e=r.getItemGraphicEl(t);i.remove(e)}).execute(),!this._initialized){this._initialized=!0;var d=function(t,e,n){var a=t.model,i=t.getRect(),o=new ce({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),r="horizontal"===a.get("layout")?"width":"height";return o.setShape(r,0),_(o,{shape:{width:i.width,height:i.height}},e,n),o}(s,t,function(){setTimeout(function(){i.removeClipPath()})});i.setClipPath(d)}this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,n){for(var a=e.getData(),i=e.coordinateSystem,o=i.dimensions,r=zu(e),s=this._progressiveEls=[],l=t.start;l<t.end;l++){var u=Ru(a,this._dataGroup,l,o,i);u.incremental=!0,Ou(u,a,l,r),s.push(u)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(bt);function Eu(t,e,n,a){for(var i=[],o=0;o<n.length;o++){var r=n[o],s=t.get(t.mapDimension(r),e);Vu(s,a.getAxis(r).type)||i.push(a.dataToPoint(s,r))}return i}function Ru(t,e,n,a,i){var o=Eu(t,n,a,i),r=new rn({shape:{points:o},z2:10});return e.add(r),t.setItemGraphicEl(n,r),r}function zu(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),e=un(e),dn(e)&&(e=0),{smooth:e}}function Ou(t,e,n,a){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",a.smooth);var i=e.getItemModel(n),o=i.getModel("emphasis");Dt(t,i,"lineStyle"),Kt(t,o.get("focus"),o.get("blurScope"),o.get("disabled"))}function Vu(t,e){return"category"===e?null==t:null==t||isNaN(t)}var Bu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return ft(e,t),e.prototype.getInitialData=function(t,e){return Be(null,this,{useEncodeDefaulter:Qt(Gu,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,n=this.getData(),a=[];return e.eachActiveState(n,function(e,i){t===e&&a.push(n.getRawIndex(i))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Vt);function Gu(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return l(e.dimensions,function(t){var e=+t.replace("dim","");n[t]=e}),n}}var Wu=["lineStyle","opacity"],Fu={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,a={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){n.eachActiveState(e,function(t,n){var i=a[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(n).get(Wu,!0);null!=o&&(i=o)}e.ensureUniqueItemVisual(n,"style").opacity=i},t.start,t.end)}}}};function Yu(t){!function(t){if(t.parallel)return;var e=!1;l(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}(t),function(t){var e=Ut(t.parallelAxis);l(e,function(e){if(ct(e)){var n=e.parallelIndex||0,a=Ut(t.parallel)[n];a&&a.parallelAxisDefault&&cn(e,a.parallelAxisDefault,!1)}})}(t)}var Uu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},l(Hu,function(t,e){n.getZr().on(e,this._handlers[e]=Qt(t,this))},this)),hn(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){pn(this,"_throttledDispatchExpand"),l(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(R({type:"parallelAxisExpand"},t))},e.type="parallel",e}(gn),Hu={mousedown:function(t){Xu(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(Xu(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==a.behavior&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&Xu(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),a=n.behavior;"jump"===a&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===a?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===a?null:{duration:0}})}}};function Xu(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var Zu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&cn(e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){l(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=d(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);l(n,function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(fn),ju=function(t){function e(e,n,a,i,o){var r=t.call(this,e,n,a)||this;return r.type=i||"value",r.axisIndex=o,r}return ft(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}(yn),qu=l,Ku=Math.min,$u=Math.max,Qu=Math.floor,Ju=Math.ceil,td=tn,ed=Math.PI,nd=function(){function t(t,e,n){this.type="parallel",this._axesMap=Yt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var a=t.dimensions,i=t.parallelAxisIndex;qu(a,function(t,n){var a=i[n],o=e.getComponent("parallelAxis",a),r=this._axesMap.set(t,new ju(t,vn(o),[0,0],o.get("type"),a)),s="category"===r.type;r.onBand=s&&o.get("boundaryGap"),r.inverse=o.get("inverse"),o.axis=r,r.model=o,r.coordinateSystem=o.coordinateSystem=this},this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,a=e.layoutBase,i=e.pixelDimIndex,o=t[1-i],r=t[i];return o>=n&&o<=n+e.axisLength&&r>=a&&r<=a+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var a=n.getData();qu(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(a,a.mapDimension(t)),mn(e.scale,e.model)},this)}},this)},t.prototype.resize=function(t,e){var n=Bt(t,e).refContainer;this._rect=Gt(t.getBoxLayoutParams(),n),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,n=this._rect,a=["x","y"],i=["width","height"],o=e.get("layout"),r="horizontal"===o?0:1,s=n[i[r]],l=[0,s],u=this.dimensions.length,d=ad(e.get("axisExpandWidth"),l),c=ad(e.get("axisExpandCount")||0,[0,u]),h=e.get("axisExpandable")&&u>3&&u>c&&c>1&&d>0&&s>0,p=e.get("axisExpandWindow");p?(t=ad(p[1]-p[0],l),p[1]=p[0]+t):(t=ad(d*(c-1),l),(p=[d*(e.get("axisExpandCenter")||Qu(u/2))-t/2])[1]=p[0]+t);var g=(s-t)/(u-c);g<3&&(g=0);var f=[Qu(td(p[0]/d,1))+1,Ju(td(p[1]/d,1))-1],y=g/d*p[0];return{layout:o,pixelDimIndex:r,layoutBase:n[a[r]],layoutLength:s,axisBase:n[a[1-r]],axisLength:n[i[1-r]],axisExpandable:h,axisExpandWidth:d,axisCollapseWidth:g,axisExpandWindow:p,axisCount:u,winInnerIndices:f,axisExpandWindow0Pos:y}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,a=this._makeLayoutInfo(),i=a.layout;e.each(function(t){var e=[0,a.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),qu(n,function(e,n){var o=(a.axisExpandable?od:id)(n,a),r={horizontal:{x:o.position,y:a.axisLength},vertical:{x:0,y:o.position}},s={horizontal:ed/2,vertical:0},l=[r[i].x+t.x,r[i].y+t.y],u=s[i],d=te();xn(d,d,u),Jt(d,d,l),this._axesLayout[e]={position:l,rotation:u,transform:d,axisNameAvailableWidth:o.axisNameAvailableWidth,axisLabelShow:o.axisLabelShow,nameTruncateMaxWidth:o.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,n,a){null==n&&(n=0),null==a&&(a=t.count());var i=this._axesMap,o=this.dimensions,r=[],s=[];l(o,function(e){r.push(t.mapDimension(e)),s.push(i.get(e).model)});for(var u=this.hasAxisBrushed(),d=n;d<a;d++){var c=void 0;if(u){c="active";for(var h=t.getValues(r,d),p=0,g=o.length;p<g;p++){if("inactive"===s[p].getActiveState(h[p])){c="inactive";break}}}else c="normal";e(c,d)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,a=0,i=t.length;a<i;a++)"normal"!==e.get(t[a]).model.getActiveState()&&(n=!0);return n},t.prototype.axisCoordToPoint=function(t,e){var n=this._axesLayout[e];return _n([t,0],n.transform)},t.prototype.getAxisLayout=function(t){return at(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,a=e.axisExpandWindow.slice(),i=a[1]-a[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:a};var r,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",u=e.axisCollapseWidth,d=this._model.get("axisExpandSlideTriggerArea"),c=null!=d[0];if(u)c&&u&&s<i*d[0]?(l="jump",r=s-i*d[2]):c&&u&&s>i*(1-d[0])?(l="jump",r=s-i*(1-d[2])):(r=s-i*d[1])>=0&&(r=s-i*(1-d[1]))<=0&&(r=0),(r*=e.axisExpandWidth/u)?bn(r,a,o,"all"):l="none";else{var h=a[1]-a[0];(a=[$u(0,o[1]*s/h-h/2)])[1]=Ku(o[1],a[0]+h),a[0]=a[1]-h}return{axisExpandWindow:a,behavior:l}},t}();function ad(t,e){return Ku($u(t,e[0]),e[1])}function id(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function od(t,e){var n,a,i=e.layoutLength,o=e.axisExpandWidth,r=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,u=s,d=!1;return t<l[0]?(n=t*s,a=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],u=o,d=!0):(n=i-(r-1-t)*s,a=s),{position:n,axisNameAvailableWidth:u,axisLabelShow:d,nameTruncateMaxWidth:a}}var rd={create:function(t,e){var n=[];return t.eachComponent("parallel",function(a,i){var o=new nd(a,t,e);o.name="parallel_"+i,o.resize(a,e),a.coordinateSystem=o,o.model=a,n.push(o)}),t.eachSeries(function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",wn).models[0];t.coordinateSystem=e.coordinateSystem}}),n}},sd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return ft(e,t),e.prototype.getAreaSelectStyle=function(){return re([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=at(t);if(e)for(var n=e.length-1;n>=0;n--)Sn(e[n])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var a=0,i=e.length;a<i;a++)if(e[a][0]<=t&&t<=e[a][1])return"active";return"inactive"},e}(fn);Ve(sd,In);var ld=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ft(n,t),n.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new Mn(n.getZr())).on("brush",Qt(this._onBrush,this))},n.prototype.render=function(t,e,n,a){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,a)){this.axisModel=t,this.api=n,this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new yt,this.group.add(this._axisGroup),t.get("show")){var o=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),r=o.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,u=t.axis.dim,d=r.getAxisLayout(u),c=R({strokeContainThreshold:l},d),h=new Cn(t,n,c);h.build(),this._axisGroup.add(h.group),this._refreshBrushController(c,s,t,o,l,n),Ln(i,this._axisGroup,t)}}},n.prototype._refreshBrushController=function(t,n,a,i,o,r){var s=a.axis.getExtent(),l=s[1]-s[0],u=Math.min(30,.1*Math.abs(l)),d=e.create({x:s[0],y:-o/2,width:l,height:o});d.x-=u,d.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Dn(d),isTargetByCursor:An(d,r,i),getLinearBrushOtherExtent:Tn(d,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return A(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}(a))},n.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,a=n.axis,i=A(e,function(t){return[a.coordToData(t.range[0],!0),a.coordToData(t.range[1],!0)]});(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:i})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(gn);var ud={type:"axisAreaSelect",event:"axisAreaSelected"};var dd={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function cd(t){t.registerComponentView(Uu),t.registerComponentModel(Zu),t.registerCoordinateSystem("parallel",rd),t.registerPreprocessor(Yu),t.registerComponentModel(sd),t.registerComponentView(ld),Pn(t,"parallel",sd,dd),function(t){t.registerAction(ud,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),t.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})}(t)}var hd=function(){return function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}}(),pd=function(t){function e(e){return t.call(this,e)||this}return ft(e,t),e.prototype.getDefaultShape=function(){return new hd},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){kn(this)},e.prototype.downplay=function(){En(this)},e}(W),gd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new yt,n._focusAdjacencyDisabled=!1,n}return ft(e,t),e.prototype.init=function(t,e){this._controller=new vt(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var a=this,i=t.getGraph(),o=this._mainGroup,s=t.layoutInfo,l=s.width,u=s.height,d=t.getData(),c=t.getData("edge"),h=t.get("orient");this._model=t,o.removeAll(),o.x=s.x,o.y=s.y,this._updateViewCoordSys(t,n),_t(t,n,o,this._controller,this._controllerHost,null),i.eachEdge(function(e){var n=new pd,a=r(n);a.dataIndex=e.dataIndex,a.seriesIndex=t.seriesIndex,a.dataType="edge";var i,s,d,p,g,f,y,v,m=e.getModel(),x=m.getModel("lineStyle"),_=x.get("curveness"),b=e.node1.getLayout(),w=e.node1.getModel(),S=w.get("localX"),I=w.get("localY"),M=e.node2.getLayout(),C=e.node2.getModel(),L=C.get("localX"),T=C.get("localY"),A=e.getLayout();n.shape.extent=Math.max(1,A.dy),n.shape.orient=h,"vertical"===h?(i=(null!=S?S*l:b.x)+A.sy,s=(null!=I?I*u:b.y)+b.dy,d=(null!=L?L*l:M.x)+A.ty,g=i,f=s*(1-_)+(p=null!=T?T*u:M.y)*_,y=d,v=s*_+p*(1-_)):(i=(null!=S?S*l:b.x)+b.dx,s=(null!=I?I*u:b.y)+A.sy,g=i*(1-_)+(d=null!=L?L*l:M.x)*_,f=s,y=i*_+d*(1-_),v=p=(null!=T?T*u:M.y)+A.ty),n.setShape({x1:i,y1:s,x2:d,y2:p,cpx1:g,cpy1:f,cpx2:y,cpy2:v}),n.useStyle(x.getItemStyle()),fd(n.style,h,e);var D=""+m.get("value"),P=le(m,"edgeLabel");se(n,P,{labelFetcher:{getFormattedLabel:function(e,n,a,i,o,r){return t.getFormattedLabel(e,n,"edge",i,ve(o,P.normal&&P.normal.get("formatter"),D),r)}},labelDataIndex:e.dataIndex,defaultText:D}),n.setTextConfig({position:"inside"});var N=m.getModel("emphasis");Dt(n,m,"lineStyle",function(t){var n=t.getItemStyle();return fd(n,h,e),n}),o.add(n),c.setItemGraphicEl(e.dataIndex,n);var k=N.get("focus");Kt(n,"adjacency"===k?e.getAdjacentDataIndices():"trajectory"===k?e.getTrajectoryDataIndices():k,N.get("blurScope"),N.get("disabled"))}),i.eachNode(function(e){var n=e.getLayout(),a=e.getModel(),i=a.get("localX"),s=a.get("localY"),c=a.getModel("emphasis"),h=a.get(["itemStyle","borderRadius"])||0,p=new ce({shape:{x:null!=i?i*l:n.x,y:null!=s?s*u:n.y,width:n.dx,height:n.dy,r:h},style:a.getModel("itemStyle").getItemStyle(),z2:10});se(p,le(a),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(e,n,"node")}},labelDataIndex:e.dataIndex,defaultText:e.id}),p.disableLabelAnimation=!0,p.setStyle("fill",e.getVisual("color")),p.setStyle("decal",e.getVisual("style").decal),Dt(p,a),o.add(p),d.setItemGraphicEl(e.dataIndex,p),r(p).dataType="node";var g=c.get("focus");Kt(p,"adjacency"===g?e.getAdjacentDataIndices():"trajectory"===g?e.getTrajectoryDataIndices():g,c.get("blurScope"),c.get("disabled"))}),d.eachItemGraphicEl(function(e,i){d.getItemModel(i).get("draggable")&&(e.drift=function(e,o){a._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=o,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(i),localX:this.shape.x/l,localY:this.shape.y/u})},e.ondragend=function(){a._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")}),!this._data&&t.isAnimationEnabled()&&o.setClipPath(function(t,e,n){var a=new ce({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return _(a,{shape:{width:t.width+20}},e,n),a}(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._updateViewCoordSys=function(t,e){var n=t.layoutInfo,a=n.width,i=n.height,o=t.coordinateSystem=new xt(null,{api:e,ecModel:t.ecModel});o.zoomLimit=t.get("scaleLimit"),o.setBoundingRect(0,0,a,i),o.setCenter(t.get("center")),o.setZoom(t.get("zoom")),this._controllerHost.target.attr({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY})},e.type="sankey",e}(bt);function fd(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var a=n.node1.getVisual("color"),i=n.node2.getVisual("color");N(a)&&N(i)&&(t.fill=new Ze(0,0,+("horizontal"===e),+("vertical"===e),[{color:a,offset:0},{color:i,offset:1}]))}}var yd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],a=t.data||t.nodes||[],i=t.levels||[];this.levelModels=[];for(var o=this.levelModels,r=0;r<i.length;r++)null!=i[r].depth&&i[r].depth>=0&&(o[i[r].depth]=new zt(i[r],this,e));return pu(a,n,this,!0,function(t,e){t.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,a=n.getData().getItemLayout(e);if(a){var i=a.depth,o=n.levelModels[i];o&&(t.parentModel=o)}return t}),e.wrapMethod("getItemModel",function(t,e){var n=t.parentModel,a=n.getGraph().getEdgeByIndex(e).node1.getLayout();if(a){var i=a.depth,o=n.levelModels[i];o&&(t.parentModel=o)}return t})}).data},e.prototype.setNodePosition=function(t,e){var n=(this.option.data||this.option.nodes)[t];n.localX=e[0],n.localY=e[1]},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function a(t){return isNaN(t)||null==t}if("edge"===n){var i=this.getDataParams(t,n),o=i.data,r=i.value,s=o.source+" -- "+o.target;return Ot("nameValue",{name:s,value:r,noValue:a(r)})}var l=this.getGraph().getNodeByIndex(t).getLayout().value,u=this.getDataParams(t,n).data.name;return Ot("nameValue",{name:null!=u?u+"":null,value:l,noValue:a(l)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var a=t.prototype.getDataParams.call(this,e,n);if(null==a.value&&"node"===n){var i=this.getGraph().getNodeByIndex(e).getLayout().value;a.value=i}return a},e.type="series.sankey",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:wt.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:wt.color.primary}},animationEasing:"linear",animationDuration:1e3},e}(Vt);function vd(t,e){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),a=t.get("nodeGap"),i=Bt(t,e).refContainer,o=Gt(t.getBoxLayoutParams(),i);t.layoutInfo=o;var r=o.width,s=o.height,u=t.getGraph(),c=u.nodes,h=u.edges;!function(t){l(t,function(t){var e=Ld(t.outEdges,Cd),n=Ld(t.inEdges,Cd),a=t.getValue()||0,i=Math.max(e,n,a);t.setLayout({value:i},!0)})}(c),function(t,e,n,a,i,o,r,s,u){(function(t,e,n,a,i,o,r){for(var s=[],u=[],d=[],c=[],h=0,p=0;p<e.length;p++)s[p]=1;for(p=0;p<t.length;p++)u[p]=t[p].inEdges.length,0===u[p]&&d.push(t[p]);var g=-1;for(;d.length;){for(var f=0;f<d.length;f++){var y=d[f],v=y.hostGraph.data.getRawDataItem(y.dataIndex),m=null!=v.depth&&v.depth>=0;m&&v.depth>g&&(g=v.depth),y.setLayout({depth:m?v.depth:h},!0),"vertical"===o?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var x=0;x<y.outEdges.length;x++){var _=y.outEdges[x];s[e.indexOf(_)]=0;var b=_.node2;0===--u[t.indexOf(b)]&&c.indexOf(b)<0&&c.push(b)}}++h,d=c,c=[]}for(p=0;p<s.length;p++)if(1===s[p])throw new Error("Sankey is a DAG, the original data has cycle!");var w=g>h-1?g:h-1;r&&"left"!==r&&function(t,e,n,a){if("right"===e){for(var i=[],o=t,r=0;o.length;){for(var s=0;s<o.length;s++){var u=o[s];u.setLayout({skNodeHeight:r},!0);for(var d=0;d<u.inEdges.length;d++){var c=u.inEdges[d];i.indexOf(c.node1)<0&&i.push(c.node1)}}o=i,i=[],++r}l(t,function(t){md(t)||t.setLayout({depth:Math.max(0,a-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&function(t,e){l(t,function(t){md(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}(t,a)}(t,r,0,w);var S="vertical"===o?(i-n)/w:(a-n)/w;!function(t,e,n){l(t,function(t){var a=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:a},!0):t.setLayout({x:a},!0)})}(t,S,o)})(t,e,n,i,o,s,u),function(t,e,n,a,i,o,r){var s=function(t,e){var n=[],a="vertical"===e?"y":"x",i=Rn(t,function(t){return t.getLayout()[a]});return i.keys.sort(function(t,e){return t-e}),l(i.keys,function(t){n.push(i.buckets.get(t))}),n}(t,r);(function(t,e,n,a,i,o){var r=1/0;l(t,function(t){var e=t.length,s=0;l(t,function(t){s+=t.getLayout().value});var u="vertical"===o?(a-(e-1)*i)/s:(n-(e-1)*i)/s;u<r&&(r=u)}),l(t,function(t){l(t,function(t,e){var n=t.getLayout().value*r;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),l(e,function(t){var e=+t.getValue()*r;t.setLayout({dy:e},!0)})})(s,e,n,a,i,r),xd(s,i,n,a,r);for(var u=1;o>0;o--)_d(s,u*=.99,r),xd(s,i,n,a,r),Td(s,u,r),xd(s,i,n,a,r)}(t,e,o,i,a,r,s),function(t,e){var n="vertical"===e?"x":"y";l(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),l(t,function(t){var e=0,n=0;l(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),l(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,s)}(c,h,n,a,r,s,0!==d(c,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))})}function md(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function xd(t,e,n,a,i){var o="vertical"===i?"x":"y";l(t,function(t){var r,s,l;t.sort(function(t,e){return t.getLayout()[o]-e.getLayout()[o]});for(var u=0,d=t.length,c="vertical"===i?"dx":"dy",h=0;h<d;h++)(l=u-(s=t[h]).getLayout()[o])>0&&(r=s.getLayout()[o]+l,"vertical"===i?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),u=s.getLayout()[o]+s.getLayout()[c]+e;if((l=u-e-("vertical"===i?a:n))>0){r=s.getLayout()[o]-l,"vertical"===i?s.setLayout({x:r},!0):s.setLayout({y:r},!0),u=r;for(h=d-2;h>=0;--h)(l=(s=t[h]).getLayout()[o]+s.getLayout()[c]+e-u)>0&&(r=s.getLayout()[o]-l,"vertical"===i?s.setLayout({x:r},!0):s.setLayout({y:r},!0)),u=s.getLayout()[o]}})}function _d(t,e,n){l(t.slice().reverse(),function(t){l(t,function(t){if(t.outEdges.length){var a=Ld(t.outEdges,bd,n)/Ld(t.outEdges,Cd);if(isNaN(a)){var i=t.outEdges.length;a=i?Ld(t.outEdges,wd,n)/i:0}if("vertical"===n){var o=t.getLayout().x+(a-Md(t,n))*e;t.setLayout({x:o},!0)}else{var r=t.getLayout().y+(a-Md(t,n))*e;t.setLayout({y:r},!0)}}})})}function bd(t,e){return Md(t.node2,e)*t.getValue()}function wd(t,e){return Md(t.node2,e)}function Sd(t,e){return Md(t.node1,e)*t.getValue()}function Id(t,e){return Md(t.node1,e)}function Md(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function Cd(t){return t.getValue()}function Ld(t,e,n){for(var a=0,i=t.length,o=-1;++o<i;){var r=+e(t[o],n);isNaN(r)||(a+=r)}return a}function Td(t,e,n){l(t,function(t){l(t,function(t){if(t.inEdges.length){var a=Ld(t.inEdges,Sd,n)/Ld(t.inEdges,Cd);if(isNaN(a)){var i=t.inEdges.length;a=i?Ld(t.inEdges,Id,n)/i:0}if("vertical"===n){var o=t.getLayout().x+(a-Md(t,n))*e;t.setLayout({x:o},!0)}else{var r=t.getLayout().y+(a-Md(t,n))*e;t.setLayout({y:r},!0)}}})})}function Ad(t){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes,a=e.edges;if(n.length){var i=1/0,o=-1/0;l(n,function(t){var e=t.getLayout().value;e<i&&(i=e),e>o&&(o=e)}),l(n,function(e){var n=new ge({type:"color",mappingMethod:"linear",dataExtent:[i,o],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),a=e.getModel().get(["itemStyle","color"]);null!=a?(e.setVisual("color",a),e.setVisual("style",{fill:a})):(e.setVisual("color",n),e.setVisual("style",{fill:n}))})}a.length&&l(a,function(t){var e=t.getModel().get("lineStyle");t.setVisual("style",e)})})}var Dd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return ft(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:wt.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:wt.color.shadow}},animationDuration:800},e}(Vt);Ve(Dd,zn,!0);var Pd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){var a=t.getData(),i=this.group,o=this._data;this._data||i.removeAll();var r="horizontal"===t.get("layout")?1:0;a.diff(o).add(function(t){if(a.hasValue(t)){var e=Ed(a.getItemLayout(t),a,t,r,!0);a.setItemGraphicEl(t,e),i.add(e)}}).update(function(t,e){var n=o.getItemGraphicEl(e);if(a.hasValue(t)){var s=a.getItemLayout(t);n?(Xe(n),Rd(s,n,a,t)):n=Ed(s,a,t,r),i.add(n),a.setItemGraphicEl(t,n)}else i.remove(n)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&i.remove(e)}).execute(),this._data=a},e.prototype.remove=function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},e.type="boxplot",e}(bt),Nd=function(){return function(){}}(),kd=function(t){function e(e){var n=t.call(this,e)||this;return n.type="boxplotBoxPath",n}return ft(e,t),e.prototype.getDefaultShape=function(){return new Nd},e.prototype.buildPath=function(t,e){var n=e.points,a=0;for(t.moveTo(n[a][0],n[a][1]),a++;a<4;a++)t.lineTo(n[a][0],n[a][1]);for(t.closePath();a<n.length;a++)t.moveTo(n[a][0],n[a][1]),a++,t.lineTo(n[a][0],n[a][1])},e}(W);function Ed(t,e,n,a,i){var o=t.ends,r=new kd({shape:{points:i?zd(o,a,t):o}});return Rd(t,r,e,n,i),r}function Rd(t,e,n,a,i){var o=n.hostModel;(0,On[i?"initProps":"updateProps"])(e,{shape:{points:t.ends}},o,a),e.useStyle(n.getItemVisual(a,"style")),e.style.strokeNoScale=!0,e.z2=100;var r=n.getItemModel(a),s=r.getModel("emphasis");Dt(e,r),Kt(e,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function zd(t,e,n){return A(t,function(t){return(t=t.slice())[e]=n.initBaseline,t})}var Od=l;function Vd(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var a=t.getBaseAxis(),i=b(n,a);i<0&&(i=n.length,n[i]=a,e[i]={axis:a,seriesModels:[]}),e[i].seriesModels.push(t)}),e}(t);Od(e,function(t){var e=t.seriesModels;e.length&&(!function(t){var e,n=t.axis,a=t.seriesModels,i=a.length,o=t.boxWidthList=[],r=t.boxOffsetList=[],l=[];if("category"===n.type)e=n.getBandWidth();else{var u=0;Od(a,function(t){u=Math.max(u,t.getData().count())});var d=n.getExtent();e=Math.abs(d[1]-d[0])/u}Od(a,function(t){var n=t.get("boxWidth");dt(n)||(n=[n,n]),l.push([s(n[0],e)||0,s(n[1],e)||0])});var c=.8*e-2,h=c/i*.3,p=(c-h*(i-1))/i,g=p/2-c/2;Od(a,function(t,e){r.push(g),g+=h+p,o.push(Math.min(Math.max(p,l[e][0]),l[e][1]))})}(t),Od(e,function(e,n){!function(t,e,n){var a=t.coordinateSystem,i=t.getData(),o=n/2,r="horizontal"===t.get("layout")?0:1,s=1-r,l=["x","y"],u=i.mapDimension(l[r]),d=i.mapDimensionsAll(l[s]);if(null==u||d.length<5)return;for(var c=0;c<i.count();c++){var h=i.get(u,c),p=x(h,d[2],c),g=x(h,d[0],c),f=x(h,d[1],c),y=x(h,d[3],c),v=x(h,d[4],c),m=[];_(m,f,!1),_(m,y,!0),m.push(g,f,v,y),b(m,g),b(m,v),b(m,p),i.setItemLayout(c,{initBaseline:p[s],ends:m})}function x(t,n,o){var l,u=i.get(n,o),d=[];return d[r]=t,d[s]=u,isNaN(t)||isNaN(u)?l=[NaN,NaN]:(l=a.dataToPoint(d))[r]+=e,l}function _(t,e,n){var a=e.slice(),i=e.slice();a[r]+=o,i[r]-=o,n?t.push(a,i):t.push(i,a)}function b(t,e){var n=e.slice(),a=e.slice();n[r]-=o,a[r]+=o,t.push(n,a)}}(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}var Bd={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Bn){Gn("")}var n=function(t,e){for(var n=[],a=[],o=(e=e||{}).boundIQR,r="none"===o||0===o,s=0;s<t.length;s++){var l=Sn(t[s].slice()),u=Vn(l,.25),d=Vn(l,.5),c=Vn(l,.75),h=l[0],p=l[l.length-1],g=(null==o?1.5:o)*(c-u),f=r?h:Math.max(h,u-g),y=r?p:Math.min(p,c+g),v=e.itemNameFormatter,m=i(v)?v({value:s}):N(v)?v.replace("{value}",s+""):s+"";n.push([m,f,u,d,c,y]);for(var x=0;x<l.length;x++){var _=l[x];if(_<f||_>y){var b=[m,_];a.push(b)}}}return{boxData:n,outliers:a}}(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}};function Gd(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}var Wd=function(t){function e(e,n){var a=t.call(this)||this,i=new St(e,n),o=new yt;return a.add(i),a.add(o),a.updateData(e,n),a}return ft(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,a=t.rippleNumber,i=this.childAt(1),o=0;o<a;o++){var r=nn(e,-1,-1,2,2,n);r.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-o/a*t.period+t.effectOffset;r.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(s).start(),r.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),i.add(r)}Gd(i,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],i=0;i<a.length;i++){var o=a[i];if(e[o]!==t[o])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}Gd(n,t)},e.prototype.highlight=function(){kn(this)},e.prototype.downplay=function(){En(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,e){var n=this,a=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1),o=t.getItemModel(e),r=t.getItemVisual(e,"symbol"),s=Wn(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"style"),u=l&&l.fill,d=o.getModel("emphasis");i.setScale(s),i.traverse(function(t){t.setStyle("fill",u)});var c=Fn(t.getItemVisual(e,"symbolOffset"),s);c&&(i.x=c[0],i.y=c[1]);var h=t.getItemVisual(e,"symbolRotate");i.rotation=(h||0)*Math.PI/180||0;var p={};p.showEffectOn=a.get("showEffectOn"),p.rippleScale=o.get(["rippleEffect","scale"]),p.brushType=o.get(["rippleEffect","brushType"]),p.period=1e3*o.get(["rippleEffect","period"]),p.effectOffset=e/t.count(),p.z=a.getShallow("z")||0,p.zlevel=a.getShallow("zlevel")||0,p.symbolType=r,p.color=u,p.rippleEffectColor=o.get(["rippleEffect","color"]),p.rippleNumber=o.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==p.showEffectOn&&n.startEffectAnimation(p):"normal"===t&&"render"!==p.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=p,Kt(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(yt),Fd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(){this._symbolDraw=new ke(Wd)},e.prototype.render=function(t,e,n){var a=t.getData(),i=this._symbolDraw;i.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(i.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,e,n){var a=t.getData();this.group.dirty();var i=Yn("").reset(t,e,n);i.progress&&i.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=Un(e.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(bt),Yd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return ft(e,t),e.prototype.getInitialData=function(t,e){return Be(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Vt);var Ud=function(t){function e(e,n,a){var i=t.call(this)||this;return i.add(i.createLine(e,n,a)),i._updateEffectSymbol(e,n),i}return ft(e,t),e.prototype.createLine=function(t,e,n){return new Hn(t,e,n)},e.prototype._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),a=n.get("symbolSize"),i=n.get("symbol");dt(a)||(a=[a,a]);var o=t.getItemVisual(e,"style"),r=n.get("color")||o&&o.stroke,s=this.childAt(1);this._symbolType!==i&&(this.remove(s),(s=nn(i,-.5,-.5,1,1,r)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",r),s.setStyle(n.getItemStyle(["color"])),s.scaleX=a[0],s.scaleY=a[1],s.setColor(r),this._symbolType=i,this._symbolScale=a,this._updateEffectAnimation(t,n,e))},e.prototype._updateEffectAnimation=function(t,e,n){var a=this.childAt(1);if(a){var o=t.getItemLayout(n),r=1e3*e.get("period"),s=e.get("loop"),l=e.get("roundTrip"),u=e.get("constantSpeed"),d=fe(e.get("delay"),function(e){return e/t.count()*r/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),u>0&&(r=this._getLineLength(a)/u*1e3),r!==this._period||s!==this._loop||l!==this._roundTrip){a.stopAnimation();var c=void 0;c=i(d)?d(n):d,a.__t>0&&(c=-r*a.__t),this._animateSymbol(a,r,c,s,l)}this._period=r,this._loop=s,this._roundTrip=l}},e.prototype._animateSymbol=function(t,e,n,a,i){if(e>0){t.__t=0;var o=this,r=t.animate("",a).when(i?2*e:e,{__t:i?2:1}).delay(n).during(function(){o._updateSymbolPosition(t)});a||r.done(function(){o.remove(t)}),r.start()}},e.prototype._getLineLength=function(t){return Xn(t.__p1,t.__cp1)+Xn(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,a=t.__cp1,i=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],r=o.slice(),s=Pe,l=Zn;o[0]=s(e[0],a[0],n[0],i),o[1]=s(e[1],a[1],n[1],i);var u=t.__t<1?l(e[0],a[0],n[0],i):l(n[0],a[0],e[0],1-i),d=t.__t<1?l(e[1],a[1],n[1],i):l(n[1],a[1],e[1],1-i);t.rotation=-Math.atan2(d,u)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*Xn(r,o),1===i&&(o[0]=r[0]+(o[0]-r[0])/2,o[1]=r[1]+(o[1]-r[1])/2)):1===t.__lastT?t.scaleY=2*Xn(e,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},e}(yt),Hd=function(t){function e(e,n,a){var i=t.call(this)||this;return i._createPolyline(e,n,a),i}return ft(e,t),e.prototype._createPolyline=function(t,e,n){var a=t.getItemLayout(e),i=new rn({shape:{points:a}});this.add(i),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var a=t.hostModel,i=this.childAt(0),o={shape:{points:t.getItemLayout(e)}};w(i,o,a,e),this._updateCommonStl(t,e,n)},e.prototype._updateCommonStl=function(t,e,n){var a=this.childAt(0),i=t.getItemModel(e),o=n&&n.emphasisLineStyle,r=n&&n.focus,s=n&&n.blurScope,l=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var u=i.getModel("emphasis");o=u.getModel("lineStyle").getLineStyle(),l=u.get("disabled"),r=u.get("focus"),s=u.get("blurScope")}a.useStyle(t.getItemVisual(e,"style")),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=o,Kt(this,r,s,l)},e.prototype.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},e}(yt),Xd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return ft(e,t),e.prototype.createLine=function(t,e,n){return new Hd(t,e,n)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],a=0,i=1;i<e.length;i++){var o=e[i-1],r=e[i];a+=Xn(o,r),n.push(a)}if(0!==a){for(i=0;i<n.length;i++)n[i]/=a;this._offsets=n,this._length=a}else this._length=0},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e=t.__t<1?t.__t:2-t.__t,n=this._points,a=this._offsets,i=n.length;if(a){var o,r=this._lastFrame;if(e<this._lastFramePercent){for(o=Math.min(r+1,i-1);o>=0&&!(a[o]<=e);o--);o=Math.min(o,i-2)}else{for(o=r;o<i&&!(a[o]>e);o++);o=Math.min(o-1,i-2)}var s=(e-a[o])/(a[o+1]-a[o]),l=n[o],u=n[o+1];t.x=l[0]*(1-s)+s*u[0],t.y=l[1]*(1-s)+s*u[1];var d=t.__t<1?u[0]-l[0]:l[0]-u[0],c=t.__t<1?u[1]-l[1]:l[1]-u[1];t.rotation=-Math.atan2(c,d)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},e}(Ud),Zd=function(){return function(){this.polyline=!1,this.curveness=0,this.segs=[]}}(),jd=function(t){function n(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return ft(n,t),n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:wt.color.neutral99,fill:null}},n.prototype.getDefaultShape=function(){return new Zd},n.prototype.buildPath=function(t,e){var n,a=e.segs,i=e.curveness;if(e.polyline)for(n=this._off;n<a.length;){var o=a[n++];if(o>0){t.moveTo(a[n++],a[n++]);for(var r=1;r<o;r++)t.lineTo(a[n++],a[n++])}}else for(n=this._off;n<a.length;){var s=a[n++],l=a[n++],u=a[n++],d=a[n++];if(t.moveTo(s,l),i>0){var c=(s+u)/2-(l-d)*i,h=(l+d)/2-(u-s)*i;t.quadraticCurveTo(c,h,u,d)}else t.lineTo(u,d)}this.incremental&&(this._off=n,this.notClear=!0)},n.prototype.findDataIndex=function(t,e){var n=this.shape,a=n.segs,i=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var r=0,s=0;s<a.length;){var l=a[s++];if(l>0)for(var u=a[s++],d=a[s++],c=1;c<l;c++){var h=a[s++],p=a[s++];if(jn(u,d,h,p,o,t,e))return r}r++}else for(r=0,s=0;s<a.length;){u=a[s++],d=a[s++],h=a[s++],p=a[s++];if(i>0){if(qn(u,d,(u+h)/2-(d-p)*i,(d+p)/2-(h-u)*i,h,p,o,t,e))return r}else if(jn(u,d,h,p,o,t,e))return r;r++}return-1},n.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),a=this.getBoundingRect();return t=n[0],e=n[1],a.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},n.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape.segs,a=1/0,i=1/0,o=-1/0,r=-1/0,s=0;s<n.length;){var l=n[s++],u=n[s++];a=Math.min(l,a),o=Math.max(l,o),i=Math.min(u,i),r=Math.max(u,r)}t=this._rect=new e(a,i,o,r)}return t},n}(W),qd=function(){function t(){this.group=new yt}return t.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(t,e){var n=this._newAdded[0],a=e.getLayout("linesPoints"),i=n&&n.shape.segs;if(i&&i.length<2e4){var o=i.length,r=new Float32Array(o+a.length);r.set(i),r.set(a,o),n.setShape({segs:r})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:a}),this._setCommon(s,e),s.__startIndex=t.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new jd({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},t.prototype._setCommon=function(t,e,n){var a=e.hostModel;t.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),t.useStyle(a.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var o=r(t);o.seriesIndex=a.seriesIndex,t.on("mousemove",function(e){o.dataIndex=null;var n=t.hoverDataIdx;n>0&&(o.dataIndex=n+t.__startIndex)})},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),Kd={seriesType:"lines",plan:Kn(),reset:function(t){var e=t.coordinateSystem;if(e){var n=t.get("polyline"),a=t.pipelineContext.large;return{progress:function(i,o){var r=[];if(a){var s=void 0,l=i.end-i.start;if(n){for(var u=0,d=i.start;d<i.end;d++)u+=t.getLineCoordsCount(d);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var c=0,h=[];for(d=i.start;d<i.end;d++){var p=t.getLineCoords(d,r);n&&(s[c++]=p);for(var g=0;g<p;g++)h=e.dataToPoint(r[g],!1,h),s[c++]=h[0],s[c++]=h[1]}o.setLayout("linesPoints",s)}else for(d=i.start;d<i.end;d++){var f=o.getItemModel(d),y=(p=t.getLineCoords(d,r),[]);if(n)for(var v=0;v<p;v++)y.push(e.dataToPoint(r[v]));else{y[0]=e.dataToPoint(r[0]),y[1]=e.dataToPoint(r[1]);var m=f.get(["lineStyle","curveness"]);+m&&(y[2]=[(y[0][0]+y[1][0])/2-(y[0][1]-y[1][1])*m,(y[0][1]+y[1][1])/2-(y[1][0]-y[0][0])*m])}o.setItemLayout(d,y)}}}}}},$d=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){var a=t.getData(),i=this._updateLineDraw(a,t),o=t.get("zlevel"),r=t.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&r>0&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})),i.updateData(a);var u=t.get("clip",!0)&&$n(t.coordinateSystem,!1,t);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var a=t.getData();this._updateLineDraw(a,t).incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,e,n){var a=t.getData(),i=t.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var o=Kd.reset(t,e,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,e){var n=this._lineDraw,a=this._showEffect(e),i=!!e.get("polyline"),o=e.pipelineContext.large;return n&&a===this._hasEffet&&i===this._isPolyline&&o===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=o?new qd:new Ee(i?a?Xd:Hd:a?Ud:Hn),this._hasEffet=a,this._isPolyline=i,this._isLargeDraw=o),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.type="lines",e}(bt),Qd="undefined"==typeof Uint32Array?Array:Uint32Array,Jd="undefined"==typeof Float64Array?Array:Float64Array;function tc(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=A(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),Qn([e,t[0],t[1]])}))}var ec=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return ft(e,t),e.prototype.init=function(e){e.data=e.data||[],tc(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(tc(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=It(this._flatCoords,e.flatCoords),this._flatCoordsOffset=It(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],a=this._flatCoordsOffset[2*t+1],i=0;i<a;i++)e[i]=e[i]||[],e[i][0]=this._flatCoords[n+2*i],e[i][1]=this._flatCoords[n+2*i+1];return a}var o=this._getCoordsFromItemModel(t);for(i=0;i<o.length;i++)e[i]=e[i]||[],e[i][0]=o[i][0],e[i][1]=o[i][1];return o.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),O(t[0])){for(var n=t.length,a=new Qd(n),i=new Jd(n),o=0,r=0,s=0,l=0;l<n;){s++;var u=t[l++];a[r++]=o+e,a[r++]=u;for(var d=0;d<u;d++){var c=t[l++],h=t[l++];i[o++]=c,i[o++]=h}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,r),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var n=new Rt(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,a,i){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[i]:o:void 0}),n},e.prototype.formatTooltip=function(t,e,n){var a=this.getData().getItemModel(t),i=a.get("name");if(i)return i;var o=a.get("fromName"),r=a.get("toName"),s=[];return null!=o&&s.push(o),null!=r&&s.push(r),Ot("nameValue",{name:s.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),e=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&e>0?e+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Vt);function nc(t){return t instanceof Array||(t=[t,t]),t}var ac={seriesType:"lines",reset:function(t){var e=nc(t.get("symbol")),n=nc(t.get("symbolSize")),a=t.getData();return a.setVisual("fromSymbol",e&&e[0]),a.setVisual("toSymbol",e&&e[1]),a.setVisual("fromSymbolSize",n&&n[0]),a.setVisual("toSymbolSize",n&&n[1]),{dataEach:a.hasItemOption?function(t,e){var n=t.getItemModel(e),a=nc(n.getShallow("symbol",!0)),i=nc(n.getShallow("symbolSize",!0));a[0]&&t.setItemVisual(e,"fromSymbol",a[0]),a[1]&&t.setItemVisual(e,"toSymbol",a[1]),i[0]&&t.setItemVisual(e,"fromSymbolSize",i[0]),i[1]&&t.setItemVisual(e,"toSymbolSize",i[1])}:null}}};var ic=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Jn.createCanvas();this.canvas=t}return t.prototype.update=function(t,e,n,a,i,o){var r=this._getBrush(),s=this._getGradient(i,"inRange"),l=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,d=this.canvas,c=d.getContext("2d"),h=t.length;d.width=e,d.height=n;for(var p=0;p<h;++p){var g=t[p],f=g[0],y=g[1],v=a(g[2]);c.globalAlpha=v,c.drawImage(r,f-u,y-u)}if(!d.width||!d.height)return d;for(var m=c.getImageData(0,0,d.width,d.height),x=m.data,_=0,b=x.length,w=this.minOpacity,S=this.maxOpacity-w;_<b;){v=x[_+3]/256;var I=4*Math.floor(255*v);if(v>0){var M=o(v)?s:l;v>0&&(v=v*S+w),x[_++]=M[I],x[_++]=M[I+1],x[_++]=M[I+2],x[_++]=M[I+3]*v*256}else _+=4}return c.putImageData(m,0,0),d},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Jn.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var a=t.getContext("2d");return a.clearRect(0,0,n,n),a.shadowOffsetX=n,a.shadowBlur=this.blurSize,a.shadowColor=wt.color.neutral99,a.beginPath(),a.arc(-e,e,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,a=n[e]||(n[e]=new Uint8ClampedArray(1024)),i=[0,0,0,0],o=0,r=0;r<256;r++)t[e](r/255,!0,i),a[o++]=i[0],a[o++]=i[1],a[o++]=i[2],a[o++]=i[3];return a},t}();function oc(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var rc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){var a;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(a=e)})}),this._progressiveEls=null,this.group.removeAll();var i=t.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type||"matrix"===i.type?this._renderOnGridLike(t,n,0,t.getData().count()):oc(i)&&this._renderOnGeo(i,t,a,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,a){var i=e.coordinateSystem;i&&(oc(i)?this.render(e,n,a):(this._progressiveEls=[],this._renderOnGridLike(e,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){ta(this._progressiveEls||this.group,t)},e.prototype._renderOnGridLike=function(t,e,n,a,i){var o,r,s,l,u=t.coordinateSystem,d=ea(u,"cartesian2d"),c=ea(u,"matrix");if(d){var h=u.getAxis("x"),p=u.getAxis("y");o=h.getBandWidth()+.5,r=p.getBandWidth()+.5,s=h.scale.getExtent(),l=p.scale.getExtent()}for(var g=this.group,f=t.getData(),y=t.getModel(["emphasis","itemStyle"]).getItemStyle(),v=t.getModel(["blur","itemStyle"]).getItemStyle(),m=t.getModel(["select","itemStyle"]).getItemStyle(),x=t.get(["itemStyle","borderRadius"]),_=le(t),b=t.getModel("emphasis"),w=b.get("focus"),S=b.get("blurScope"),I=b.get("disabled"),M=d||c?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],C=n;C<a;C++){var L=void 0,T=f.getItemVisual(C,"style");if(d){var A=f.get(M[0],C),D=f.get(M[1],C);if(isNaN(f.get(M[2],C))||isNaN(A)||isNaN(D)||A<s[0]||A>s[1]||D<l[0]||D>l[1])continue;var P=u.dataToPoint([A,D]);L=new ce({shape:{x:P[0]-o/2,y:P[1]-r/2,width:o,height:r},style:T})}else if(c){var N=u.dataToLayout([f.get(M[0],C),f.get(M[1],C)]).rect;if(dn(N.x))continue;L=new ce({z2:1,shape:N,style:T})}else{if(isNaN(f.get(M[1],C)))continue;var k=u.dataToLayout([f.get(M[0],C)]);N=k.contentRect||k.rect;if(dn(N.x)||dn(N.y))continue;L=new ce({z2:1,shape:N,style:T})}if(f.hasItemOption){var E=f.getItemModel(C),R=E.getModel("emphasis");y=R.getModel("itemStyle").getItemStyle(),v=E.getModel(["blur","itemStyle"]).getItemStyle(),m=E.getModel(["select","itemStyle"]).getItemStyle(),x=E.get(["itemStyle","borderRadius"]),w=R.get("focus"),S=R.get("blurScope"),I=R.get("disabled"),_=le(E)}L.shape.r=x;var z=t.getRawValue(C),O="-";z&&null!=z[2]&&(O=z[2]+""),se(L,_,{labelFetcher:t,labelDataIndex:C,defaultOpacity:T.opacity,defaultText:O}),L.ensureState("emphasis").style=y,L.ensureState("blur").style=v,L.ensureState("select").style=m,Kt(L,w,S,I),L.incremental=i,i&&(L.states.emphasis.hoverLayer=!0),g.add(L),f.setItemGraphicEl(C,L),this._progressiveEls&&this._progressiveEls.push(L)}},e.prototype._renderOnGeo=function(t,e,n,a){var i=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,r=e.getData(),s=this._hmLayer||this._hmLayer||new ic;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),u=t.getRoamTransform();l.applyTransform(u);var d=Math.max(l.x,0),c=Math.max(l.y,0),h=Math.min(l.width+l.x,a.getWidth()),p=Math.min(l.height+l.y,a.getHeight()),g=h-d,f=p-c,y=[r.mapDimension("lng"),r.mapDimension("lat"),r.mapDimension("value")],v=r.mapArray(y,function(e,n,a){var i=t.dataToPoint([e,n]);return i[0]-=d,i[1]-=c,i.push(a),i}),m=n.getExtent(),x="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(m,n.option.range):function(t,e,n){var a=t[1]-t[0],i=(e=A(e,function(e){return{interval:[(e.interval[0]-t[0])/a,(e.interval[1]-t[0])/a]}})).length,o=0;return function(t){var a;for(a=o;a<i;a++)if((r=e[a].interval)[0]<=t&&t<=r[1]){o=a;break}if(a===i)for(a=o-1;a>=0;a--){var r;if((r=e[a].interval)[0]<=t&&t<=r[1]){o=a;break}}return a>=0&&a<i&&n[a]}}(m,n.getPieceList(),n.option.selected);s.update(v,g,f,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:o.color.getColorMapper()},x);var _=new M({style:{width:g,height:f,x:d,y:c,image:s.canvas},silent:!0});this.group.add(_)},e.type="heatmap",e}(bt),sc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.getInitialData=function(t,e){return Be(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Ge.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:wt.color.primary}}},e}(Vt);var lc=["itemStyle","borderWidth"],uc=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],dc=new aa,cc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){var a=this.group,i=t.getData(),o=this._data,r=t.coordinateSystem,s=r.getBaseAxis().isHorizontal(),l=r.master.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:r,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:uc[+s],categoryDim:uc[1-+s]};i.diff(o).add(function(t){if(i.hasValue(t)){var e=xc(i,t),n=hc(i,t,e,u),o=wc(i,u,n);i.setItemGraphicEl(t,o),a.add(o),Lc(o,u,n)}}).update(function(t,e){var n=o.getItemGraphicEl(e);if(i.hasValue(t)){var r=xc(i,t),s=hc(i,t,r,u),l=Ic(i,s);n&&l!==n.__pictorialShapeStr&&(a.remove(n),i.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var a=n.animationModel,i=n.dataIndex,o=t.__pictorialBundle;w(o,{x:n.bundlePosition[0],y:n.bundlePosition[1]},a,i),n.symbolRepeat?fc(t,e,n,!0):yc(t,e,n,!0);vc(t,n,!0),mc(t,e,n,!0)}(n,u,s):n=wc(i,u,s,!0),i.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,a.add(n),Lc(n,u,s)}else a.remove(n)}).remove(function(t){var e=o.getItemGraphicEl(t);e&&Sc(o,t,e.__pictorialSymbolMeta.animationModel,e)}).execute();var d=t.get("clip",!0)?$n(t.coordinateSystem,!1,t):null;return d?a.setClipPath(d):a.removeClipPath(),this._data=i,this.group},e.prototype.remove=function(t,e){var n=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(e){Sc(a,r(e).dataIndex,t,e)}):n.removeAll()},e.type="pictorialBar",e}(bt);function hc(t,e,n,a){var i=t.getItemLayout(e),o=n.get("symbolRepeat"),r=n.get("symbolClip"),l=n.get("symbolPosition")||"start",u=(n.get("symbolRotate")||0)*Math.PI/180||0,d=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:r,symbolRepeat:o,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:u,animationModel:c?n:null,hoverScale:c&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(t,e,n,a,i){var o,r=a.valueDim,s=t.get("symbolBoundingData"),l=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),d=1-+(n[r.wh]<=0);if(dt(s)){var c=[pc(l,s[0])-u,pc(l,s[1])-u];c[1]<c[0]&&c.reverse(),o=c[d]}else o=null!=s?pc(l,s)-u:e?a.coordSysExtent[r.index][d]-u:n[r.wh];i.boundingLength=o,e&&(i.repeatCutLength=n[r.wh]);var h="x"===r.xy,p=l.inverse;i.pxSign=h&&!p||!h&&p?o>=0?1:-1:o>0?1:-1}(n,o,i,a,h),function(t,e,n,a,i,o,r,l,u,d){var c,h=u.valueDim,p=u.categoryDim,g=Math.abs(n[p.wh]),f=t.getItemVisual(e,"symbolSize");c=dt(f)?f.slice():null==f?["100%","100%"]:[f,f];c[p.index]=s(c[p.index],g),c[h.index]=s(c[h.index],a?g:Math.abs(o)),d.symbolSize=c;var y=d.symbolScale=[c[0]/l,c[1]/l];y[h.index]*=(u.isHorizontal?-1:1)*r}(t,e,i,o,0,h.boundingLength,h.pxSign,d,a,h),function(t,e,n,a,i){var o=t.get(lc)||0;o&&(dc.attr({scaleX:e[0],scaleY:e[1],rotation:n}),dc.updateTransform(),o/=dc.getLineScale(),o*=e[a.valueDim.index]);i.valueLineWidth=o||0}(n,h.symbolScale,u,a,h);var p=h.symbolSize,g=Fn(n.get("symbolOffset"),p);return function(t,e,n,a,i,o,r,l,u,d,c,h){var p=c.categoryDim,g=c.valueDim,f=h.pxSign,y=Math.max(e[g.index]+l,0),v=y;if(a){var m=Math.abs(u),x=fe(t.get("symbolMargin"),"15%")+"",_=!1;x.lastIndexOf("!")===x.length-1&&(_=!0,x=x.slice(0,x.length-1));var b=s(x,e[g.index]),w=Math.max(y+2*b,0),S=_?0:2*b,I=ia(a),M=I?a:Tc((m+S)/w);w=y+2*(b=(m-M*y)/2/(_?M:Math.max(M-1,1))),S=_?0:2*b,I||"fixed"===a||(M=d?Tc((Math.abs(d)+S)/w):0),v=M*w-S,h.repeatTimes=M,h.symbolMargin=b}var C=f*(v/2),L=h.pathPosition=[];L[p.index]=n[p.wh]/2,L[g.index]="start"===r?C:"end"===r?u-C:u/2,o&&(L[0]+=o[0],L[1]+=o[1]);var T=h.bundlePosition=[];T[p.index]=n[p.xy],T[g.index]=n[g.xy];var A=h.barRectShape=R({},n);A[g.wh]=f*Math.max(Math.abs(n[g.wh]),Math.abs(L[g.index]+C)),A[p.wh]=n[p.wh];var D=h.clipShape={};D[p.xy]=-n[p.xy],D[p.wh]=c.ecSize[p.wh],D[g.xy]=0,D[g.wh]=n[g.wh]}(n,p,i,o,0,g,l,h.valueLineWidth,h.boundingLength,h.repeatCutLength,a,h),h}function pc(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function gc(t){var e=t.symbolPatternSize,n=nn(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function fc(t,e,n,a){var i=t.__pictorialBundle,o=n.symbolSize,r=n.valueLineWidth,s=n.pathPosition,l=e.valueDim,u=n.repeatTimes||0,d=0,c=o[e.valueDim.index]+r+2*n.symbolMargin;for(Mc(t,function(t){t.__pictorialAnimationIndex=d,t.__pictorialRepeatTimes=u,d<u?Cc(t,null,g(d),n,a):Cc(t,null,{scaleX:0,scaleY:0},n,a,function(){i.remove(t)}),d++});d<u;d++){var h=gc(n);h.__pictorialAnimationIndex=d,h.__pictorialRepeatTimes=u,i.add(h);var p=g(d);Cc(h,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,a)}function g(t){var e=s.slice(),a=n.pxSign,i=t;return("start"===n.symbolRepeatDirection?a>0:a<0)&&(i=u-1-t),e[l.index]=c*(i-u/2+.5)+s[l.index],{x:e[0],y:e[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function yc(t,e,n,a){var i=t.__pictorialBundle,o=t.__pictorialMainPath;o?Cc(o,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,a):(o=t.__pictorialMainPath=gc(n),i.add(o),Cc(o,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,a))}function vc(t,e,n){var a=R({},e.barRectShape),i=t.__pictorialBarRect;i?Cc(i,null,{shape:a},e,n):((i=t.__pictorialBarRect=new ce({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(i))}function mc(t,e,n,a){if(n.symbolClip){var i=t.__pictorialClipPath,o=R({},n.clipShape),r=e.valueDim,s=n.animationModel,l=n.dataIndex;if(i)w(i,{shape:o},s,l);else{o[r.wh]=0,i=new ce({shape:o}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var u={};u[r.wh]=n.clipShape[r.wh],On[a?"updateProps":"initProps"](i,{shape:u},s,l)}}}function xc(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=_c,n.isAnimationEnabled=bc,n}function _c(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function bc(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function wc(t,e,n,a){var i=new yt,o=new yt;return i.add(o),i.__pictorialBundle=o,o.x=n.bundlePosition[0],o.y=n.bundlePosition[1],n.symbolRepeat?fc(i,e,n):yc(i,0,n),vc(i,n,a),mc(i,e,n,a),i.__pictorialShapeStr=Ic(t,n),i.__pictorialSymbolMeta=n,i}function Sc(t,e,n,a){var i=a.__pictorialBarRect;i&&i.removeTextContent();var o=[];Mc(a,function(t){o.push(t)}),a.__pictorialMainPath&&o.push(a.__pictorialMainPath),a.__pictorialClipPath&&(n=null),l(o,function(t){Lt(t,{scaleX:0,scaleY:0},n,e,function(){a.parent&&a.parent.remove(a)})}),t.setItemGraphicEl(e,null)}function Ic(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function Mc(t,e,n){l(t.__pictorialBundle.children(),function(a){a!==t.__pictorialBarRect&&e.call(n,a)})}function Cc(t,e,n,a,i,o){e&&t.attr(e),a.symbolClip&&!i?n&&t.attr(n):n&&On[i?"updateProps":"initProps"](t,n,a.animationModel,a.dataIndex,o)}function Lc(t,e,n){var a=n.dataIndex,i=n.itemModel,o=i.getModel("emphasis"),r=o.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),d=o.get("focus"),c=o.get("blurScope"),h=o.get("scale");Mc(t,function(t){if(t instanceof M){var e=t.style;t.useStyle(R({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},n.style))}else t.useStyle(n.style);var a=t.ensureState("emphasis");a.style=r,h&&(a.scaleX=1.1*t.scaleX,a.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=l,u&&(t.cursor=u),t.z2=n.z2});var p=e.valueDim.posDesc[+(n.boundingLength>0)],g=t.__pictorialBarRect;g.ignoreClip=!0,se(g,le(i),{labelFetcher:e.seriesModel,labelDataIndex:a,defaultText:na(e.seriesModel.getData(),a),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),Kt(t,d,c,o.get("disabled"))}function Tc(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var Ac=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return ft(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=oa(ra.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:wt.color.primary}}}),e}(ra);var Dc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return ft(e,t),e.prototype.render=function(t,e,n){var a=t.getData(),i=this,o=this.group,r=t.getLayerSeries(),s=a.getLayout("layoutInfo"),l=s.rect,u=s.boundaryGap;function d(t){return t.name}o.x=0,o.y=l.y+u[0];var c=new $t(this._layersSeries||[],r,d,d),h=[];function p(e,n,s){var l=i._layers;if("remove"!==e){for(var u,d,c=[],p=[],g=r[n].indices,f=0;f<g.length;f++){var y=a.getItemLayout(g[f]),v=y.x,m=y.y0,x=y.y;c.push(v,m),p.push(v,m+x),u=a.getItemVisual(g[f],"style")}var b=a.getItemLayout(g[0]),S=t.getModel("label").get("margin"),I=t.getModel("emphasis");if("add"===e){var M=h[n]=new yt;d=new ua({shape:{points:c,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),M.add(d),o.add(M),t.isAnimationEnabled()&&d.setClipPath(function(t,e,n){var a=new ce({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return _(a,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),a}(d.getBoundingRect(),t,function(){d.removeClipPath()}))}else{M=l[s];d=M.childAt(0),o.add(M),h[n]=M,w(d,{shape:{points:c,stackedOnPoints:p}},t),Xe(d)}se(d,le(t),{labelDataIndex:g[f-1],defaultText:a.getName(g[f-1]),inheritColor:u.fill},{normal:{verticalAlign:"middle"}}),d.setTextConfig({position:null,local:!0});var C=d.getTextContent();C&&(C.x=b.x-S,C.y=b.y0+b.y/2),d.useStyle(u),a.setItemGraphicEl(n,d),Dt(d,t),Kt(d,I.get("focus"),I.get("blurScope"),I.get("disabled"))}else o.remove(l[n])}c.add(Qt(p,this,"add")).update(Qt(p,this,"update")).remove(Qt(p,this,"remove")).execute(),this._layersSeries=r,this._layers=h},e.type="themeRiver",e}(bt);var Pc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new We(Qt(this.getData,this),Qt(this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,n={},a=Rn(t,function(t){return n.hasOwnProperty(t[0]+"")||(n[t[0]+""]=-1),t[2]}),i=[];a.buckets.each(function(t,e){i.push({name:e,dataList:t})});for(var o=i.length,r=0;r<o;++r){for(var s=i[r].name,l=0;l<i[r].dataList.length;++l){var u=i[r].dataList[l][0]+"";n[u]=r}for(var u in n)n.hasOwnProperty(u)&&n[u]!==r&&(n[u]=r,t[e]=[u,0,s],e++)}return t},e.prototype.getInitialData=function(t,e){for(var n=this.getReferringComponents("singleAxis",wn).models[0].get("type"),a=d(t.data,function(t){return void 0!==t[2]}),i=this.fixData(a||[]),o=[],r=this.nameMap=Yt(),s=0,l=0;l<i.length;++l)o.push(i[l][2]),r.get(i[l][2])||(r.set(i[l][2],s),s++);var u=Et(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:da(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new Rt(u,this);return c.initData(i),c},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),n=[],a=0;a<e;++a)n[a]=a;var i=t.mapDimension("single"),o=Rn(n,function(e){return t.get("name",e)}),r=[];return o.buckets.each(function(e,n){e.sort(function(e,n){return t.get(i,e)-t.get(i,n)}),r.push({name:n,indices:e})}),r},e.prototype.getAxisTooltipData=function(t,e,n){dt(t)||(t=t?[t]:[]);for(var a,i=this.getData(),o=this.getLayerSeries(),r=[],s=o.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,d=-1,c=o[l].indices.length,h=0;h<c;++h){var p=i.get(t[0],o[l].indices[h]),g=Math.abs(p-e);g<=u&&(a=p,u=g,d=o[l].indices[h])}r.push(d)}return{dataIndices:r,nestestValue:a}},e.prototype.formatTooltip=function(t,e,n){var a=this.getData(),i=a.getName(t),o=a.get(a.mapDimension("value"),t);return Ot("nameValue",{name:i,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Vt);function Nc(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,a={},i=n.getRect();a.rect=i;var o=t.get("boundaryGap"),r=n.getAxis();(a.boundaryGap=o,"horizontal"===r.orient)?(o[0]=s(o[0],i.height),o[1]=s(o[1],i.height),kc(e,t,i.height-o[0]-o[1])):(o[0]=s(o[0],i.width),o[1]=s(o[1],i.width),kc(e,t,i.width-o[0]-o[1]));e.setLayout("layoutInfo",a)})}function kc(t,e,n){if(t.count())for(var a,i=e.coordinateSystem,o=e.getLayerSeries(),r=t.mapDimension("single"),s=t.mapDimension("value"),l=A(o,function(e){return A(e.indices,function(e){var n=i.dataToPoint(t.get(r,e));return n[1]=t.get(s,e),n})}),u=function(t){for(var e=t.length,n=t[0].length,a=[],i=[],o=0,r=0;r<n;++r){for(var s=0,l=0;l<e;++l)s+=t[l][r][1];s>o&&(o=s),a.push(s)}for(var u=0;u<n;++u)i[u]=(o-a[u])/2;o=0;for(var d=0;d<n;++d){var c=a[d]+i[d];c>o&&(o=c)}return{y0:i,max:o}}(l),d=u.y0,c=n/u.max,h=o.length,p=o[0].indices.length,g=0;g<p;++g){a=d[g]*c,t.setItemLayout(o[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:a,y:l[0][g][1]*c});for(var f=1;f<h;++f)a+=l[f-1][g][1]*c,t.setItemLayout(o[f].indices[g],{layerIndex:f,x:l[f][g][0],y0:a,y:l[f][g][1]*c})}}var Ec=function(t){function e(e,n,a,i){var o=t.call(this)||this;o.z2=2,o.textConfig={inside:!0},r(o).seriesIndex=n.seriesIndex;var s=new Zt({z2:4,silent:e.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,e,n,a,i),o}return ft(e,t),e.prototype.updateData=function(t,e,n,a,i){this.node=e,e.piece=this,n=n||this._seriesModel,a=a||this._ecModel;var o=this;r(o).dataIndex=e.dataIndex;var s=e.getModel(),u=s.getModel("emphasis"),d=e.getLayout(),c=R({},d);c.label=null;var h=e.getVisual("style");h.lineJoin="bevel";var p=e.getVisual("decal");p&&(h.decal=ca(p,i));var g=Ue(s.getModel("itemStyle"),c,!0);R(c,g),l(ha,function(t){var e=o.ensureState(t),n=s.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var a=Ue(n,c);a&&(e.shape=a)}),t?(o.setShape(c),o.shape.r=d.r0,_(o,{shape:{r:d.r}},n,e.dataIndex)):(w(o,{shape:c},n),Xe(o)),o.useStyle(h),this._updateLabel(n);var f=s.getShallow("cursor");f&&o.attr("cursor",f),this._seriesModel=n||this._seriesModel,this._ecModel=a||this._ecModel;var y=u.get("focus"),v="relative"===y?It(e.getAncestorsIndices(),e.getDescendantIndices()):"ancestor"===y?e.getAncestorsIndices():"descendant"===y?e.getDescendantIndices():y;Kt(this,v,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),i=n.getModel("label"),o=this.node.getLayout(),r=o.endAngle-o.startAngle,s=(o.startAngle+o.endAngle)/2,u=Math.cos(s),d=Math.sin(s),c=this,h=c.getTextContent(),p=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,f=i.get("show")&&!(null!=g&&Math.abs(r)<g);function y(t,e){var n=t.get(e);return null==n?i.get(e):n}h.ignore=!f,l(ga,function(i){var l="normal"===i?n.getModel("label"):n.getModel([i,"label"]),g="normal"===i,f=g?h:h.ensureState(i),v=t.getFormattedLabel(p,i);g&&(v=v||e.node.name),f.style=qt(l,{},null,"normal"!==i,!0),v&&(f.style.text=v);var m=l.get("show");null==m||g||(f.ignore=!m);var x,_=y(l,"position"),b=g?c:c.states[i],w=b.style.fill;b.textConfig={outsideFill:"inherit"===l.get("color")?w:null,inside:"outside"!==_};var S=y(l,"distance")||0,I=y(l,"align"),M=y(l,"rotate"),C=.5*Math.PI,L=1.5*Math.PI,T=a("tangential"===M?Math.PI/2-s:s),A=T>C&&!pa(T-C)&&T<L;"outside"===_?(x=o.r+S,I=A?"right":"left"):I&&"center"!==I?"left"===I?(x=o.r0+S,I=A?"right":"left"):"right"===I&&(x=o.r-S,I=A?"left":"right"):(x=r===2*Math.PI&&0===o.r0?0:(o.r+o.r0)/2,I="center"),f.style.align=I,f.style.verticalAlign=y(l,"verticalAlign")||"middle",f.x=x*u+o.cx,f.y=x*d+o.cy;var D=0;"radial"===M?D=a(-s)+(A?Math.PI:0):"tangential"===M?D=a(Math.PI/2-s)+(A?Math.PI:0):O(M)&&(D=M*Math.PI/180),f.rotation=a(D)}),h.dirtyStyle()},e}(He),Rc="sunburstRootToNode",zc="sunburstHighlight";var Oc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n,a){var i=this;this.seriesModel=t,this.api=n,this.ecModel=e;var o=t.getData(),r=o.tree.root,s=t.getViewRoot(),l=this.group,u=t.get("renderLabelForZeroData"),d=[];s.eachNode(function(t){d.push(t)});var c,h,p=this._oldChildren||[];!function(a,i){if(0===a.length&&0===i.length)return;function s(t){return t.getId()}function d(s,d){!function(a,i){u||!a||a.getValue()||(a=null);if(a!==r&&i!==r)if(i&&i.piece)a?(i.piece.updateData(!1,a,t,e,n),o.setItemGraphicEl(a.dataIndex,i.piece)):function(t){if(!t)return;t.piece&&(l.remove(t.piece),t.piece=null)}(i);else if(a){var s=new Ec(a,t,e,n);l.add(s),o.setItemGraphicEl(a.dataIndex,s)}}(null==s?null:a[s],null==d?null:i[d])}new $t(i,a,s,s).add(d).update(d).remove(Nt(d,null)).execute()}(d,p),c=r,(h=s).depth>0?(i.virtualPiece?i.virtualPiece.updateData(!1,c,t,e,n):(i.virtualPiece=new Ec(c,t,e,n),l.add(i.virtualPiece)),h.piece.off("click"),i.virtualPiece.on("click",function(t){i._rootToNode(h.parentNode)})):i.virtualPiece&&(l.remove(i.virtualPiece),i.virtualPiece=null),this._initEvents(),this._oldChildren=d},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(e){var n=!1;t.seriesModel.getViewRoot().eachNode(function(a){if(!n&&a.piece&&a.piece===e.target){var i=a.getModel().get("nodeClick");if("rootToNode"===i)t._rootToNode(a);else if("link"===i){var o=a.getModel(),r=o.get("link");if(r){var s=o.get("target",!0)||"_blank";ne(r,s)}}n=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Rc,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var a=t[0]-n.cx,i=t[1]-n.cy,o=Math.sqrt(a*a+i*i);return o<=n.r&&o>=n.r0}},e.type="sunburst",e}(bt),Vc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return ft(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};Bc(n);var a=this._levelModels=A(t.levels||[],function(t){return new zt(t,this,e)},this),i=Ps.createTree(n,this,function(t){t.wrapMethod("getItemModel",function(t,e){var n=i.getNodeByDataIndex(e),o=a[n.depth];return o&&(t.parentModel=o),t})});return i.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=Rs(a,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){Ws(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Vt);function Bc(t){var e=0;l(t.children,function(t){Bc(t);var n=t.value;dt(n)&&(n=n[0]),e+=n});var n=t.value;dt(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),dt(t.value)?t.value[0]=n:t.value=n}var Gc=Math.PI/180;function Wc(t,e,n){e.eachSeriesByType(t,function(t){var e=t.get("center"),a=t.get("radius");dt(a)||(a=[0,a]),dt(e)||(e=[e,e]);var i=n.getWidth(),o=n.getHeight(),r=Math.min(i,o),u=s(e[0],i),d=s(e[1],o),c=s(a[0],r/2),h=s(a[1],r/2),p=-t.get("startAngle")*Gc,g=t.get("minAngle")*Gc,f=t.getData().tree.root,y=t.getViewRoot(),v=y.depth,m=t.get("sort");null!=m&&Fc(y,m);var x=0;l(y.children,function(t){!isNaN(t.getValue())&&x++});var _=y.getValue(),b=Math.PI/(_||x)*2,w=y.depth>0,S=y.height-(w?-1:1),I=(h-c)/(S||1),M=t.get("clockwise"),C=t.get("stillShowZeroSum"),L=M?1:-1,T=function(e,n){if(e){var a=n;if(e!==f){var i=e.getValue(),o=0===_&&C?b:i*b;o<g&&(o=g),a=n+L*o;var h=e.depth-v-(w?-1:1),p=c+I*h,y=c+I*(h+1),m=t.getLevelModel(e);if(m){var x=m.get("r0",!0),S=m.get("r",!0),A=m.get("radius",!0);null!=A&&(x=A[0],S=A[1]),null!=x&&(p=s(x,r/2)),null!=S&&(y=s(S,r/2))}e.setLayout({angle:o,startAngle:n,endAngle:a,clockwise:M,cx:u,cy:d,r0:p,r:y})}if(e.children&&e.children.length){var D=0;l(e.children,function(t){D+=T(t,n+D)})}return a-n}};if(w){var A=c,D=c+I,P=2*Math.PI;f.setLayout({angle:P,startAngle:p,endAngle:p+P,clockwise:M,cx:u,cy:d,r0:A,r:D})}T(y,p)})}function Fc(t,e){var n=t.children||[];t.children=function(t,e){if(i(e)){var n=A(t,function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}});return n.sort(function(t,n){return e(t.params,n.params)}),A(n,function(e){return t[e.index]})}var a="asc"===e;return t.sort(function(t,e){var n=(t.getValue()-e.getValue())*(a?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(a?-1:1):n})}(n,e),n.length&&l(t.children,function(t){Fc(t,e)})}function Yc(t){var e={};t.eachSeriesByType("sunburst",function(t){var n=t.getData(),a=n.tree;a.eachNode(function(i){var o=i.getModel().getModel("itemStyle").getItemStyle();o.fill||(o.fill=function(t,n,a){if(0===t.depth)return wt.color.neutral50;for(var i=t;i&&i.depth>1;)i=i.parentNode;var o=n.getColorFromPalette(i.name||i.dataIndex+"",e);return t.depth>1&&N(o)&&(o=fa(o,(t.depth-1)/(a-1)*.5)),o}(i,t,a.root.height));var r=n.ensureUniqueItemVisual(i.dataIndex,"style");R(r,o)})})}var Uc={color:"fill",borderColor:"stroke"},Hc={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Xc=t(),Zc=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return Be(null,this)},e.prototype.getDataParams=function(e,n,a){var i=t.prototype.getDataParams.call(this,e,n);return a&&(i.info=Xc(a).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Vt);function jc(t,e){return e=e||[0,0],A(["x","y"],function(n,a){var i=this.getAxis(n),o=e[a],r=t[a]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(o-r)-i.dataToCoord(o+r))},this)}function qc(t,e){return e=e||[0,0],A([0,1],function(n){var a=e[n],i=t[n]/2,o=[],r=[];return o[n]=a-i,r[n]=a+i,o[1-n]=r[1-n]=e[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(r)[n])},this)}function Kc(t,e){var n=this.getAxis(),a=e instanceof Array?e[0]:e,i=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(a-i)-n.dataToCoord(a+i))}function $c(t,e){return e=e||[0,0],A(["Radius","Angle"],function(n,a){var i=this["get"+n+"Axis"](),o=e[a],r=t[a]/2,s="category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(o-r)-i.dataToCoord(o+r));return"Angle"===n&&(s=s*Math.PI/180),s},this)}function Qc(t,e,n,a){return t&&(t.legacy||!1!==t.legacy&&!n&&!a&&"tspan"!==e&&("text"===e||ya(t,"text")))}function Jc(t,e,n){var a,i,o,r=t;if("text"===e)o=r;else{o={},ya(r,"text")&&(o.text=r.text),ya(r,"rich")&&(o.rich=r.rich),ya(r,"textFill")&&(o.fill=r.textFill),ya(r,"textStroke")&&(o.stroke=r.textStroke),ya(r,"fontFamily")&&(o.fontFamily=r.fontFamily),ya(r,"fontSize")&&(o.fontSize=r.fontSize),ya(r,"fontStyle")&&(o.fontStyle=r.fontStyle),ya(r,"fontWeight")&&(o.fontWeight=r.fontWeight),i={type:"text",style:o,silent:!0},a={};var s=ya(r,"textPosition");n?a.position=s?r.textPosition:"inside":s&&(a.position=r.textPosition),ya(r,"textPosition")&&(a.position=r.textPosition),ya(r,"textOffset")&&(a.offset=r.textOffset),ya(r,"textRotation")&&(a.rotation=r.textRotation),ya(r,"textDistance")&&(a.distance=r.textDistance)}return th(o,t),l(o.rich,function(t){th(t,t)}),{textConfig:a,textContent:i}}function th(t,e){e&&(e.font=e.textFont||e.font,ya(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),ya(e,"textAlign")&&(t.align=e.textAlign),ya(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),ya(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),ya(e,"textWidth")&&(t.width=e.textWidth),ya(e,"textHeight")&&(t.height=e.textHeight),ya(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),ya(e,"textPadding")&&(t.padding=e.textPadding),ya(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),ya(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),ya(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),ya(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),ya(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),ya(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),ya(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function eh(t,e,n){var a=t;a.textPosition=a.textPosition||n.position||"inside",null!=n.offset&&(a.textOffset=n.offset),null!=n.rotation&&(a.textRotation=n.rotation),null!=n.distance&&(a.textDistance=n.distance);var i=a.textPosition.indexOf("inside")>=0,o=t.fill||wt.color.neutral99;nh(a,e);var r=null==a.textFill;return i?r&&(a.textFill=n.insideFill||wt.color.neutral00,!a.textStroke&&n.insideStroke&&(a.textStroke=n.insideStroke),!a.textStroke&&(a.textStroke=o),null==a.textStrokeWidth&&(a.textStrokeWidth=2)):(r&&(a.textFill=t.fill||n.outsideFill||wt.color.neutral00),!a.textStroke&&n.outsideStroke&&(a.textStroke=n.outsideStroke)),a.text=e.text,a.rich=e.rich,l(e.rich,function(t){nh(t,t)}),a}function nh(t,e){e&&(ya(e,"fill")&&(t.textFill=e.fill),ya(e,"stroke")&&(t.textStroke=e.fill),ya(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),ya(e,"font")&&(t.font=e.font),ya(e,"fontStyle")&&(t.fontStyle=e.fontStyle),ya(e,"fontWeight")&&(t.fontWeight=e.fontWeight),ya(e,"fontSize")&&(t.fontSize=e.fontSize),ya(e,"fontFamily")&&(t.fontFamily=e.fontFamily),ya(e,"align")&&(t.textAlign=e.align),ya(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),ya(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),ya(e,"width")&&(t.textWidth=e.width),ya(e,"height")&&(t.textHeight=e.height),ya(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),ya(e,"padding")&&(t.textPadding=e.padding),ya(e,"borderColor")&&(t.textBorderColor=e.borderColor),ya(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),ya(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),ya(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),ya(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),ya(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),ya(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),ya(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),ya(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),ya(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),ya(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var ah={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},ih=o(ah);ba(ma,function(t,e){return t[e]=1,t},{}),ma.join(", ");var oh=["","style","shape","extra"],rh=t();function sh(t,e,n,a,i){var o=t+"Animation",r=va(t,a,i)||{},s=rh(e).userDuring;return r.duration>0&&(r.during=s?Qt(gh,{el:e,userDuring:s}):null,r.setToFinal=!0,r.scope=t),R(r,n[o]),r}function lh(t,e,n,a){var i=(a=a||{}).dataIndex,r=a.isInit,s=a.clearStyle,u=n.isAnimationEnabled(),d=rh(t),c=e.style;d.userDuring=e.during;var h={},p={};if(function(t,e,n){for(var a=0;a<ih.length;a++){var i=ih[a],o=ah[i],r=e[i];r&&(n[o[0]]=r[0],n[o[1]]=r[1])}for(a=0;a<ma.length;a++){var s=ma[a];null!=e[s]&&(n[s]=e[s])}}(0,e,p),"compound"===t.type)for(var g=t.shape.paths,f=e.shape.paths,y=0;y<f.length;y++){yh("shape",f[y],g[y])}else yh("shape",e,p),yh("extra",e,p);if(!r&&u&&(function(t,e,n){for(var a=e.transition,i=ch(a)?ma:Ut(a||[]),o=0;o<i.length;o++){var r=i[o];if("style"!==r&&"shape"!==r&&"extra"!==r){var s=t[r];n[r]=s}}}(t,e,h),fh("shape",t,e,h),fh("extra",t,e,h),function(t,e,n,a){if(!n)return;var i,r=t.style;if(r){var s=n.transition,l=e.transition;if(s&&!ch(s)){var u=Ut(s);!i&&(i=a.style={});for(var d=0;d<u.length;d++){var c=r[f=u[d]];i[f]=c}}else if(t.getAnimationStyleProps&&(ch(l)||ch(s)||b(l,"style")>=0)){var h=t.getAnimationStyleProps(),p=h?h.style:null;if(p){!i&&(i=a.style={});var g=o(n);for(d=0;d<g.length;d++){var f;if(p[f=g[d]]){c=r[f];i[f]=c}}}}}}(t,e,c,h)),p.style=c,function(t,e,n){var a=e.style;if(!t.isGroup&&a){if(n){t.useStyle({});for(var i=t.animators,o=0;o<i.length;o++){var r=i[o];"style"===r.targetName&&r.changeTarget(t.style)}}t.setStyle(a)}e&&(e.style=null,e&&t.attr(e),e.style=a)}(t,p,s),function(t,e){ya(e,"silent")&&(t.silent=e.silent),ya(e,"ignore")&&(t.ignore=e.ignore),t instanceof de&&ya(e,"invisible")&&(t.invisible=e.invisible);t instanceof W&&ya(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}(t,e),u)if(r){var v={};l(oh,function(t){var n=t?e[t]:e;n&&n.enterFrom&&(t&&(v[t]=v[t]||{}),R(t?v[t]:v,n.enterFrom))});var m=sh("enter",t,e,n,i);m.duration>0&&t.animateFrom(v,m)}else!function(t,e,n,a,i){if(i){var o=sh("update",t,e,a,n);o.duration>0&&t.animateFrom(i,o)}}(t,e,i||0,n,h);uh(t,e),c?t.dirty():t.markRedraw()}function uh(t,e){for(var n=rh(t).leaveToProps,a=0;a<oh.length;a++){var i=oh[a],o=i?e[i]:e;o&&o.leaveTo&&(n||(n=rh(t).leaveToProps={}),i&&(n[i]=n[i]||{}),R(i?n[i]:n,o.leaveTo))}}function dh(t,e,n,a){if(t){var i=t.parent,o=rh(t).leaveToProps;if(o){var r=sh("update",t,e,n,0);r.done=function(){i&&i.remove(t)},t.animateTo(o,r)}else i&&i.remove(t)}}function ch(t){return"all"===t}var hh={},ph={setTransform:function(t,e){return hh.el[t]=e,this},getTransform:function(t){return hh.el[t]},setShape:function(t,e){var n=hh.el;return(n.shape||(n.shape={}))[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=hh.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=hh.el,a=n.style;return a&&(a[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=hh.el.style;if(e)return e[t]},setExtra:function(t,e){return(hh.el.extra||(hh.el.extra={}))[t]=e,this},getExtra:function(t){var e=hh.el.extra;if(e)return e[t]}};function gh(){var t=this,e=t.el;if(e){var n=rh(e).userDuring,a=t.userDuring;n===a?(hh.el=e,a(ph)):t.el=t.userDuring=null}}function fh(t,e,n,a){var i=n[t];if(i){var r,s=e[t];if(s){var l=n.transition,u=i.transition;if(u)if(!r&&(r=a[t]={}),ch(u))R(r,s);else for(var d=Ut(u),c=0;c<d.length;c++){var h=s[g=d[c]];r[g]=h}else if(ch(l)||b(l,t)>=0){!r&&(r=a[t]={});var p=o(s);for(c=0;c<p.length;c++){var g;h=s[g=p[c]];vh(i[g],h)&&(r[g]=h)}}}}}function yh(t,e,n){var a=e[t];if(a)for(var i=n[t]={},r=o(a),s=0;s<r.length;s++){var l=r[s];i[l]=xa(a[l])}}function vh(t,e){return _a(t)?t!==e:null!=t&&isFinite(t)}var mh=t(),xh=["percent","easing","shape","style","extra"];function _h(t){t.stopAnimation("keyframe"),t.attr(mh(t))}function bh(t,e,n){if(n.isAnimationEnabled()&&e)if(dt(e))l(e,function(e){bh(t,e,n)});else{var a=e.keyframes,i=e.duration;if(n&&null==i){var r=va("enter",n,0);i=r&&r.duration}if(a&&i){var s=mh(t);l(oh,function(n){var r;n&&!t[n]||(a.sort(function(t,e){return t.percent-e.percent}),l(a,function(a){var u=t.animators,c=n?a[n]:a;if(c){var h=o(c);if(n||(h=d(h,function(t){return b(xh,t)<0})),h.length){r||((r=t.animate(n,e.loop,!0)).scope="keyframe");for(var p=0;p<u.length;p++)u[p]!==r&&u[p].targetName===r.targetName&&u[p].stopTracks(h);n&&(s[n]=s[n]||{});var g=n?s[n]:s;l(h,function(e){g[e]=((n?t[n]:t)||{})[e]}),r.whenWithKeys(i*a.percent,c,h,a.easing)}}}),r&&r.delay(e.delay||0).duration(i).start(e.easing))})}}}var wh="emphasis",Sh="normal",Ih="blur",Mh="select",Ch=[Sh,wh,Ih,Mh],Lh={normal:["itemStyle"],emphasis:[wh,"itemStyle"],blur:[Ih,"itemStyle"],select:[Mh,"itemStyle"]},Th={normal:["label"],emphasis:[wh,"label"],blur:[Ih,"label"],select:[Mh,"label"]},Ah=["x","y"],Dh={normal:{},emphasis:{},blur:{},select:{}},Ph={cartesian2d:function(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:Qt(jc,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:Qt(qc,t)}}},single:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:Qt(Kc,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),a=e.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:a[1],r0:a[0]},api:{coord:function(a){var i=e.dataToRadius(a[0]),o=n.dataToAngle(a[1]),r=t.coordToPoint([i,o]);return r.push(i,o*Math.PI/180),r},size:Qt($c,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)},layout:function(e,n){return t.dataToLayout(e,n)}}}},matrix:function(t){var e=t.getRect();return{coordSys:{type:"matrix",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e,n){return t.dataToPoint(e,n)},layout:function(e,n){return t.dataToLayout(e,n)}}}}};function Nh(t){return t instanceof W}function kh(t){return t instanceof de}var Eh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n,a){this._progressiveEls=null;var i=this._data,o=t.getData(),r=this.group,s=Bh(t,o,e,n);i||r.removeAll(),o.diff(i).add(function(e){Wh(n,null,e,s(e,a),t,r,o)}).remove(function(e){var n=i.getItemGraphicEl(e);n&&dh(n,Xc(n).option,t)}).update(function(e,l){var u=i.getItemGraphicEl(l);Wh(n,u,e,s(e,a),t,r,o)}).execute();var l=t.get("clip",!0)?$n(t.coordinateSystem,!1,t):null;l?r.setClipPath(l):r.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,n,a,i){var o=e.getData(),r=Bh(e,o,n,a),s=this._progressiveEls=[];function l(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var u=t.start;u<t.end;u++){var d=Wh(null,null,u,r(u,i),e,this.group,o);d&&(d.traverse(l),s.push(d))}},e.prototype.eachRendered=function(t){ta(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,e,n,a){var i=e.element;if(null==i||n.name===i)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===i)return!0;return!1},e.type="custom",e}(bt);function Rh(t){var e,n=t.type;if("path"===n){var a=null!=(o=t.shape).width&&null!=o.height?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,i=$h(o);e=Ma(i,null,a,o.layout||"center"),Xc(e).customPathData=i}else if("image"===n)e=new M({}),Xc(e).customImagePath=t.style.image;else if("text"===n)e=new Zt({});else if("group"===n)e=new yt;else if("compoundPath"===n){var o;if(!(o=t.shape)||!o.paths)Gn("");var r=A(o.paths,function(t){if("path"===t.type)return Ma(t.shape.pathData,t,null);var e=Ca(t.type);if(!e){Gn("")}return new e});e=new P({shape:{paths:r}})}else{var s=Ca(n);if(!s)Gn("");e=new s}return Xc(e).customGraphicType=n,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function zh(t,e,n,a,i,o,r){_h(e);var s=i&&i.normal.cfg;s&&e.setTextConfig(s),a&&null==a.transition&&(a.transition=Ah);var l=a&&a.style;if(l){if("text"===e.type){var u=l;ya(u,"textFill")&&(u.fill=u.textFill),ya(u,"textStroke")&&(u.stroke=u.textStroke)}var d=void 0,c=Nh(e)?l.decal:null;t&&c&&(c.dirty=!0,d=ca(c,t)),l.__decalPattern=d}kh(e)&&(l&&(d=l.__decalPattern)&&(l.decal=d));lh(e,a,o,{dataIndex:n,isInit:r,clearStyle:!0}),bh(e,a.keyframeAnimation,o)}function Oh(t,e,n,a,i){var o=e.isGroup?null:e,r=i&&i[t].cfg;if(o){var s=o.ensureState(t);if(!1===a){var l=o.getState(t);l&&(l.style=null)}else s.style=a||null;r&&(s.textConfig=r),Pt(o)}}function Vh(t,e,n){var a=n===Sh,i=a?e:Hh(e,n),o=i?i.z2:null;null!=o&&((a?t:t.ensureState(n)).z2=o||0)}function Bh(t,e,n,a){var i=t.get("renderItem");if("string"==typeof i){var o=La(i);o&&(i=o)}var r=t.coordinateSystem,s={};r&&(s=r.prepareCustoms?r.prepareCustoms(r):Ph[r.type](r));for(var l,u,d=At({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:function(t,n){return null==n&&(n=l),e.getStore().get(e.getDimensionIndex(t||0),n)},style:function(n,a){null==a&&(a=l);var i=e.getItemVisual(a,"style"),o=i&&i.fill,r=i&&i.opacity,s=_(a,Sh).getItemStyle();null!=o&&(s.fill=o),null!=r&&(s.opacity=r);var u={inheritColor:N(o)?o:wt.color.neutral99},d=b(a,Sh),c=qt(d,null,u,!1,!0);c.text=d.getShallow("show")?x(t.getFormattedLabel(a,Sh),na(e,a)):null;var h=wa(d,u,!1);return S(n,s),s=eh(s,c,h),n&&w(s,n),s.legacy=!0,s},ordinalRawValue:function(t,n){null==n&&(n=l),t=t||0;var a=e.getDimensionInfo(t);if(!a){var i=e.getDimensionIndex(t);return i>=0?e.getStore().get(i,n):void 0}var o=e.get(a.name,n),r=a&&a.ordinalMeta;return r?r.categories[o]:o},styleEmphasis:function(n,a){null==a&&(a=l);var i=_(a,wh).getItemStyle(),o=b(a,wh),r=qt(o,null,null,!0,!0);r.text=o.getShallow("show")?ve(t.getFormattedLabel(a,wh),t.getFormattedLabel(a,Sh),na(e,a)):null;var s=wa(o,null,!0);return S(n,i),i=eh(i,r,s),n&&w(i,n),i.legacy=!0,i},visual:function(t,n){if(null==n&&(n=l),ya(Uc,t)){var a=e.getItemVisual(n,"style");return a?a[Uc[t]]:null}if(ya(Hc,t))return e.getItemVisual(n,t)},barLayout:function(t){if("cartesian2d"===r.type){var e=r.getBaseAxis();return Sa(At({axis:e},t))}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return Ia(t,n)}},s.api||{}),c={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:s.coordSys,dataInsideLength:e.count(),encode:Gh(t.getData()),itemPayload:t.get("itemPayload")||{}},h={},p={},g={},f={},y=0;y<Ch.length;y++){var v=Ch[y];g[v]=t.getModel(Lh[v]),f[v]=t.getModel(Th[v])}function m(t){return t===l?u||(u=e.getItemModel(t)):e.getItemModel(t)}function _(t,n){return e.hasItemOption?t===l?h[n]||(h[n]=m(t).getModel(Lh[n])):m(t).getModel(Lh[n]):g[n]}function b(t,n){return e.hasItemOption?t===l?p[n]||(p[n]=m(t).getModel(Th[n])):m(t).getModel(Th[n]):f[n]}return function(t,n){return l=t,u=null,h={},p={},i&&i(At({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},c),d)};function w(t,e){for(var n in e)ya(e,n)&&(t[n]=e[n])}function S(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}}function Gh(t){var e={};return l(t.dimensions,function(n){var a=t.getDimensionInfo(n);if(!a.isExtraCoord){var i=a.coordDim;(e[i]=e[i]||[])[a.coordDimIndex]=t.getDimensionIndex(n)}}),e}function Wh(t,e,n,a,i,o,r){if(a){var s=Fh(t,e,n,a,i,o);return s&&r.setItemGraphicEl(n,s),s&&Kt(s,a.focus,a.blurScope,a.emphasisDisabled),s}o.remove(e)}function Fh(t,e,n,a,i,o){var r=-1,s=e;e&&Yh(e,a,i)&&(r=b(o.childrenRef(),e),e=null);var l,u,d=!e,c=e;c?c.clearStates():(c=Rh(a),s&&(l=s,(u=c).copyTransform(l),kh(u)&&kh(l)&&(u.setStyle(l.style),u.z=l.z,u.z2=l.z2,u.zlevel=l.zlevel,u.invisible=l.invisible,u.ignore=l.ignore,Nh(u)&&Nh(l)&&u.setShape(l.shape)))),!1===a.morph?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),a.tooltipDisabled&&(c.tooltipDisabled=!0),Dh.normal.cfg=Dh.normal.conOpt=Dh.emphasis.cfg=Dh.emphasis.conOpt=Dh.blur.cfg=Dh.blur.conOpt=Dh.select.cfg=Dh.select.conOpt=null,Dh.isLegacy=!1,function(t,e,n,a,i,o){if(t.isGroup||"compoundPath"===t.type)return;Uh(n,null,o),Uh(n,wh,o);var r=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(null!=r||null!=s||null!=u||null!=l){var d=t.getTextContent();if(!1===r)d&&t.removeTextContent();else{r=o.normal.conOpt=r||{type:"text"},d?d.clearStates():(d=Rh(r),t.setTextContent(d)),zh(null,d,e,r,null,a,i);for(var c=r&&r.style,h=0;h<Ch.length;h++){var p=Ch[h];if(p!==Sh){var g=o[p].conOpt;Oh(p,d,0,Xh(r,g,p),null)}}c?d.dirty():d.markRedraw()}}}(c,n,a,i,d,Dh),function(t,e,n,a,i){var o=n.clipPath;if(!1===o)t&&t.getClipPath()&&t.removeClipPath();else if(o){var r=t.getClipPath();r&&Yh(r,o,a)&&(r=null),r||(r=Rh(o),t.setClipPath(r)),zh(null,r,e,o,null,a,i)}}(c,n,a,i,d),zh(t,c,n,a,Dh,i,d),ya(a,"info")&&(Xc(c).info=a.info);for(var h=0;h<Ch.length;h++){var p=Ch[h];if(p!==Sh){var g=Hh(a,p);Oh(p,c,0,Xh(a,g,p),Dh)}}return function(t,e,n){if(!t.isGroup){var a=t,i=n.currentZ,o=n.currentZLevel;a.z=i,a.zlevel=o;var r=e.z2;null!=r&&(a.z2=r||0);for(var s=0;s<Ch.length;s++)Vh(a,e,Ch[s])}}(c,a,i),"group"===a.type&&function(t,e,n,a,i){var o=a.children,r=o?o.length:0,s=a.$mergeChildren,l="byName"===s||a.diffChildrenByName,u=!1===s;if(!r&&!l&&!u)return;if(l)return d={api:t,oldChildren:e.children()||[],newChildren:o||[],dataIndex:n,seriesModel:i,group:e},void new $t(d.oldChildren,d.newChildren,jh,jh,d).add(qh).update(qh).remove(Kh).execute();var d;u&&e.removeAll();for(var c=0;c<r;c++){var h=o[c],p=e.childAt(c);h?(null==h.ignore&&(h.ignore=!1),Fh(t,p,n,h,i,e)):p.ignore=!0}for(var g=e.childCount()-1;g>=c;g--){var f=e.childAt(g);Zh(e,f,i)}}(t,c,n,a,i),r>=0?o.replaceAt(c,r):o.add(c),c}function Yh(t,e,n){var a,i=Xc(t),o=e.type,r=e.shape,s=e.style;return n.isUniversalTransitionEnabled()||null!=o&&o!==i.customGraphicType||"path"===o&&((a=r)&&(ya(a,"pathData")||ya(a,"d")))&&$h(r)!==i.customPathData||"image"===o&&ya(s,"image")&&s.image!==i.customImagePath}function Uh(t,e,n){var a=e?Hh(t,e):t,i=e?Xh(t,a,wh):t.style,o=t.type,r=a?a.textConfig:null,s=t.textContent,l=s?e?Hh(s,e):s:null;if(i&&(n.isLegacy||Qc(i,o,!!r,!!l))){n.isLegacy=!0;var u=Jc(i,o,!e);!r&&u.textConfig&&(r=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var d=l;!d.type&&(d.type="text")}var c=e?n[e]:n.normal;c.cfg=r,c.conOpt=l}function Hh(t,e){return e?t?t[e]:null:t}function Xh(t,e,n){var a=e&&e.style;return null==a&&n===wh&&t&&(a=t.styleEmphasis),a}function Zh(t,e,n){e&&dh(e,Xc(t).option,n)}function jh(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function qh(t,e){var n=this.context,a=null!=t?n.newChildren[t]:null,i=null!=e?n.oldChildren[e]:null;Fh(n.api,i,n.dataIndex,a,n.seriesModel,n.group)}function Kh(t){var e=this.context,n=e.oldChildren[t];n&&dh(n,Xc(n).option,e.seriesModel)}function $h(t){return t&&(t.pathData||t.d)}var Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.makeElOption=function(t,e,n,a,i){var o=n.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var r=o.polar,s=r.getOtherAxis(o).getExtent(),l=o.dataToCoord(e),u=a.get("type");if(u&&"none"!==u){var d=Ta(a),c=Jh[u](o,r,l,s);c.style=d,t.graphicKey=c.type,t.pointer=c}var h=function(t,e,n,a,i){var o=e.axis,r=o.dataToCoord(t),s=a.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,d,c=a.getRadiusAxis().getExtent();if("radius"===o.dim){var h=te();xn(h,h,s),Jt(h,h,[a.cx,a.cy]),l=_n([r,-i],h);var p=e.getModel("axisLabel").get("rotate")||0,g=Cn.innerTextLayout(s,p*Math.PI/180,-1);u=g.textAlign,d=g.textVerticalAlign}else{var f=c[1];l=a.coordToPoint([f+i,r]);var y=a.cx,v=a.cy;u=Math.abs(l[0]-y)/f<.3?"center":l[0]>y?"left":"right",d=Math.abs(l[1]-v)/f<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:u,verticalAlign:d}}(e,n,0,r,a.get(["label","margin"]));Aa(t,n,a,i,h)},e}(Da);var Jh={line:function(t,e,n,a){return"angle"===t.dim?{type:"Line",shape:Na(e.coordToPoint([a[0],n]),e.coordToPoint([a[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,a){var i=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:Pa(e.cx,e.cy,a[0],a[1],(-n-i/2)*o,(i/2-n)*o)}:{type:"Sector",shape:Pa(e.cx,e.cy,n-i/2,n+i/2,0,2*Math.PI)}}},tp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.findAxisModel=function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(fn),ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",wn).models[0]},e.type="polarAxis",e}(fn);Ve(ep,In);var np=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="angleAxis",e}(ep),ap=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="radiusAxis",e}(ep),ip=function(t){function e(e,n){return t.call(this,"radius",e,n)||this}return ft(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}(yn);ip.prototype.dataToRadius=yn.prototype.dataToCoord,ip.prototype.radiusToData=yn.prototype.coordToData;var op=t(),rp=function(t){function e(e,n){return t.call(this,"angle",e,n||[0,360])||this}return ft(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),n=t.scale,a=n.getExtent(),i=n.count();if(a[1]-a[0]<1)return 0;var o=a[0],r=t.dataToCoord(o+1)-t.dataToCoord(o),s=Math.abs(r),l=ka(null==o?"":o+"",e.getFont(),"center","top"),u=Math.max(l.height,7)/s;isNaN(u)&&(u=1/0);var d=Math.max(0,Math.floor(u)),c=op(t.model),h=c.lastAutoInterval,p=c.lastTickCount;return null!=h&&null!=p&&Math.abs(h-d)<=1&&Math.abs(p-i)<=1&&h>d?d=h:(c.lastTickCount=i,c.lastAutoInterval=d),d},e}(yn);rp.prototype.dataToAngle=yn.prototype.dataToCoord,rp.prototype.angleToData=yn.prototype.coordToData;var sp=["radius","angle"],lp=function(){function t(t){this.dimensions=sp,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new ip,this._angleAxis=new rp,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){return this["_"+t+"Axis"]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,a=this._radiusAxis;return n.scale.type===t&&e.push(n),a.scale.type===t&&e.push(a),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e,n){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)],n)},t.prototype.pointToData=function(t,e,n){n=n||[];var a=this.pointToCoord(t);return n[0]=this._radiusAxis.radiusToData(a[0],e),n[1]=this._angleAxis.angleToData(a[1],e),n},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,a=this.getAngleAxis(),i=a.getExtent(),o=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);a.inverse?o=r-360:r=o+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,u=l<o?1:-1;l<o||l>r;)l+=360*u;return[s,l]},t.prototype.coordToPoint=function(t,e){e=e||[];var n=t[0],a=t[1]/180*Math.PI;return e[0]=Math.cos(a)*n+this.cx,e[1]=-Math.sin(a)*n+this.cy,e},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),a=Math.PI/180,i=1e-4;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*a,endAngle:-n[1]*a,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,a=e-this.cy,o=n*n+a*a,r=this.r,s=this.r0;return r!==s&&o-i<=r*r&&o+i>=s*s},x:this.cx-e[1],y:this.cy-e[1],width:2*e[1],height:2*e[1]}},t.prototype.convertToPixel=function(t,e,n){return up(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return up(e)===this?this.pointToData(n):null},t}();function up(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function dp(t,e){var n=this,a=n.getAngleAxis(),i=n.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();l(Ea(e,"radius"),function(t){i.scale.unionExtentFromData(e,t)}),l(Ea(e,"angle"),function(t){a.scale.unionExtentFromData(e,t)})}}),mn(a.scale,a.model),mn(i.scale,i.model),"category"===a.type&&!a.onBand){var o=a.getExtent(),r=360/a.scale.count();a.inverse?o[1]+=r:o[1]-=r,a.setExtent(o[0],o[1])}}function cp(t,e){var n;if(t.type=e.get("type"),t.scale=vn(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),function(t){return"angleAxis"===t.mainType}(e)){t.inverse=t.inverse!==e.get("clockwise");var a=e.get("startAngle"),i=null!==(n=e.get("endAngle"))&&void 0!==n?n:a+(t.inverse?-360:360);t.setExtent(a,i)}e.axis=t,t.model=e}var hp={dimensions:sp,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,a){var i=new lp(a+"");i.update=dp;var o=i.getRadiusAxis(),r=i.getAngleAxis(),l=t.findAxisModel("radiusAxis"),u=t.findAxisModel("angleAxis");cp(o,l),cp(r,u),function(t,e,n){var a=e.get("center"),i=Bt(e,n).refContainer;t.cx=s(a[0],i.width)+i.x,t.cy=s(a[1],i.height)+i.y;var o=t.getRadiusAxis(),r=Math.min(i.width,i.height)/2,l=e.get("radius");null==l?l=[0,"100%"]:dt(l)||(l=[0,l]);var u=[s(l[0],r),s(l[1],r)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}(i,t,e),n.push(i),t.coordinateSystem=i,i.model=t}),t.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",wn).models[0];t.coordinateSystem=e.coordinateSystem}}),n}},pp=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function gp(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var a=t.coordToPoint([e[0],n]),i=t.coordToPoint([e[1],n]);return{x1:a[0],y1:a[1],x2:i[0],y2:i[1]}}function fp(t){return t.getRadiusAxis().inverse?0:1}function yp(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var vp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return ft(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,a=n.polar,i=a.getRadiusAxis().getExtent(),o=n.getTicksCoords({breakTicks:"none"}),r=n.getMinorTicksCoords(),s=A(n.getViewLabels(),function(t){t=at(t);var e=n.scale,a="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(a),t});yp(s),yp(o),l(pp,function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||mp[e](this.group,t,a,o,r,i,s)},this)}},e.type="angleAxis",e}(Ra),mp={axisLine:function(t,e,n,a,i,o){var r,s=e.getModel(["axisLine","lineStyle"]),l=n.getAngleAxis(),u=Math.PI/180,d=l.getExtent(),c=fp(n),h=c?0:1,p=360===Math.abs(d[1]-d[0])?"Circle":"Arc";(r=0===o[h]?new On[p]({shape:{cx:n.cx,cy:n.cy,r:o[c],startAngle:-d[0]*u,endAngle:-d[1]*u,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new Va({shape:{cx:n.cx,cy:n.cy,r:o[c],r0:o[h]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(r)},axisTick:function(t,e,n,a,i,o){var r=e.getModel("axisTick"),s=(r.get("inside")?-1:1)*r.get("length"),l=o[fp(n)],u=A(a,function(t){return new Je({shape:gp(n,[l,l+s],t.coord)})});t.add(za(u,{style:At(r.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,a,i,o){if(i.length){for(var r=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(r.get("inside")?-1:1)*s.get("length"),u=o[fp(n)],d=[],c=0;c<i.length;c++)for(var h=0;h<i[c].length;h++)d.push(new Je({shape:gp(n,[u,u+l],i[c][h].coord)}));t.add(za(d,{style:At(s.getModel("lineStyle").getLineStyle(),At(r.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,a,i,o,s){var u=e.getCategories(!0),d=e.getModel("axisLabel"),c=d.get("margin"),h=e.get("triggerEvent");l(s,function(a,i){var s=d,l=a.tickValue,p=o[fp(n)],g=n.coordToPoint([p+c,a.coord]),f=n.cx,y=n.cy,v=Math.abs(g[0]-f)/p<.3?"center":g[0]>f?"left":"right",m=Math.abs(g[1]-y)/p<.3?"middle":g[1]>y?"top":"bottom";if(u&&u[l]){var x=u[l];ct(x)&&x.textStyle&&(s=new zt(x.textStyle,d,d.ecModel))}var _=new Zt({silent:Cn.isLabelSilent(e),style:qt(s,{x:g[0],y:g[1],fill:s.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:a.formattedLabel,align:v,verticalAlign:m})});if(t.add(_),Oa({el:_,componentModel:e,itemName:a.formattedLabel,formatterParamsExtra:{isTruncated:function(){return _.isTruncated},value:a.rawLabel,tickIndex:i}}),h){var b=Cn.makeAxisEventDataBase(e);b.targetType="axisLabel",b.value=a.rawLabel,r(_).eventData=b}},this)},splitLine:function(t,e,n,a,i,o){var r=e.getModel("splitLine").getModel("lineStyle"),s=r.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],d=0;d<a.length;d++){var c=l++%s.length;u[c]=u[c]||[],u[c].push(new Je({shape:gp(n,o,a[d].coord)}))}for(d=0;d<u.length;d++)t.add(za(u[d],{style:At({stroke:s[d%s.length]},r.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,a,i,o){if(i.length){for(var r=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<i.length;l++)for(var u=0;u<i[l].length;u++)s.push(new Je({shape:gp(n,o,i[l][u].coord)}));t.add(za(s,{style:r.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,a,i,o){if(a.length){var r=e.getModel("splitArea").getModel("areaStyle"),s=r.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],d=Math.PI/180,c=-a[0].coord*d,h=Math.min(o[0],o[1]),p=Math.max(o[0],o[1]),g=e.get("clockwise"),f=1,y=a.length;f<=y;f++){var v=f===y?a[0].coord:a[f].coord,m=l++%s.length;u[m]=u[m]||[],u[m].push(new He({shape:{cx:n.cx,cy:n.cy,r0:h,r:p,startAngle:c,endAngle:-v*d,clockwise:g},silent:!0})),c=-v*d}for(f=0;f<u.length;f++)t.add(za(u[f],{style:At({fill:s[f%s.length]},r.getAreaStyle()),silent:!0}))}}},xp=["splitLine","splitArea","minorSplitLine"],_p=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return ft(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var a=this._axisGroup,i=this._axisGroup=new yt;this.group.add(i);var o=t.axis,r=o.polar,s=r.getAngleAxis(),u=o.getTicksCoords(),d=o.getMinorTicksCoords(),c=s.getExtent()[0],h=o.getExtent(),p=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(r,t,c),g=new Cn(t,n,p);g.build(),i.add(g.group),Ln(a,i,t),l(xp,function(e){t.get([e,"show"])&&!o.scale.isBlank()&&bp[e](this.group,t,r,c,h,u,d)},this)}},e.type="radiusAxis",e}(Ra),bp={splitLine:function(t,e,n,a,i,o){var r=e.getModel("splitLine").getModel("lineStyle"),s=r.get("color"),l=0,u=n.getAngleAxis(),d=Math.PI/180,c=u.getExtent(),h=360===Math.abs(c[1]-c[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var p=[],g=0;g<o.length;g++){var f=l++%s.length;p[f]=p[f]||[],p[f].push(new On[h]({shape:{cx:n.cx,cy:n.cy,r:Math.max(o[g].coord,0),startAngle:-c[0]*d,endAngle:-c[1]*d,clockwise:u.inverse}}))}for(g=0;g<p.length;g++)t.add(za(p[g],{style:At({stroke:s[g%s.length],fill:null},r.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,a,i,o,r){if(r.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],u=0;u<r.length;u++)for(var d=0;d<r[u].length;d++)l.push(new aa({shape:{cx:n.cx,cy:n.cy,r:r[u][d].coord}}));t.add(za(l,{style:At({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,a,i,o){if(o.length){var r=e.getModel("splitArea").getModel("areaStyle"),s=r.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],d=o[0].coord,c=1;c<o.length;c++){var h=l++%s.length;u[h]=u[h]||[],u[h].push(new He({shape:{cx:n.cx,cy:n.cy,r0:d,r:o[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),d=o[c].coord}for(c=0;c<u.length;c++)t.add(za(u[c],{style:At({fill:s[c%s.length]},r.getAreaStyle()),silent:!0}))}}};function wp(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function Sp(t,e){return e.dim+t.model.componentIndex}function Ip(t,e,n){var a={},i=function(t){var e={};l(t,function(t,n){var a=t.getData(),i=t.coordinateSystem,o=i.getBaseAxis(),r=Sp(i,o),l=o.getExtent(),u="category"===o.type?o.getBandWidth():Math.abs(l[1]-l[0])/a.count(),d=e[r]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=d.stacks;e[r]=d;var h=wp(t);c[h]||d.autoWidthCount++,c[h]=c[h]||{width:0,maxWidth:0};var p=s(t.get("barWidth"),u),g=s(t.get("barMaxWidth"),u),f=t.get("barGap"),y=t.get("barCategoryGap");p&&!c[h].width&&(p=Math.min(d.remainedWidth,p),c[h].width=p,d.remainedWidth-=p),g&&(c[h].maxWidth=g),null!=f&&(d.gap=f),null!=y&&(d.categoryGap=y)});var n={};return l(e,function(t,e){n[e]={};var a=t.stacks,i=t.bandWidth,o=s(t.categoryGap,i),r=s(t.gap,1),u=t.remainedWidth,d=t.autoWidthCount,c=(u-o)/(d+(d-1)*r);c=Math.max(c,0),l(a,function(t,e){var n=t.maxWidth;n&&n<c&&(n=Math.min(n,u),t.width&&(n=Math.min(n,t.width)),u-=n,t.width=n,d--)}),c=(u-o)/(d+(d-1)*r),c=Math.max(c,0);var h,p=0;l(a,function(t,e){t.width||(t.width=c),h=t,p+=t.width*(1+r)}),h&&(p-=h.width*r);var g=-p/2;l(a,function(t,a){n[e][a]=n[e][a]||{offset:g,width:t.width},g+=t.width*(1+r)})}),n}(d(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),r=Sp(n,o),s=wp(t),l=i[r][s],u=l.offset,d=l.width,c=n.getOtherAxis(o),h=t.coordinateSystem.cx,p=t.coordinateSystem.cy,g=t.get("barMinHeight")||0,f=t.get("barMinAngle")||0;a[s]=a[s]||[];for(var y=e.mapDimension(c.dim),v=e.mapDimension(o.dim),m=Ba(e,y),x="radius"!==o.dim||!t.get("roundCap",!0),_=c.model.get("startValue"),b=c.dataToCoord(_||0),w=0,S=e.count();w<S;w++){var I=e.get(y,w),M=e.get(v,w),C=I>=0?"p":"n",L=b;m&&(a[s][M]||(a[s][M]={p:b,n:b}),L=a[s][M][C]);var T=void 0,A=void 0,D=void 0,P=void 0;if("radius"===c.dim){var N=c.dataToCoord(I)-b,k=o.dataToCoord(M);Math.abs(N)<g&&(N=(N<0?-1:1)*g),T=L,A=L+N,P=(D=k-u)-d,m&&(a[s][M][C]=A)}else{var E=c.dataToCoord(I,x)-b,R=o.dataToCoord(M);Math.abs(E)<f&&(E=(E<0?-1:1)*f),A=(T=R+u)+d,D=L,P=L+E,m&&(a[s][M][C]=P)}e.setItemLayout(w,{cx:h,cy:p,r0:T,r:A,startAngle:-D*Math.PI/180,endAngle:-P*Math.PI/180,clockwise:D>=P})}}})}var Mp={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},Cp={splitNumber:5},Lp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="polar",e}(gn);function Tp(t,e){e=e||{};var n=t.coordinateSystem,a=t.axis,i={},o=a.position,r=a.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=["vertical"===r?u.vertical[o]:l[0],"horizontal"===r?u.horizontal[o]:l[3]];i.rotation=Math.PI/2*{horizontal:0,vertical:1}[r];i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),fe(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var d=t.get(["axisLabel","rotate"]);return i.labelRotate="top"===o?-d:d,i.z2=1,i}var Ap=["splitArea","splitLine","breakArea"],Dp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return ft(e,t),e.prototype.render=function(e,n,a,i){var o=this.group;o.removeAll();var r=this._axisGroup;this._axisGroup=new yt;var s=Tp(e),u=new Cn(e,a,s);u.build(),o.add(this._axisGroup),o.add(u.group),l(Ap,function(t){e.get([t,"show"])&&Pp[t](this,this.group,this._axisGroup,e,a)},this),Ln(r,this._axisGroup,e),t.prototype.render.call(this,e,n,a,i)},e.prototype.remove=function(){Wa(this)},e.type="singleAxis",e}(Ra),Pp={splitLine:function(t,e,n,a,i){var o=a.axis;if(!o.scale.isBlank()){var r=a.getModel("splitLine"),s=r.getModel("lineStyle"),l=s.get("color");l=l instanceof Array?l:[l];for(var u=s.get("width"),d=a.coordinateSystem.getRect(),c=o.isHorizontal(),h=[],p=0,g=o.getTicksCoords({tickModel:r,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),f=[],y=[],v=0;v<g.length;++v){var m=o.toGlobalCoord(g[v].coord);c?(f[0]=m,f[1]=d.y,y[0]=m,y[1]=d.y+d.height):(f[0]=d.x,f[1]=m,y[0]=d.x+d.width,y[1]=m);var x=new Je({shape:{x1:f[0],y1:f[1],x2:y[0],y2:y[1]},silent:!0});Ua(x.shape,u);var _=p++%l.length;h[_]=h[_]||[],h[_].push(x)}var b=s.getLineStyle(["color"]);for(v=0;v<h.length;++v)e.add(za(h[v],{style:At({stroke:l[v%l.length]},b),silent:!0}))}},splitArea:function(t,e,n,a,i){Ya(t,n,a,a)},breakArea:function(t,e,n,a,i){var o=Fa(),r=a.axis.scale;o&&"ordinal"!==r.type&&o.rectCoordBuildBreakAxis(e,t,a,a.coordinateSystem.getRect(),i)}},Np=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},e}(fn);Ve(Np,In.prototype);var kp=function(t){function e(e,n,a,i,o){var r=t.call(this,e,n,a)||this;return r.type=i||"value",r.position=o||"bottom",r}return ft(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(yn),Ep=["single"],Rp=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=Ep,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var a=this.dimension,i=new kp(a,vn(t),[0,0],t.get("type"),t.get("position")),o="category"===i.type;i.onBand=o&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),t.axis=i,i.model=t,i.coordinateSystem=this,this._axis=i},t.prototype.update=function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();l(e.mapDimensionsAll(this.dimension),function(t){this._axis.scale.unionExtentFromData(e,t)},this),mn(this._axis.scale,this._axis.model)}},this)},t.prototype.resize=function(t,e){var n=Bt(t,e).refContainer;this._rect=Gt(t.getBoxLayoutParams(),n),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),a=n?[0,t.width]:[0,t.height],i=e.inverse?1:0;e.setExtent(a[i],a[1-i]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),a=n[0]+n[1],i=t.isHorizontal();t.toGlobalCoord=i?function(t){return t+e}:function(t){return a-t+e},t.toLocalCoord=i?function(t){return t-e}:function(t){return a-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t,e,n){n=n||[];var a=this.getAxis();return n[0]=a.coordToData(a.toLocalCoord(t["horizontal"===a.orient?0:1])),n},t.prototype.dataToPoint=function(t,e,n){var a=this.getAxis(),i=this.getRect();n=n||[];var o="horizontal"===a.orient?0:1;return t instanceof Array&&(t=t[0]),n[o]=a.toGlobalCoord(a.dataToCoord(+t)),n[1-o]=0===o?i.y+i.height/2:i.x+i.width/2,n},t.prototype.convertToPixel=function(t,e,n){return zp(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return zp(e)===this?this.pointToData(n):null},t}();function zp(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var Op={create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(a,i){var o=new Rp(a,t,e);o.name="single_"+i,o.resize(a,e),a.coordinateSystem=o,n.push(o)}),t.eachSeries(function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",wn).models[0];t.coordinateSystem=e&&e.coordinateSystem}}),n},dimensions:Ep},Vp=["x","y"],Bp=["width","height"],Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.makeElOption=function(t,e,n,a,i){var o=n.axis,r=o.coordinateSystem,s=Yp(r,1-Fp(o)),l=r.dataToPoint(e)[0],u=a.get("type");if(u&&"none"!==u){var d=Ta(a),c=Wp[u](o,l,s);c.style=d,t.graphicKey=c.type,t.pointer=c}var h=Tp(n);Ha(e,t,h,n,a,i)},e.prototype.getHandleTransform=function(t,e,n){var a=Tp(e,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var i=Xa(e.axis,t,a);return{x:i[0],y:i[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,a){var i=n.axis,o=i.coordinateSystem,r=Fp(i),s=Yp(o,r),l=[t.x,t.y];l[r]+=e[r],l[r]=Math.min(s[1],l[r]),l[r]=Math.max(s[0],l[r]);var u=Yp(o,1-r),d=(u[1]+u[0])/2,c=[d,d];return c[r]=l[r],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:c,tooltipOption:{verticalAlign:"middle"}}},e}(Da),Wp={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:Na([e,n[0]],[e,n[1]],Fp(t))}},shadow:function(t,e,n){var a=t.getBandWidth(),i=n[1]-n[0];return{type:"Rect",shape:Za([e-a/2,n[0]],[a,i],Fp(t))}}};function Fp(t){return t.isHorizontal()?0:1}function Yp(t,e){var n=t.getRect();return[n[Vp[e]],n[Vp[e]]+n[Bp[e]]]}var Up=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="single",e}(gn);var Hp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(e,n,a){var i=ja(e);t.prototype.init.apply(this,arguments),Xp(e,i)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),Xp(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.layoutMode="box",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:wt.color.axisLine,width:1,type:"solid"}},itemStyle:{color:wt.color.neutral00,borderWidth:1,borderColor:wt.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:wt.size.s,color:wt.color.secondary},monthLabel:{show:!0,position:"start",margin:wt.size.s,align:"center",formatter:null,color:wt.color.secondary},yearLabel:{show:!0,position:null,margin:wt.size.xl,formatter:null,color:wt.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(fn);function Xp(t,e){var n,a=t.cellSize;1===(n=dt(a)?a:t.cellSize=[a,a]).length&&(n[1]=n[0]);var i=A([0,1],function(t){return qa(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});Ka(t,e,{type:"box",ignoreSize:i})}var Zp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.render=function(t,e,n){var a=this.group;a.removeAll();var i=t.coordinateSystem,o=i.getRangeInfo(),r=i.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,o,a),this._renderLines(t,o,r,a),this._renderYearText(t,o,r,a),this._renderMonthText(t,s,r,a),this._renderWeekText(t,s,o,r,a)},e.prototype._renderDayRect=function(t,e,n){for(var a=t.coordinateSystem,i=t.getModel("itemStyle").getItemStyle(),o=a.getCellWidth(),r=a.getCellHeight(),s=e.start.time;s<=e.end.time;s=a.getNextNDay(s,1).time){var l=a.dataToCalendarLayout([s],!1).tl,u=new ce({shape:{x:l[0],y:l[1],width:o,height:r},cursor:"default",style:i});n.add(u)}},e.prototype._renderLines=function(t,e,n,a){var i=this,o=t.coordinateSystem,r=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=r.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=e.start,d=0;u.time<=e.end.time;d++){h(u.formatedDate),0===d&&(u=o.getDateInfo(e.start.y+"-"+e.start.m));var c=u.date;c.setMonth(c.getMonth()+1),u=o.getDateInfo(c)}function h(e){i._firstDayOfMonth.push(o.getDateInfo(e)),i._firstDayPoints.push(o.dataToCalendarLayout([e],!1).tl);var l=i._getLinePointsOfOneWeek(t,e,n);i._tlpoints.push(l[0]),i._blpoints.push(l[l.length-1]),s&&i._drawSplitline(l,r,a)}h(o.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,l,n),r,a),s&&this._drawSplitline(i._getEdgesPoints(i._blpoints,l,n),r,a)},e.prototype._getEdgesPoints=function(t,e,n){var a=[t[0].slice(),t[t.length-1].slice()],i="horizontal"===n?0:1;return a[0][i]=a[0][i]-e/2,a[1][i]=a[1][i]+e/2,a},e.prototype._drawSplitline=function(t,e,n){var a=new rn({z2:20,shape:{points:t},style:e});n.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var a=t.coordinateSystem,i=a.getDateInfo(e),o=[],r=0;r<7;r++){var s=a.getNextNDay(i.time,r),l=a.dataToCalendarLayout([s.time],!1);o[2*s.day]=l.tl,o[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,e){return N(t)&&t?$a(t,e):i(t)?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,n,a,i){var o=e[0],r=e[1],s=["center","bottom"];"bottom"===a?(r+=i,s=["center","top"]):"left"===a?o-=i:"right"===a?(o+=i,s=["center","top"]):r-=i;var l=0;return"left"!==a&&"right"!==a||(l=Math.PI/2),{rotation:l,x:o,y:r,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,n,a){var i=t.getModel("yearLabel");if(i.get("show")){var o=i.get("margin"),r=i.get("position");r||(r="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,d="horizontal"===n?0:1,c={top:[l,s[d][1]],bottom:[l,s[1-d][1]],left:[s[1-d][0],u],right:[s[d][0],u]},h=e.start.y;+e.end.y>+e.start.y&&(h=h+"-"+e.end.y);var p=i.get("formatter"),g={start:e.start.y,end:e.end.y,nameMap:h},f=this._formatterLabel(p,g),y=new Zt({z2:30,style:qt(i,{text:f}),silent:i.get("silent")});y.attr(this._yearTextPositionControl(y,c[r],n,r,o)),a.add(y)}},e.prototype._monthTextPositionControl=function(t,e,n,a,i){var o="left",r="top",s=t[0],l=t[1];return"horizontal"===n?(l+=i,e&&(o="center"),"start"===a&&(r="bottom")):(s+=i,e&&(r="middle"),"start"===a&&(o="right")),{x:s,y:l,align:o,verticalAlign:r}},e.prototype._renderMonthText=function(t,e,n,a){var i=t.getModel("monthLabel");if(i.get("show")){var o=i.get("nameMap"),r=i.get("margin"),s=i.get("position"),l=i.get("align"),u=[this._tlpoints,this._blpoints];o&&!N(o)||(o&&(e=Qa(o)||e),o=e.get(["time","monthAbbr"])||[]);var d="start"===s?0:1,c="horizontal"===n?0:1;r="start"===s?-r:r;for(var h="center"===l,p=i.get("silent"),g=0;g<u[d].length-1;g++){var f=u[d][g].slice(),y=this._firstDayOfMonth[g];if(h){var v=this._firstDayPoints[g];f[c]=(v[c]+u[0][g+1][c])/2}var m=i.get("formatter"),x=o[+y.m-1],_={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:x},b=this._formatterLabel(m,_),w=new Zt({z2:30,style:R(qt(i,{text:b}),this._monthTextPositionControl(f,h,n,s,r)),silent:p});a.add(w)}}},e.prototype._weekTextPositionControl=function(t,e,n,a,i){var o="center",r="middle",s=t[0],l=t[1],u="start"===n;return"horizontal"===e?(s=s+a+(u?1:-1)*i[0]/2,o=u?"right":"left"):(l=l+a+(u?1:-1)*i[1]/2,r=u?"bottom":"top"),{x:s,y:l,align:o,verticalAlign:r}},e.prototype._renderWeekText=function(t,e,n,a,i){var o=t.getModel("dayLabel");if(o.get("show")){var r=t.coordinateSystem,l=o.get("position"),u=o.get("nameMap"),d=o.get("margin"),c=r.getFirstDayOfWeek();if(!u||N(u))u&&(e=Qa(u)||e),u=e.get(["time","dayOfWeekShort"])||A(e.get(["time","dayOfWeekAbbr"]),function(t){return t[0]});var h=r.getNextNDay(n.end.time,7-n.lweek).time,p=[r.getCellWidth(),r.getCellHeight()];d=s(d,Math.min(p[1],p[0])),"start"===l&&(h=r.getNextNDay(n.start.time,-(7+n.fweek)).time,d=-d);for(var g=o.get("silent"),f=0;f<7;f++){var y,v=r.getNextNDay(h,f),m=r.dataToCalendarLayout([v.time],!1).center;y=Math.abs((f+c)%7);var x=new Zt({z2:30,style:R(qt(o,{text:u[y]}),this._weekTextPositionControl(m,a,l,d,p)),silent:g});i.add(x)}}},e.type="calendar",e}(gn),jp=864e5,qp=function(){function t(e,n,a){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e,this._update(n,a)}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){var e=(t=Ja(t)).getFullYear(),n=t.getMonth()+1,a=n<10?"0"+n:""+n,i=t.getDate(),o=i<10?"0"+i:""+i,r=t.getDay();return{y:e+"",m:a,d:o,day:r=Math.abs((r+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+a+"-"+o,date:t}},t.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},t.prototype._update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,a=["width","height"],i=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),r="horizontal"===this._orient?[n,7]:[7,n];l([0,1],function(t){d(i,t)&&(o[a[t]]=i[t]*r[t])});var s={width:e.getWidth(),height:e.getHeight()},u=this._rect=Gt(o,s);function d(t,e){return null!=t[e]&&"auto"!==t[e]}l([0,1],function(t){d(i,t)||(i[t]=u[a[t]]/r[t])}),this._sw=i[0],this._sh=i[1]},t.prototype.dataToPoint=function(t,e,n){n=n||[],dt(t)&&(t=t[0]),null==e&&(e=!0);var a=this.getDateInfo(t),i=this._rangeInfo,o=a.formatedDate;if(e&&!(a.time>=i.start.time&&a.time<i.end.time+jp))return n[0]=n[1]=NaN,n;var r=a.day,s=this._getRangeInfo([i.start.time,o]).nthWeek;return"vertical"===this._orient?(n[0]=this._rect.x+r*this._sw+this._sw/2,n[1]=this._rect.y+s*this._sh+this._sh/2):(n[0]=this._rect.x+s*this._sw+this._sw/2,n[1]=this._rect.y+r*this._sh+this._sh/2),n},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToLayout=function(t,n,a){var i=(a=a||{}).rect=a.rect||{},o=a.contentRect=a.contentRect||{},r=this.dataToPoint(t,n);return i.x=r[0]-this._sw/2,i.y=r[1]-this._sh/2,i.width=this._sw,i.height=this._sh,e.copy(o,i),ti(o,this._lineWidth/2,!0,!0),a},t.prototype.dataToCalendarLayout=function(t,e){var n=this.dataToPoint(t,e);return{center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,a):this._getDateByWeeksAndDay(e,n-1,a)},t.prototype.convertToPixel=function(t,e,n){var a=Kp(e);return a===this?a.dataToPoint(n):null},t.prototype.convertToLayout=function(t,e,n){var a=Kp(e);return a===this?a.dataToLayout(n):null},t.prototype.convertFromPixel=function(t,e,n){var a=Kp(e);return a===this?a.pointToData(n):null},t.prototype.containPoint=function(t){return!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(dt(e)&&1===e.length&&(e=e[0]),dt(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var a=this.getDateInfo(n),i=a.date;i.setMonth(i.getMonth()+1);var o=this.getNextNDay(i,-1);t=[a.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var r=this._getRangeInfo(t);return r.start.time>r.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var a=Math.floor(n[1].time/jp)-Math.floor(n[0].time/jp)+1,i=new Date(n[0].time),o=i.getDate(),r=n[1].date.getDate();i.setDate(o+a-1);var s=i.getDate();if(s!==r)for(var l=i.getTime()-n[1].time>0?1:-1;(s=i.getDate())!==r&&(i.getTime()-n[1].time)*l>0;)a-=l,i.setDate(s-l);var u=Math.floor((a+n[0].day+6)/7),d=e?1-u:u-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:a,weeks:u,nthWeek:d,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,n){var a=this._getRangeInfo(n);if(t>a.weeks||0===t&&e<a.fweek||t===a.weeks&&e>a.lweek)return null;var i=7*(t-1)-a.fweek+e,o=new Date(a.start.time);return o.setDate(+a.start.d+i),this.getDateInfo(o)},t.create=function(e,n){var a=[];return e.eachComponent("calendar",function(i){var o=new t(i,e,n);a.push(o),i.coordinateSystem=o}),e.eachComponent(function(t,e){Te({targetModel:e,coordSysType:"calendar",coordSysProvider:ei})}),a},t.dimensions=["time","value"],t}();function Kp(t){var e=t.calendarModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem:null}var $p=1,Qp=2,Jp=3,tg={none:0,all:1,body:2,corner:3};function eg(t,e,n){var a=e[ni[n]].getCell(t);return!a&&O(t)&&t<0&&(a=e[ni[1-n]].getUnitLayoutInfo(n,Math.round(t))),a}function ng(t){var e=t||[];return e[0]=e[0]||[],e[1]=e[1]||[],e[0][0]=e[0][1]=e[1][0]=e[1][1]=NaN,e}function ag(t,e,n,a,i){ig(t[0],e,i,n,a,0),ig(t[1],e,i,n,a,1)}function ig(t,e,n,a,i,o){t[0]=1/0,t[1]=-1/0;var r=a[o],s=dt(r)?r:[r],l=s.length,u=!!n;if(l>=1?(og(t,e,s,u,i,o,0),l>1&&og(t,e,s,u,i,o,l-1)):t[0]=t[1]=NaN,u){var d=-i[ni[1-o]].getLocatorCount(o),c=i[ni[o]].getLocatorCount(o)-1;n===tg.body?d=ii(0,d):n===tg.corner&&(c=oi(-1,c)),c<d&&(d=c=NaN),dn(t[0])&&(t[0]=d),dn(t[1])&&(t[1]=c),t[0]=ii(oi(t[0],c),d),t[1]=ii(oi(t[1],c),d)}}function og(t,e,n,a,i,o,r){var s=eg(n[r],i,o);if(s){var l,u=s.id[ni[o]],d=u,c=!(l=s)||l.type!==Qp&&l.type!==Jp?null:l;c&&(d+=c.span[ni[o]]-1),t[0]=oi(t[0],u,d),t[1]=ii(t[1],u,d)}else t[0]=t[1]=NaN}function rg(t,e){return dn(t[e][0])||dn(t[e][1])}function sg(t,e,n,a){e=e||lg;for(var i=0;i<a;i++)e[i]=!1;for(;;){var o=!1;for(i=0;i<a;i++){var r=n[i];!e[i]&&r.cellMergeOwner&&ug(t,r.locatorRange)&&(e[i]=!0,o=!0)}if(!o)break}}var lg=[];function ug(t,e){return!(!dg(t[0],e[0])||!dg(t[1],e[1]))&&(t[0][0]=oi(t[0][0],e[0][0]),t[0][1]=ii(t[0][1],e[0][1]),t[1][0]=oi(t[1][0],e[1][0]),t[1][1]=ii(t[1][1],e[1][1]),!0)}function dg(t,e){return t[1]>=e[0]&&t[0]<=e[1]}function cg(t,e){t.id.set(e[0][0],e[1][0]),t.span.set(e[0][1]-t.id.x+1,e[1][1]-t.id.y+1)}function hg(t,e,n,a){var i=eg(e[a][0],n,a),o=eg(e[a][1],n,a);t[ni[a]]=t[ai[a]]=NaN,i&&o&&(t[ni[a]]=i.xy,t[ai[a]]=o.xy+o.wh-i.xy)}function pg(t,e,n,a){return t[ni[e]]=n,t[ni[1-e]]=a,t}var gg=function(){function t(t,e){this._cells=[],this._levels=[],this.dim=t,this.dimIdx="x"===t?0:1,this._model=e,this._uniqueValueGen=function(t){var e=t.toUpperCase(),n=new RegExp("^"+e+"([0-9]+)$"),a=0;function i(t){var e;null!=t&&(e=t.match(n))&&(a=ii(a,+e[1]+1))}function o(){return""+e+a++}function r(t,e){for(var n=Yt(),a=0;a<t.length;a++){var i=t[a];null!=i&&null==n.get(i)||(t[a]=i=o(),e[a].option=At({value:i},e[a].option)),n.set(i,!0)}}return{calcDupBase:i,ensureValueUnique:r}}(t);var n=e.get("data",!0);null==n||dt(n)||(n=[]),n?this._initByDimModelData(n):this._initBySeriesData()}return t.prototype._initByDimModelData=function(t){var e=this,n=e._cells,a=e._levels,i=[],o=0;return e._leavesCount=function t(n,r,s){var u=0;if(!n)return u;return l(n,function(n,l){var d;N(n)?d={value:n}:ct(n)?(d=n,null==n.value||N(n.value)||(d={value:null})):d={value:null};var c={type:Jp,ordinal:NaN,level:s,firstLeafLocator:r,id:new sn,span:pg(new sn,e.dimIdx,1,1),option:d,xy:NaN,wh:NaN,dim:e,rect:{x:NaN,y:NaN,width:NaN,height:NaN}};o++,(i[r]||(i[r]=[])).push(c),a[s]||(a[s]={type:$p,xy:NaN,wh:NaN,option:null,id:new sn,dim:e});var h=t(d.children,r,s+1),p=Math.max(1,h);c.span[ni[e.dimIdx]]=p,u+=p,r+=p}),u}(t,0,0),void function(){var t=[];for(;n.length<o;)for(var a=0;a<i.length;a++){var r=i[a].pop();if(r){r.ordinal=t.length;var s=r.option.value;t.push(s),n.push(r),e._uniqueValueGen.calcDupBase(s)}}e._uniqueValueGen.ensureValueUnique(t,n);var l=e._ordinalMeta=new ri({categories:t,needCollect:!1,deduplication:!1});e._scale=new si({ordinalMeta:l});for(var u=0;u<e._leavesCount;u++){var d=e._cells[u];d.type=Qp,d.span[ni[1-e.dimIdx]]=e._levels.length-d.level}e._initCellsId(),e._initLevelIdOptions()}()},t.prototype._initBySeriesData=function(){var t=this;t._leavesCount=0,t._levels=[{type:$p,xy:NaN,wh:NaN,option:null,id:new sn,dim:t}],t._initLevelIdOptions();var e=t._ordinalMeta=new ri({needCollect:!0,deduplication:!0,onCollect:function(e,n){var a=t._cells[n]={type:Qp,ordinal:n,level:0,firstLeafLocator:n,id:new sn,span:pg(new sn,t.dimIdx,1,1),option:{value:e+""},xy:NaN,wh:NaN,dim:t,rect:{x:NaN,y:NaN,width:NaN,height:NaN}};t._leavesCount++,t._setCellId(a)}});t._scale=new si({ordinalMeta:e})},t.prototype._setCellId=function(t){var e=this._levels.length,n=this.dimIdx;pg(t.id,n,t.firstLeafLocator,t.level-e)},t.prototype._initCellsId=function(){var t=this._levels.length,e=this.dimIdx;l(this._cells,function(n){pg(n.id,e,n.firstLeafLocator,n.level-t)})},t.prototype._initLevelIdOptions=function(){var t=this._levels.length,e=this.dimIdx,n=this._model.get("levels",!0);n=dt(n)?n:[],l(this._levels,function(a,i){pg(a.id,e,0,i-t),a.option=n[i]})},t.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},t.prototype.resetLayoutIterator=function(t,e,n,a){if(t=t||new li,e===this.dimIdx){var i=this._leavesCount,o=null!=n?Math.max(0,n):0;a=null!=a?Math.min(a,i):i,t.reset(this._cells,o,o+a)}else{i=this._levels.length,o=null!=n?Math.max(0,n+i):0;a=null!=a?Math.min(a,i):i,t.reset(this._levels,o,o+a)}return t},t.prototype.resetCellIterator=function(t){return(t||new li).reset(this._cells,0)},t.prototype.resetLevelIterator=function(t){return(t||new li).reset(this._levels,0)},t.prototype.getLayout=function(t,e,n){var a=this.getUnitLayoutInfo(e,n);t[ni[e]]=a?a.xy:NaN,t[ai[e]]=a?a.wh:NaN},t.prototype.getUnitLayoutInfo=function(t,e){return t===this.dimIdx?e<this._leavesCount?this._cells[e]:void 0:this._levels[e+this._levels.length]},t.prototype.getCell=function(t){var e=this._scale.parse(t);return dn(e)?void 0:this._cells[e]},t.prototype.getLocatorCount=function(t){return t===this.dimIdx?this._leavesCount:this._levels.length},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t}();var fg=function(){function t(t,e,n){this._model=e,this._dims=n,this._kind=t,this._cellMergeOwnerList=[]}return t.prototype._ensureCellMap=function(){var t=this,e=t._cellMap;return e||(e=t._cellMap=Yt(),function(){var e=[],a=t._model.getShallow("data");a&&!dt(a)&&(a=null);l(a,function(n,a){if(ct(n)&&dt(n.coord)){var i=ng([]);if(ag(i,null,n.coord,t._dims,n.coordClamp?tg[t._kind]:tg.none),!rg(i,0)&&!rg(i,1)){var o=n&&n.mergeCells,r={id:new sn,span:new sn,locatorRange:i,option:n,cellMergeOwner:o};cg(r,i),e.push(r)}}});for(var i=[],o=0;o<e.length;o++){var r=e[o];if(r.cellMergeOwner){var s=r.locatorRange;sg(s,i,e,o);for(var u=0;u<o;u++)i[u]&&(e[u].cellMergeOwner=!1);if(s[0][0]!==r.id.x||s[1][0]!==r.id.y){r.cellMergeOwner=!1;var d=R({},r.option);d.coord=null;var c={id:new sn,span:new sn,locatorRange:s,option:d,cellMergeOwner:!0};cg(c,s),e.push(c)}}}l(e,function(e){var a=n(e.id.x,e.id.y);if(e.cellMergeOwner&&(a.cellMergeOwner=!0,a.span=e.span,a.locatorRange=e.locatorRange,a.spanRect={x:NaN,y:NaN,width:NaN,height:NaN},t._cellMergeOwnerList.push(a)),e.cellMergeOwner||e.option)for(var i=0;i<e.span.y;i++)for(var o=0;o<e.span.x;o++){var r=n(e.id.x+o,e.id.y+i);r.option=e.option,e.cellMergeOwner&&(r.inSpanOf=a)}})}()),e;function n(t,n){var a=vg(t,n),i=e.get(a);return i||(i=e.set(a,{id:new sn(t,n),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),i}},t.prototype.getCell=function(t){return this._ensureCellMap().get(vg(t[0],t[1]))},t.prototype.travelExistingCells=function(t){this._ensureCellMap().each(t)},t.prototype.expandRangeByCellMerge=function(t){if(!rg(t,0)&&!rg(t,1)&&t[0][0]===t[0][1]&&t[1][0]===t[1][1]){yg[0]=t[0][0],yg[1]=t[1][0];var e=this.getCell(yg),n=e&&e.inSpanOf;if(n)return a=t,i=n.locatorRange,a[0][0]=i[0][0],a[0][1]=i[0][1],a[1][0]=i[1][0],void(a[1][1]=i[1][1])}var a,i,o=this._cellMergeOwnerList;sg(t,null,o,o.length)},t}(),yg=[];function vg(t,e){return t+"|"+e}var mg={show:!0,color:wt.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function xg(t){return{color:"none",borderWidth:1,borderColor:t?"none":wt.color.borderTint}}var _g={show:!0,label:mg,itemStyle:xg(!1),silent:void 0,dividerLineStyle:{width:1,color:wt.color.border}},bg={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:_g,y:_g,body:{label:mg,itemStyle:xg(!1),silent:void 0},corner:{label:mg,itemStyle:xg(!0),silent:void 0},backgroundStyle:{color:"none",borderColor:wt.color.axisLine,borderWidth:1}},wg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.optionUpdated=function(){var t=this._dimModels={x:new Sg(this.get("x",!0)||{}),y:new Sg(this.get("y",!0)||{})};t.x.option.type=t.y.option.type="category";var e={x:t.x.dim=new gg("x",t.x),y:t.y.dim=new gg("y",t.y)};this._body=new fg("body",new zt(this.getShallow("body")),e),this._corner=new fg("corner",new zt(this.getShallow("corner")),e)},e.prototype.getDimensionModel=function(t){return this._dimModels[t]},e.prototype.getBody=function(){return this._body},e.prototype.getCorner=function(){return this._corner},e.type="matrix",e.layoutMode="box",e.defaultOption=bg,e}(fn),Sg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},e}(zt),Ig=Math.round,Mg={normal:25,special:100},Cg={normal:50,special:125},Lg=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ft(n,t),n.prototype.render=function(t,n){this.group.removeAll();var a=this.group,i=t.coordinateSystem.getRect(),o=t.getDimensionModel("x"),r=t.getDimensionModel("y"),s=o.dim,l=r.dim;!function(t,n,a){function i(i){var o=n.getDimensionModel(ni[i]),r=o.dim;if(r.shouldShow())for(var s=o.getModel("itemStyle"),l=o.getModel("label"),u=n.getShallow("tooltip",!0),d=[],c=r.resetCellIterator();c.next();){var h=c.item,p={};e.copy(p,h.rect),Me(d,h.id.x,h.id.y),Tg(d,n,t,a,h.option,s,l,o,p,h.option.value,Cg,u)}}i(0),i(1)}(a,t,n),function(t,n,a,i,o){r("body",n.getBody(),a,i),a.shouldShow()&&i.shouldShow()&&r("corner",n.getCorner(),i,a);function r(a,i,r,s){var l=new zt(n.getShallow(a,!0)),u=l.getModel("itemStyle"),d=l.getModel("label"),c=new li,h=new li,p=[],g=n.getShallow("tooltip",!0);for(s.resetLayoutIterator(h,1);h.next();)for(r.resetLayoutIterator(c,0);c.next();){var f=c.item,y=h.item;Me(p,f.id.x,y.id.y);var v=i.getCell(p);if(!v||!v.inSpanOf||v.inSpanOf===v){var m={};v&&v.span?e.copy(m,v.spanRect):(f.dim.getLayout(m,0,p[0]),y.dim.getLayout(m,1,p[1]));var x=v?v.option:null;Tg(p,n,t,o,x,u,d,l,m,x?x.value:null,Mg,g)}}}}(a,t,s,l,n);var u=t.getShallow("borderZ2",!0),d=x(u,99),c=d-1,h=t.getModel("backgroundStyle").getItemStyle(["borderWidth"]);h.lineWidth=0;var p=t.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);p.fill="none";var g=kg(i.clone(),h,0),f=kg(i.clone(),p,d);g.silent=!0,f.silent=!0,a.add(g),a.add(f);var y=s.getUnitLayoutInfo(0,0),v=l.getUnitLayoutInfo(1,0);y&&v&&(s.shouldShow()&&a.add(Eg({x1:i.x,y1:v.xy,x2:i.x+i.width,y2:v.xy},o.getModel("dividerLineStyle").getLineStyle(),c)),l.shouldShow()&&a.add(Eg({x1:y.xy,y1:i.y,x2:y.xy,y2:i.y+i.height},r.getModel("dividerLineStyle").getLineStyle(),c)))},n.type="matrix",n}(gn);function Tg(t,n,a,i,o,r,s,l,u,d,c,h){var p;Dg.option=o?o.itemStyle:null,Dg.parentModel=r,Ag.option=o,Ag.parentModel=l;var g=x(Ag.getShallow("z2"),o&&o.itemStyle?c.special:c.normal),f=h&&h.show,y=kg(u,Dg.getItemStyle(),g);a.add(y);var v,m=Ag.get("cursor");if(null!=m&&y.attr("cursor",m),null!=d){var _=d+"";if(Pg.option=o?o.label:null,Pg.parentModel=s,Pg.ecModel=i,se(y,{normal:Pg},{defaultText:_,autoOverflowArea:!0,layoutRect:at(y.shape)}),v=y.getTextContent()){v.z2=g+1;var b=v.style;if(b&&b.overflow&&"none"!==b.overflow&&b.lineOverflow){var w={};e.copy(w,u),ti(w,((null===(p=y.style)||void 0===p?void 0:p.lineWidth)||0)/2,!0,!0),y.updateInnerText(),v.getLocalTransform(Ng),di(Ng,Ng),e.applyTransform(w,w,Ng),v.setClipPath(new ce({shape:w}))}}Oa({el:y,componentModel:n,itemName:_,itemTooltipOption:h,formatterParamsExtra:{xyLocator:t.slice()}})}if(v){var S=Pg.get("silent");null==S&&(S=!f),v.silent=S,v.ignoreHostSilent=!0}var I=Ag.get("silent");null==I&&(I=!y.style||"none"===y.style.fill||!y.style.fill),y.silent=I,ci(Ag),ci(Dg),ci(Pg)}var Ag=new zt,Dg=new zt,Pg=new zt,Ng=[];function kg(t,e,n){var a=e.lineWidth;if(a){var i=t.x+t.width,o=t.y+t.height;t.x=ui(t.x,a,!0),t.y=ui(t.y,a,!0),t.width=ui(i,a,!0)-t.x,t.height=ui(o,a,!0)-t.y}return new ce({shape:t,style:e,z2:n})}function Eg(t,e,n){var a=e.lineWidth;return a&&(Ig(2*t.x1)===Ig(2*t.x2)&&(t.x1=t.x2=ui(t.x1,a,!0)),Ig(2*t.y1)===Ig(2*t.y2)&&(t.y1=t.y2=ui(t.y1,a,!0))),new Je({shape:t,style:e,silent:!0,z2:n})}var Rg=function(){function t(e,n,a){this.dimensions=t.dimensions,this.type="matrix",this._model=e;var i=this._dimModels={x:e.getDimensionModel("x"),y:e.getDimensionModel("y")};this._dims={x:i.x.dim,y:i.y.dim},this._resize(e,a)}return t.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},t.create=function(e,n){var a=[];return e.eachComponent("matrix",function(i){var o=new t(i,e,n);a.push(o),i.coordinateSystem=o}),e.eachComponent(function(t,e){Te({targetModel:e,coordSysType:"matrix",coordSysProvider:ei})}),a},t.prototype.getRect=function(){return this._rect},t.prototype._resize=function(t,e){var n=this._dims,a=this._dimModels,i=this._rect=Gt(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});Bg(a,n,i,0),Bg(a,n,i,1),Gg(0,n),Gg(1,n),Wg(this._model.getBody(),n),Wg(this._model.getCorner(),n)},t.prototype.dataToPoint=function(t,e,n){return n=n||[],this.dataToLayout(t,e,zg),n[0]=zg.rect.x+zg.rect.width/2,n[1]=zg.rect.y+zg.rect.height/2,n},t.prototype.dataToLayout=function(t,e,n){var a=this._dims,i=(n=n||{}).rect=n.rect||{};i.x=i.y=i.width=i.height=NaN;var o=n.matrixXYLocatorRange=ng(n.matrixXYLocatorRange);return dt(t)?(ag(o,null,t,a,x(e&&e.clamp,tg.none)),e&&e.ignoreMergeCells||(e&&e.clamp===tg.corner||this._model.getBody().expandRangeByCellMerge(o),e&&e.clamp===tg.body||this._model.getCorner().expandRangeByCellMerge(o)),hg(i,o,a,0),hg(i,o,a,1),n):n},t.prototype.pointToData=function(t,e,n){var a=this._dims;return Zg(Xg,0,a,t,e&&e.clamp),Zg(Xg,1,a,t,e&&e.clamp),(n=n||[])[0]=n[1]=NaN,Xg.y===Hg.inCorner&&Xg.x===Hg.inBody?jg(Xg,n,0,a):Xg.x===Hg.inCorner&&Xg.y===Hg.inBody?jg(Xg,n,1,a):(qg(Xg,n,0,a),qg(Xg,n,1,a)),n},t.prototype.convertToPixel=function(t,e,n,a){var i=Ug(e);return i===this?i.dataToPoint(n,a):void 0},t.prototype.convertToLayout=function(t,e,n,a){var i=Ug(e);return i===this?i.dataToLayout(n,a):void 0},t.prototype.convertFromPixel=function(t,e,n,a){var i=Ug(e);return i===this?i.pointToData(n,a):void 0},t.prototype.containPoint=function(t){return this._rect.contain(t[0],t[1])},t.dimensions=["x","y","value"],t}(),zg={rect:{x:NaN,y:NaN,width:NaN,height:NaN}},Og=new li,Vg=new li;function Bg(t,e,n,a){for(var i=1-a,o=e[ni[a]],r=e[ni[i]],s=r.shouldShow(),l=o.resetCellIterator();l.next();)l.item.wh=l.item.xy=NaN;for(var u=r.resetLayoutIterator(null,a);u.next();)u.item.wh=u.item.xy=NaN;for(var d=n[ai[a]],c=o.getLocatorCount(a)+r.getLocatorCount(a),h=new zt,p=r.resetLevelIterator();p.next();)h.option=p.item.option,h.parentModel=t[ni[i]],y(p.item,s?h.get("levelSize"):0);for(var g=new zt,f=o.resetCellIterator();f.next();)f.item.type===Qp&&(g.option=f.item.option,g.parentModel=void 0,y(f.item,g.get("size")));function y(t,e){var i=function(t,e,n){var a=hi(t,n[ai[e]]);return Yg(a,n[ai[e]])}(e,a,n);dn(i)||(t.wh=Yg(i,d),d=Yg(d-t.wh),c--)}var v=c?d/c:0,m=!c&&d>=1,x=n[ni[a]],_=o.getLocatorCount(a)-1,b=new li;for(r.resetLayoutIterator(b,a);b.next();)w(b.item);for(o.resetLayoutIterator(b,a);b.next();)w(b.item);function w(t){dn(t.wh)&&(t.wh=v),t.xy=x,t.id[ni[a]]!==_||m||(t.wh=n[ni[a]]+n[ai[a]]-t.xy),x+=t.wh}}function Gg(t,e){for(var n=e[ni[t]].resetCellIterator();n.next();){var a=n.item;Fg(a.rect,t,a.id,a.span,e),Fg(a.rect,1-t,a.id,a.span,e),a.type===Jp&&(a.xy=a.rect[ni[t]],a.wh=a.rect[ai[t]])}}function Wg(t,e){t.travelExistingCells(function(t){var n=t.span;if(n){var a=t.spanRect,i=t.id;Fg(a,0,i,n,e),Fg(a,1,i,n,e)}})}function Fg(t,e,n,a,i){t[ai[e]]=0;var o=n[ni[e]]<0?i[ni[1-e]]:i[ni[e]],r=o.getUnitLayoutInfo(e,n[ni[e]]);if(t[ni[e]]=r.xy,t[ai[e]]=r.wh,a[ni[e]]>1){var s=o.getUnitLayoutInfo(e,n[ni[e]]+a[ni[e]]-1);t[ai[e]]=s.xy+s.wh-r.xy}}function Yg(t,e){return Math.max(Math.min(t,x(e,1/0)),0)}function Ug(t){var e=t.matrixModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem:null}var Hg={inBody:1,inCorner:2,outside:3},Xg={x:null,y:null,point:[]};function Zg(t,e,n,a,i){var o=n[ni[e]],r=n[ni[1-e]],s=o.getUnitLayoutInfo(e,o.getLocatorCount(e)-1),l=o.getUnitLayoutInfo(e,0),u=r.getUnitLayoutInfo(e,-r.getLocatorCount(e)),d=r.shouldShow()?r.getUnitLayoutInfo(e,-1):null,c=t.point[e]=a[e];if(l||d)if(i!==tg.body)if(i!==tg.corner){var h=l?l.xy:d?d.xy+d.wh:NaN,p=u?u.xy:h,g=s?s.xy+s.wh:h;if(c<p){if(!i)return void(t[ni[e]]=Hg.outside);c=p}else if(c>g){if(!i)return void(t[ni[e]]=Hg.outside);c=g}t.point[e]=c,t[ni[e]]=h<=c&&c<=g?Hg.inBody:p<=c&&c<=h?Hg.inCorner:Hg.outside}else d?(t[ni[e]]=Hg.inCorner,c=oi(d.xy+d.wh,ii(u.xy,c)),t.point[e]=c):t[ni[e]]=Hg.outside;else l?(t[ni[e]]=Hg.inBody,c=oi(s.xy+s.wh,ii(l.xy,c)),t.point[e]=c):t[ni[e]]=Hg.outside;else t[ni[e]]=Hg.outside}function jg(t,e,n,a){var i=1-n;if(t[ni[n]]!==Hg.outside)for(a[ni[n]].resetCellIterator(Vg);Vg.next();){var o=Vg.item;if($g(t.point[n],o.rect,n)&&$g(t.point[i],o.rect,i))return e[n]=o.ordinal,void(e[i]=o.id[ni[i]])}}function qg(t,e,n,a){if(t[ni[n]]!==Hg.outside)for((t[ni[n]]===Hg.inCorner?a[ni[1-n]]:a[ni[n]]).resetLayoutIterator(Og,n);Og.next();)if(Kg(t.point[n],Og.item))return void(e[n]=Og.item.id[ni[n]])}function Kg(t,e){return e.xy<=t&&t<=e.xy+e.wh}function $g(t,e,n){return e[ni[n]]<=t&&t<=e[ni[n]]+e[ai[n]]}function Qg(t,e){var n;return l(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}var Jg=["transition","enterFrom","leaveTo"],tf=Jg.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function ef(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),t&&e)for(var a=n?Jg:tf,i=0;i<a.length;i++){var o=a[i];null==t[o]&&null!=e[o]&&(t[o]=e[o])}}var nf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return ft(e,t),e.prototype.mergeOption=function(e,n){var a=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=a},e.prototype.optionUpdated=function(t,e){var n=this.option,a=(e?n:t).elements,i=n.elements=e?[]:n.elements,o=[];this._flatten(a,o,null);var r=pi(i,o,"normalMerge"),s=this._elOptionsToUpdate=[];l(r,function(t,e){var n=t.newOption;n&&(s.push(n),function(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var a=e.parentOption;a?e.parentId=a.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var a=R({},n),i=t[e],o=n.$action||"merge";"merge"===o?i?(cn(i,a,!0),Ka(i,a,{ignoreSize:!0}),gi(n,i),ef(n,i),ef(n,i,"shape"),ef(n,i,"style"),ef(n,i,"extra"),n.clipPath=i.clipPath):t[e]=a:"replace"===o?t[e]=a:"remove"===o&&i&&(t[e]=null)}(i,e,n),function(t,e){if(t&&(t.hv=e.hv=[Qg(e,["left","right"]),Qg(e,["top","bottom"])],"group"===t.type)){var n=t,a=e;null==n.width&&(n.width=a.width=0),null==n.height&&(n.height=a.height=0)}}(i[e],n))},this),n.elements=d(i,function(t){return t&&delete t.$action,null!=t})},e.prototype._flatten=function(t,e,n){l(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var a=t.children;a&&a.length&&this._flatten(a,e,t),delete t.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(fn),af={path:null,compoundPath:null,group:yt,image:M,text:Zt},of=t(),rf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.init=function(){this._elMap=Yt()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,a=this.group,i=t.get("z"),o=t.get("zlevel");l(e,function(e){var s=kt(e.id,null),u=null!=s?n.get(s):null,d=kt(e.parentId,null),c=null!=d?n.get(d):a,h=e.type,p=e.style;"text"===h&&p&&e.hv&&e.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var g=e.textContent,f=e.textConfig;if(p&&Qc(p,h,!!f,!!g)){var y=Jc(p,h,!0);!f&&y.textConfig&&(f=e.textConfig=y.textConfig),!g&&y.textContent&&(g=y.textContent)}var v=function(t){return t=R({},t),l(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(fi),function(e){delete t[e]}),t}(e),m=e.$action||"merge",x="merge"===m,_="replace"===m;if(x){var b=u;(T=!u)?b=lf(s,c,e.type,n):(b&&(of(b).isNew=!1),_h(b)),b&&(lh(b,v,t,{isInit:T}),df(b,e,i,o))}else if(_){uf(u,e,n,t);var w=lf(s,c,e.type,n);w&&(lh(w,v,t,{isInit:!0}),df(w,e,i,o))}else"remove"===m&&(uh(u,e),uf(u,e,n,t));var S=n.get(s);if(S&&g)if(x){var I=S.getTextContent();I?I.attr(g):S.setTextContent(new Zt(g))}else _&&S.setTextContent(new Zt(g));if(S){var M=e.clipPath;if(M){var C=M.type,L=void 0,T=!1;if(x){var A=S.getClipPath();L=(T=!A||of(A).type!==C)?sf(C):A}else _&&(T=!0,L=sf(C));S.setClipPath(L),lh(L,M,t,{isInit:T}),bh(L,M.keyframeAnimation,t)}var D=of(S);S.setTextConfig(f),D.option=e,function(t,e,n){var a=r(t).eventData;t.silent||t.ignore||a||(a=r(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name});a&&(a.info=n.info)}(S,t,e),Oa({el:S,componentModel:t,itemName:S.name,itemTooltipOption:e.tooltip}),bh(S,e.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,a=this.group,i=this._elMap,o=e.getWidth(),r=e.getHeight(),l=["x","y"],u=0;u<n.length;u++){var d=n[u];if((f=null!=(g=kt(d.id,null))?i.get(g):null)&&f.isGroup){var c=(y=f.parent)===a,h=of(f),p=of(y);h.width=s(h.option.width,c?o:p.width)||0,h.height=s(h.option.height,c?r:p.height)||0}}for(u=n.length-1;u>=0;u--){var g,f;d=n[u];if(f=null!=(g=kt(d.id,null))?i.get(g):null){var y=f.parent,v=(p=of(y),y===a?{width:o,height:r}:{width:p.width,height:p.height}),m={},x=Ht(f,d,v,null,{hv:d.hv,boundingMode:d.bounding},m);if(!of(f).isNew&&x){for(var _=d.transition,S={},I=0;I<l.length;I++){var M=l[I],C=m[M];_&&(ch(_)||b(_,M)>=0)?S[M]=C:f[M]=C}w(f,S,t,0)}else f.attr(m)}}},e.prototype._clear=function(){var t=this,e=this._elMap;e.each(function(n){uf(n,of(n).option,e,t._lastGraphicModel)}),this._elMap=Yt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(gn);function sf(t){var e=new(ya(af,t)?af[t]:Ca(t))({});return of(e).type=t,e}function lf(t,e,n,a){var i=sf(n);return e.add(i),a.set(t,i),of(i).id=t,of(i).isNew=!0,i}function uf(t,e,n,a){t&&t.parent&&("group"===t.type&&t.traverse(function(t){uf(t,e,n,a)}),dh(t,e,a),n.removeKey(of(t).id))}function df(t,e,n,a){t.isGroup||l([["cursor",de.prototype.cursor],["zlevel",a||0],["z",n||0],["z2",0]],function(n){var a=n[0];ya(e,a)?t[a]=x(e[a],n[1]):null==t[a]&&(t[a]=n[1])}),l(o(e),function(n){if(0===n.indexOf("on")){var a=e[n];t[n]=i(a)?a:null}}),ya(e,"draggable")&&(t.draggable=e.draggable),null!=e.name&&(t.name=e.name),null!=e.id&&(t.id=e.id)}var cf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return ft(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],a=e.axisType,i=this._names=[];"category"===a?(t=[],l(n,function(e,n){var a,o=kt(yi(e),"");ct(e)?(a=at(e)).value=n:a=n,t.push(a),i.push(o)})):t=n;var o={category:"ordinal",time:"time",value:"number"}[a]||"number";(this._data=new Rt([{name:"value",type:o}],this)).initData(t,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:wt.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:wt.color.secondary},data:[]},e}(fn),hf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="timeline.slider",e.defaultOption=oa(cf.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:wt.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:wt.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:wt.color.tertiary},itemStyle:{color:wt.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:wt.color.accent50,borderColor:wt.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:wt.color.accent50,borderColor:wt.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:wt.color.accent60},itemStyle:{color:wt.color.accent60,borderColor:wt.color.accent60},controlStyle:{color:wt.color.accent70,borderColor:wt.color.accent70}},progress:{lineStyle:{color:wt.color.accent30},itemStyle:{color:wt.color.accent40}},data:[]}),e}(cf);Ve(hf,vi.prototype);var pf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.type="timeline",e}(gn),gf=function(t){function e(e,n,a,i){var o=t.call(this,e,n,a)||this;return o.type=i||"value",o}return ft(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(yn),ff=Math.PI,yf=t(),vf=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ft(n,t),n.prototype.init=function(t,e){this.api=e},n.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,n),i=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),r=this._axis=this._createAxis(a,t);t.formatTooltip=function(t){var e=r.scale.getLabel({value:t});return Ot("nameValue",{noName:!0,value:e})},l(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](a,i,r,t)},this),this._renderAxisLabel(a,o,r,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(t,e){var n,a,i,o,r=t.get(["label","position"]),s=t.get("orient"),l=function(t,e){return Gt(t.getBoxLayoutParams(),Bt(t,e).refContainer,t.get("padding"))}(t,e),u={horizontal:"center",vertical:(n=null==r||"auto"===r?"horizontal"===s?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":N(r)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][r]:r)>=0||"+"===n?"left":"right"},d={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:ff/2},h="vertical"===s?l.height:l.width,p=t.getModel("controlStyle"),g=p.get("show",!0),f=g?p.get("itemSize"):0,y=g?p.get("itemGap"):0,v=f+y,m=t.get(["label","rotate"])||0;m=m*ff/180;var x=p.get("position",!0),_=g&&p.get("showPlayBtn",!0),b=g&&p.get("showPrevBtn",!0),w=g&&p.get("showNextBtn",!0),S=0,I=h;"left"===x||"bottom"===x?(_&&(a=[0,0],S+=v),b&&(i=[S,0],S+=v),w&&(o=[I-f,0],I-=v)):(_&&(a=[I-f,0],I-=v),b&&(i=[0,0],S+=v),w&&(o=[I-f,0],I-=v));var M=[S,I];return t.get("inverse")&&M.reverse(),{viewRect:l,mainLength:h,orient:s,rotation:c[s],labelRotation:m,labelPosOpt:n,labelAlign:t.get(["label","align"])||u[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||d[s],playPosition:a,prevBtnPosition:i,nextBtnPosition:o,axisExtent:M,controlSize:f,controlGap:y}},n.prototype._position=function(t,e){var n=this._mainGroup,a=this._labelGroup,i=t.viewRect;if("vertical"===t.orient){var o=te(),r=i.x,s=i.y+i.height;Jt(o,o,[-r,-s]),xn(o,o,-ff/2),Jt(o,o,[r,s]),(i=i.clone()).applyTransform(o)}var l=y(i),u=y(n.getBoundingRect()),d=y(a.getBoundingRect()),c=[n.x,n.y],h=[a.x,a.y];h[0]=c[0]=l[0][0];var p,g=t.labelPosOpt;null==g||N(g)?(v(c,u,l,1,p="+"===g?0:1),v(h,d,l,1,1-p)):(v(c,u,l,1,p=g>=0?0:1),h[1]=c[1]+g);function f(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function y(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,a,i){t[a]+=n[a][i]-e[a][i]}n.setPosition(c),a.setPosition(h),n.rotation=a.rotation=t.rotation,f(n),f(a)},n.prototype._createAxis=function(t,e){var n=e.getData(),a=e.get("axisType"),i=function(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new si({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new bi({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new _i}}(e,a);i.getTicks=function(){return n.mapArray(["value"],function(t){return{value:t}})};var o=n.getDataExtent("value");i.setExtent(o[0],o[1]),i.calcNiceTicks();var r=new gf("value",i,t.axisExtent,a);return r.model=e,r},n.prototype._createGroup=function(t){var e=this[t]=new yt;return this.group.add(e),e},n.prototype._renderAxisLine=function(t,e,n,a){var i=n.getExtent();if(a.get(["lineStyle","show"])){var o=new Je({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:R({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(o);var r=this._progressLine=new Je({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:At({lineCap:"round",lineWidth:o.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(r)}},n.prototype._renderAxisTick=function(t,e,n,a){var i=this,o=a.getData(),s=n.scale.getTicks();this._tickSymbols=[],l(s,function(t){var s=n.dataToCoord(t.value),l=o.getItemModel(t.value),u=l.getModel("itemStyle"),d=l.getModel(["emphasis","itemStyle"]),c=l.getModel(["progress","itemStyle"]),h={x:s,y:0,onclick:Qt(i._changeTimeline,i,t.value)},p=mf(l,u,e,h);p.ensureState("emphasis").style=d.getItemStyle(),p.ensureState("progress").style=c.getItemStyle(),mi(p);var g=r(p);l.get("tooltip")?(g.dataIndex=t.value,g.dataModel=a):g.dataIndex=g.dataModel=null,i._tickSymbols.push(p)})},n.prototype._renderAxisLabel=function(t,e,n,a){var i=this;if(n.getLabelModel().get("show")){var o=a.getData(),r=n.getViewLabels();this._tickLabels=[],l(r,function(a){var r=a.tickValue,s=o.getItemModel(r),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),d=s.getModel(["progress","label"]),c=n.dataToCoord(a.tickValue),h=new Zt({x:c,y:0,rotation:t.labelRotation-t.rotation,onclick:Qt(i._changeTimeline,i,r),silent:!1,style:qt(l,{text:a.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});h.ensureState("emphasis").style=qt(u),h.ensureState("progress").style=qt(d),e.add(h),mi(h),yf(h).dataIndex=r,i._tickLabels.push(h)})}},n.prototype._renderControl=function(t,n,a,i){var o=t.controlSize,r=t.rotation,s=i.getModel("controlStyle").getItemStyle(),l=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),d=i.get("inverse",!0);function c(t,a,u,d){if(t){var c=xi(x(i.get(["controlStyle",a+"BtnSize"]),o),o),h=function(t,n,a,i){var o=i.style,r=wi(t.get(["controlStyle",n]),i||{},new e(a[0],a[1],a[2],a[3]));o&&r.setStyle(o);return r}(i,a+"Icon",[0,-c/2,c,c],{x:t[0],y:t[1],originX:o/2,originY:0,rotation:d?-r:0,rectHover:!0,style:s,onclick:u});h.ensureState("emphasis").style=l,n.add(h),mi(h)}}c(t.nextBtnPosition,"next",Qt(this._changeTimeline,this,d?"-":"+")),c(t.prevBtnPosition,"prev",Qt(this._changeTimeline,this,d?"+":"-")),c(t.playPosition,u?"stop":"play",Qt(this._handlePlayClick,this,!u),!0)},n.prototype._renderCurrentPointer=function(t,e,n,a){var i=a.getData(),o=a.getCurrentIndex(),r=i.getItemModel(o).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=Qt(s._handlePointerDrag,s),t.ondragend=Qt(s._handlePointerDragend,s),xf(t,s._progressLine,o,n,a,!0)},onUpdate:function(t){xf(t,s._progressLine,o,n,a)}};this._currentPointer=mf(r,r,this._mainGroup,{},this._currentPointer,l)},n.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},n.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},n.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},n.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],a=this._axis,i=Sn(a.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=n,o.dirty());var r=this._findNearestTick(n),s=this.model;(e||r!==s.getCurrentIndex()&&s.get("realtime"))&&this._changeTimeline(r)},n.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return _n(t,e,!0)},n.prototype._findNearestTick=function(t){var e,n=this.model.getData(),a=1/0,i=this._axis;return n.each(["value"],function(n,o){var r=i.dataToCoord(n),s=Math.abs(r-t);s<a&&(a=s,e=o)}),e},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},n.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var a=0;a<e.length;a++)e&&e[a]&&e[a].toggleState("progress",a<t);if(n)for(a=0;a<n.length;a++)n&&n[a]&&n[a].toggleState("progress",yf(n[a]).dataIndex<=t)},n.type="timeline.slider",n}(pf);function mf(t,e,n,a,i,o){var r=e.get("color");if(i)i.setColor(r),n.add(i),o&&o.onUpdate(i);else{var s=t.get("symbol");(i=nn(s,-1,-1,2,2,r)).setStyle("strokeNoScale",!0),n.add(i),o&&o.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),a=cn({rectHover:!0,z2:100},a,!0);var u=Wn(t.get("symbolSize"));a.scaleX=u[0]/2,a.scaleY=u[1]/2;var d=Fn(t.get("symbolOffset"),u);d&&(a.x=(a.x||0)+d[0],a.y=(a.y||0)+d[1]);var c=t.get("symbolRotate");return a.rotation=(c||0)*Math.PI/180||0,i.attr(a),i.updateTransform(),i}function xf(t,e,n,a,i,o){if(!t.dragging){var r=i.getModel("checkpointStyle"),s=a.dataToCoord(i.getData().get("value",n));if(o||!r.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function _f(t){var e=t&&t.timeline;dt(e)||(e=e?[e]:[]),l(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};n[e]&&(t.axisType=n[e],delete t.type);if(bf(t),wf(t,"controlPosition")){var a=t.controlStyle||(t.controlStyle={});wf(a,"position")||(a.position=t.controlPosition),"none"!==a.position||wf(a,"show")||(a.show=!1,delete a.position),delete t.controlPosition}l(t.data||[],function(t){ct(t)&&!dt(t)&&(!wf(t,"value")&&wf(t,"name")&&(t.value=t.name),bf(t))})}(t)})}function bf(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),a=t.label||t.label||{},i=a.normal||(a.normal={}),o={normal:1,emphasis:1};l(a,function(t,e){o[e]||wf(i,e)||(i[e]=t)}),n.label&&!wf(a,"emphasis")&&(a.emphasis=n.label,delete n.label)}function wf(t,e){return t.hasOwnProperty(e)}var Sf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Si),If=t(),Mf=function(t,e,n,a){var i=a[0],o=a[1];if(i&&o){var r=Ci(t,i),s=Ci(t,o),l=r.coord,u=s.coord;l[0]=fe(l[0],-1/0),l[1]=fe(l[1],-1/0),u[0]=fe(u[0],1/0),u[1]=fe(u[1],1/0);var d=Qn([{},r,s]);return d.coord=[r.coord,s.coord],d.x0=r.x,d.y0=r.y,d.x1=s.x,d.y1=s.y,d}};function Cf(t){return!isNaN(t)&&!isFinite(t)}function Lf(t,e,n,a){var i=1-t;return Cf(e[i])&&Cf(n[i])}function Tf(t,e){var n=e.coord[0],a=e.coord[1],i={coord:n,x:e.x0,y:e.y0},o={coord:a,x:e.x1,y:e.y1};return ea(t,"cartesian2d")?!(!n||!a||!Lf(1,n,a)&&!Lf(0,n,a))||Li(t,i,o):Ti(t,i)||Ti(t,o)}function Af(t,e,n,a,i){var o,r=a.coordinateSystem,l=t.getItemModel(e),u=s(l.get(n[0]),i.getWidth()),d=s(l.get(n[1]),i.getHeight());if(isNaN(u)||isNaN(d)){if(a.getMarkerPosition){var c=t.getValues(["x0","y0"],e),h=t.getValues(["x1","y1"],e),p=r.clampData(c),g=r.clampData(h),f=[];"x0"===n[0]?f[0]=p[0]>g[0]?h[0]:c[0]:f[0]=p[0]>g[0]?c[0]:h[0],"y0"===n[1]?f[1]=p[1]>g[1]?h[1]:c[1]:f[1]=p[1]>g[1]?c[1]:h[1],o=a.getMarkerPosition(f,n,!0)}else{var y=[x=t.get(n[0],e),_=t.get(n[1],e)];r.clampData&&r.clampData(y,y),o=r.dataToPoint(y,!0)}if(ea(r,"cartesian2d")){var v=r.getAxis("x"),m=r.getAxis("y"),x=t.get(n[0],e),_=t.get(n[1],e);Cf(x)?o[0]=v.toGlobalCoord(v.getExtent()["x0"===n[0]?0:1]):Cf(_)&&(o[1]=m.toGlobalCoord(m.getExtent()["y0"===n[1]?0:1]))}isNaN(u)||(o[0]=u),isNaN(d)||(o[1]=d)}else o=[u,d];return o}var Df=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Pf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return ft(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=Si.getMarkerModelFromSeries(t,"markArea");if(e){var a=e.getData();a.each(function(e){var i=A(Df,function(i){return Af(a,e,i,t,n)});a.setItemLayout(e,i),a.getItemGraphicEl(e).setShape("points",i)})}},this)},e.prototype.renderSeries=function(t,e,n,a){var i=t.coordinateSystem,o=t.id,s=t.getData(),l=this.markerGroupMap,u=l.get(o)||l.set(o,{group:new yt});this.group.add(u.group),this.markKeep(u);var c=function(t,e,n){var a,i,o=["x0","y0","x1","y1"];if(t){var r=A(t&&t.dimensions,function(t){var n=e.getData(),a=n.getDimensionInfo(n.mapDimension(t))||{};return R(R({},a),{name:t,ordinalMeta:null})});i=A(o,function(t,e){return{name:t,type:r[e%2].type}}),a=new Rt(i,n)}else a=new Rt(i=[{name:"value",type:"float"}],n);var s=A(n.get("data"),Nt(Mf,e,t,n));t&&(s=d(s,Nt(Tf,t)));var l=t?function(t,e,n,a){var o=t.coord[Math.floor(a/2)][a%2];return Ai(o,i[a])}:function(t,e,n,a){return Ai(t.value,i[a])};return a.initData(s,null,l),a.hasItemOption=!0,a}(i,t,e);e.setData(c),c.each(function(e){var n=A(Df,function(n){return Af(c,e,n,t,a)}),o=i.getAxis("x").scale,r=i.getAxis("y").scale,l=o.getExtent(),u=r.getExtent(),d=[o.parse(c.get("x0",e)),o.parse(c.get("x1",e))],h=[r.parse(c.get("y0",e)),r.parse(c.get("y1",e))];Sn(d),Sn(h);var p=!!(l[0]>d[1]||l[1]<d[0]||u[0]>h[1]||u[1]<h[0]);c.setItemLayout(e,{points:n,allClipped:p});var g=c.getItemModel(e),f=g.getModel("itemStyle").getItemStyle(),y=g.get("z2"),v=Ii(s,"color");f.fill||(f.fill=v,N(f.fill)&&(f.fill=pe(f.fill,.4))),f.stroke||(f.stroke=v),c.setItemVisual(e,"style",f),c.setItemVisual(e,"z2",x(y,0))}),c.diff(If(u).data).add(function(t){var e=c.getItemLayout(t),n=c.getItemVisual(t,"z2");if(!e.allClipped){var a=new Xt({z2:x(n,0),shape:{points:e.points}});c.setItemGraphicEl(t,a),u.group.add(a)}}).update(function(t,n){var a=If(u).data.getItemGraphicEl(n),i=c.getItemLayout(t),o=c.getItemVisual(t,"z2");i.allClipped?a&&u.group.remove(a):(a?w(a,{z2:x(o,0),shape:{points:i.points}},e,t):a=new Xt({shape:{points:i.points}}),c.setItemGraphicEl(t,a),u.group.add(a))}).remove(function(t){var e=If(u).data.getItemGraphicEl(t);u.group.remove(e)}).execute(),c.eachItemGraphicEl(function(t,n){var a=c.getItemModel(n),i=c.getItemVisual(n,"style");t.useStyle(c.getItemVisual(n,"style")),se(t,le(a),{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",inheritColor:N(i.fill)?pe(i.fill,1):wt.color.neutral99}),Dt(t,a),Kt(t,null,null,a.get(["emphasis","disabled"])),r(t).dataModel=e}),If(u).data=c,u.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(Mi);var Nf=function(){function t(t){this._thumbnailModel=t}return t.prototype.reset=function(t){this._renderVersion=t.getMainProcessVersion()},t.prototype.renderContent=function(t){var e=t.api.getViewOfComponentModel(this._thumbnailModel);e&&(t.group.silent=!0,e.renderContent({group:t.group,targetTrans:t.targetTrans,z2Range:Pi(t.group),roamType:t.roamType,viewportRect:t.viewportRect,renderVersion:this._renderVersion}))},t.prototype.updateWindow=function(t,e){var n=e.getViewOfComponentModel(this._thumbnailModel);n&&n.updateWindow({targetTrans:t,renderVersion:this._renderVersion})},t}(),kf=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return ft(e,t),e.prototype.optionUpdated=function(t,e){this._updateBridge()},e.prototype._updateBridge=function(){var t=this._birdge=this._birdge||new Nf(this);(this._target=null,this.ecModel.eachSeries(function(t){ou(t,null)}),this.shouldShow())&&ou(this.getTarget().baseMapProvider,t)},e.prototype.shouldShow=function(){return this.getShallow("show",!0)},e.prototype.getBridge=function(){return this._birdge},e.prototype.getTarget=function(){if(this._target)return this._target;var t=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return t?"graph"!==t.subType&&(t=null):t=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:t},this._target},e.type="thumbnail",e.layoutMode="box",e.dependencies=["series","geo"],e.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:wt.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:wt.color.neutral30,borderColor:wt.color.neutral40,opacity:.3},z:10},e}(fn),Ef=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=n.type,e}return ft(n,t),n.prototype.render=function(t,e,n){if(this._api=n,this._model=t,this._coordSys||(this._coordSys=new xt),this._isEnabled()){this._renderVersion=n.getMainProcessVersion();var a=this.group;a.removeAll();var i=t.getModel("itemStyle"),o=i.getItemStyle();null==o.fill&&(o.fill=e.get("backgroundColor")||wt.color.neutral00);var r=Bt(t,n).refContainer,s=Gt(Ni(t,!0),r),l=o.lineWidth||0,u=this._contentRect=ti(s.clone(),l/2,!0,!0),d=new yt;a.add(d),d.setClipPath(new ce({shape:u.plain()}));var c=this._targetGroup=new yt;d.add(c);var h=s.plain();h.r=i.getShallow("borderRadius",!0),a.add(this._bgRect=new ce({style:o,shape:h,silent:!1,cursor:"grab"}));var p=t.getModel("windowStyle"),g=p.getShallow("borderRadius",!0);d.add(this._windowRect=new ce({shape:{x:0,y:0,width:0,height:0,r:g},style:p.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),zf(t,this)}else this._clear()},n.prototype.renderContent=function(t){this._bridgeRendered=t,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),zf(this._model,this))},n.prototype._dealRenderContent=function(){var t=this._bridgeRendered;if(t&&t.renderVersion===this._renderVersion){var e=this._targetGroup,n=this._coordSys,a=this._contentRect;if(e.removeAll(),t){var i=t.group,o=i.getBoundingRect();e.add(i),this._bgRect.z2=t.z2Range.min-10,n.setBoundingRect(o.x,o.y,o.width,o.height);var r=Gt({left:"center",top:"center",aspect:o.width/o.height},a);n.setViewRect(r.x,r.y,r.width,r.height),i.attr(n.getTransformInfo().raw),this._windowRect.z2=t.z2Range.max+10,this._resetRoamController(t.roamType)}}},n.prototype.updateWindow=function(t){var e=this._bridgeRendered;e&&e.renderVersion===t.renderVersion&&(e.targetTrans=t.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},n.prototype._dealUpdateWindow=function(){var t=this._bridgeRendered;if(t&&t.renderVersion===this._renderVersion){var n=di([],t.targetTrans),a=ki([],this._coordSys.transform,n);this._transThisToTarget=di([],a);var i=t.viewportRect;(i=i?i.clone():new e(0,0,this._api.getWidth(),this._api.getHeight())).applyTransform(a);var o=this._windowRect,r=o.shape.r;o.setShape(At({r:r},i))}},n.prototype._resetRoamController=function(t){var e=this,n=this._api,a=this._roamController;a||(a=this._roamController=new vt(n.getZr())),t&&this._isEnabled()?(a.enable(t,{api:n,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(t,n,a){return e._contentRect.contain(n,a)}}}),a.off("pan").off("zoom").on("pan",Qt(this._onPan,this)).on("zoom",Qt(this._onZoom,this))):a.disable()},n.prototype._onPan=function(t){var e=this._transThisToTarget;if(this._isEnabled()&&e){var n=Ei([],[t.oldX,t.oldY],e),a=Ei([],[t.oldX-t.dx,t.oldY-t.dy],e);this._api.dispatchAction(Rf(this._model.getTarget().baseMapProvider,{dx:a[0]-n[0],dy:a[1]-n[1]}))}},n.prototype._onZoom=function(t){var e=this._transThisToTarget;if(this._isEnabled()&&e){var n=Ei([],[t.originX,t.originY],e);this._api.dispatchAction(Rf(this._model.getTarget().baseMapProvider,{zoom:1/t.scale,originX:n[0],originY:n[1]}))}},n.prototype._isEnabled=function(){var t=this._model;return!(!t||!t.shouldShow())&&!!t.getTarget().baseMapProvider},n.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},n.prototype.remove=function(){this._clear()},n.prototype.dispose=function(){this._clear()},n.type="thumbnail",n}(gn);function Rf(t,e){var n={type:"series"===t.mainType?t.subType+"Roam":t.mainType+"Roam"};return n[t.mainType+"Id"]=t.id,R(n,e),n}function zf(t,e){var n=Ri(t);zi(e.group,n.z,n.zlevel)}var Of={label:{enabled:!0},decal:{show:!1}},Vf=t(),Bf={};function Gf(t,e){var n=t.getModel("aria");if(n.get("enabled")){var a=at(Of);cn(a.label,t.getLocaleModel().get("aria"),!1),cn(n.option,a,!1),function(){if(n.getModel("decal").get("show")){var e=Yt();t.eachSeries(function(t){if(!t.isColorBySeries()){var n=e.get(t.type);n||(n={},e.set(t.type,n)),Vf(t).scope=n}}),t.eachRawSeries(function(e){if(!t.isSeriesFiltered(e))if(i(e.enableAriaDecal))e.enableAriaDecal();else{var n=e.getData();if(e.isColorBySeries()){var a=Ft(e.ecModel,e.name,Bf,t.getSeriesCount()),o=n.getVisual("decal");n.setVisual("decal",d(o,a))}else{var r=e.getRawData(),s={},l=Vf(e).scope;n.each(function(t){var e=n.getRawIndex(t);s[e]=t});var u=r.count();r.each(function(t){var a=s[t],i=r.getName(t)||t+"",o=Ft(e.ecModel,i,l,u),c=n.getItemVisual(a,"decal");n.setItemVisual(a,"decal",d(c,o))})}}function d(t,e){var n=t?R(R({},e),t):e;return n.dirty=!0,n}})}}(),function(){var a=e.getZr().dom;if(!a)return;var i=t.getLocaleModel().get("aria"),r=n.getModel("label");if(r.option=At(r.option,i),!r.get("enabled"))return;if(a.setAttribute("role","img"),r.get("description"))return void a.setAttribute("aria-label",r.get("description"));var s,l=t.getSeriesCount(),u=r.get(["data","maxCount"])||10,c=r.get(["series","maxCount"])||10,h=Math.min(l,c);if(l<1)return;var p=function(){var e=t.get("title");e&&e.length&&(e=e[0]);return e&&e.text}();s=p?o(r.get(["general","withTitle"]),{title:p}):r.get(["general","withoutTitle"]);var g=[];s+=o(l>1?r.get(["series","multiple","prefix"]):r.get(["series","single","prefix"]),{seriesCount:l}),t.eachSeries(function(e,n){if(n<h){var a=void 0,i=e.get("name")?"withName":"withoutName";a=o(a=l>1?r.get(["series","multiple",i]):r.get(["series","single",i]),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(w=e.subType,S=t.getLocaleModel().get(["series","typeNames"]),S[w]||S.chart)});var s=e.getData();if(s.count()>u)a+=o(r.get(["data","partialData"]),{displayCnt:u});else a+=r.get(["data","allData"]);for(var c=r.get(["data","separator","middle"]),p=r.get(["data","separator","end"]),f=r.get(["data","excludeDimensionId"]),y=[],v=0;v<s.count();v++)if(v<u){var m=s.getName(v),x=f?d(s.getValues(v),function(t,e){return-1===b(f,e)}):s.getValues(v),_=r.get(["data",m?"withName":"withoutName"]);y.push(o(_,{name:m,value:x.join(c)}))}a+=y.join(c)+p,g.push(a)}var w,S});var f=r.getModel(["series","multiple","separator"]),y=f.get("middle"),v=f.get("end");s+=g.join(y)+v,a.setAttribute("aria-label",s)}()}function o(t,e){if(!N(t))return t;var n=t;return l(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}}function Wf(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},l(["description","general","series","data"],function(t){null!=e[t]&&(e.label[t]=e[t])})}}var Ff={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Yf=function(){function t(t){if(null==(this._condVal=N(t)?new RegExp(t):Bi(t)?t:null)){Gn("")}}return t.prototype.evaluate=function(t){var e=typeof t;return N(e)?this._condVal.test(t):!!O(e)&&this._condVal.test(t+"")},t}(),Uf=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),Hf=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),Xf=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),Zf=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),jf=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),n=t?this.valueParser(e):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(t?n:e))return!1;return!0},t}();function qf(t,e){if(!0===t||!1===t){var n=new Uf;return n.value=t,n}return $f(t)||Gn(""),t.and?Kf("and",t,e):t.or?Kf("or",t,e):t.not?function(t,e){var n=t.not,a="";$f(n)||Gn(a);var i=new Zf;i.child=qf(n,e),i.child||Gn(a);return i}(t,e):function(t,e){for(var n="",a=e.prepareGetValue(t),i=[],r=o(t),s=t.parser,l=s?Oi(s):null,u=0;u<r.length;u++){var d=r[u];if("parser"!==d&&!e.valueGetterAttrMap.get(d)){var c=ya(Ff,d)?Ff[d]:d,h=t[d],p=l?l(h):h,g=Vi(c,p)||"reg"===c&&new Yf(p);g||Gn(n),i.push(g)}}i.length||Gn(n);var f=new jf;return f.valueGetterParam=a,f.valueParser=l,f.getValue=e.getValue,f.subCondList=i,f}(t,e)}function Kf(t,e,n){var a=e[t];dt(a)||Gn(""),a.length||Gn("");var i="and"===t?new Hf:new Xf;return i.children=A(a,function(t){return qf(t,n)}),i.children.length||Gn(""),i}function $f(t){return ct(t)&&!_a(t)}var Qf=function(){function t(t,e){this._cond=qf(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();var Jf={type:"echarts:filter",transform:function(t){for(var e,n,a,i=t.upstream,o=(n=t.config,a={valueGetterAttrMap:Yt({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;ya(t,"dimension")||Gn("");var n=i.getDimensionInfo(e);return n||Gn(""),{dimIdx:n.index}},getValue:function(t){return i.retrieveValueFromItem(e,t.dimIdx)}},new Qf(n,a)),r=[],s=0,l=i.count();s<l;s++)e=i.getRawDataItem(s),o.evaluate()&&r.push(e);return{data:r}}},ty={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,a="",i=Ut(n);i.length||Gn(a);var o=[];l(i,function(t){var n=t.dimension,i=t.order,r=t.parser,s=t.incomparable;if(null==n&&Gn(a),"asc"!==i&&"desc"!==i&&Gn(a),s&&"min"!==s&&"max"!==s){Gn("")}if("asc"!==i&&"desc"!==i){Gn("")}var l=e.getDimensionInfo(n);l||Gn(a);var u=r?Oi(r):null;r&&!u&&Gn(a),o.push({dimIdx:l.index,parser:u,comparator:new Gi(i,s)})});var r=e.sourceFormat;r!==Bn&&r!==Wi&&Gn(a);for(var s=[],u=0,d=e.count();u<d;u++)s.push(e.getRawDataItem(u));return s.sort(function(t,n){for(var a=0;a<o.length;a++){var i=o[a],r=e.retrieveValueFromItem(t,i.dimIdx),s=e.retrieveValueFromItem(n,i.dimIdx);i.parser&&(r=i.parser(r),s=i.parser(s));var l=i.comparator.evaluate(r,s);if(0!==l)return l}return 0}),{data:s}}};var ey=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return ft(e,t),e.prototype.init=function(e,n,a){t.prototype.init.call(this,e,n,a),this._sourceManager=new Fi(this),Yi(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),Yi(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Ui},e}(fn),ny=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return ft(e,t),e.type="dataset",e}(gn);var ay=B.CMD;function iy(t,e){return Math.abs(t-e)<1e-5}function oy(t){var e,n,a,i,o,r=t.data,s=t.len(),l=[],u=0,d=0,c=0,h=0;function p(t,n){e&&e.length>2&&l.push(e),e=[t,n]}function g(t,n,a,i){iy(t,a)&&iy(n,i)||e.push(t,n,a,i,a,i)}function f(t,n,a,i,o,r){var s=Math.abs(n-t),l=4*Math.tan(s/4)/3,u=n<t?-1:1,d=Math.cos(t),c=Math.sin(t),h=Math.cos(n),p=Math.sin(n),g=d*o+a,f=c*r+i,y=h*o+a,v=p*r+i,m=o*l*u,x=r*l*u;e.push(g-m*c,f+x*d,y+m*p,v-x*h,y,v)}for(var y=0;y<s;){var v=r[y++],m=1===y;switch(m&&(c=u=r[y],h=d=r[y+1],v!==ay.L&&v!==ay.C&&v!==ay.Q||(e=[c,h])),v){case ay.M:u=c=r[y++],d=h=r[y++],p(c,h);break;case ay.L:g(u,d,n=r[y++],a=r[y++]),u=n,d=a;break;case ay.C:e.push(r[y++],r[y++],r[y++],r[y++],u=r[y++],d=r[y++]);break;case ay.Q:n=r[y++],a=r[y++],i=r[y++],o=r[y++],e.push(u+2/3*(n-u),d+2/3*(a-d),i+2/3*(n-i),o+2/3*(a-o),i,o),u=i,d=o;break;case ay.A:var x=r[y++],_=r[y++],b=r[y++],w=r[y++],S=r[y++],I=r[y++]+S;y+=1;var M=!r[y++];n=Math.cos(S)*b+x,a=Math.sin(S)*w+_,m?p(c=n,h=a):g(u,d,n,a),u=Math.cos(I)*b+x,d=Math.sin(I)*w+_;for(var C=(M?-1:1)*Math.PI/2,L=S;M?L>I:L<I;L+=C){f(L,M?Math.max(L+C,I):Math.min(L+C,I),x,_,b,w)}break;case ay.R:c=u=r[y++],h=d=r[y++],n=c+r[y++],a=h+r[y++],p(n,h),g(n,h,n,a),g(n,a,c,a),g(c,a,c,h),g(c,h,n,h);break;case ay.Z:e&&g(u,d,c,h),u=c,d=h}}return e&&e.length>2&&l.push(e),l}function ry(t,e,n,a,i,o,r,s,l,u){if(iy(t,n)&&iy(e,a)&&iy(i,r)&&iy(o,s))l.push(r,s);else{var d=2/u,c=d*d,h=r-t,p=s-e,g=Math.sqrt(h*h+p*p);h/=g,p/=g;var f=n-t,y=a-e,v=i-r,m=o-s,x=f*f+y*y,_=v*v+m*m;if(x<c&&_<c)l.push(r,s);else{var b=h*f+p*y,w=-h*v-p*m;if(x-b*b<c&&b>=0&&_-w*w<c&&w>=0)l.push(r,s);else{var S=[],I=[];Hi(t,n,i,r,.5,S),Hi(e,a,o,s,.5,I),ry(S[0],I[0],S[1],I[1],S[2],I[2],S[3],I[3],l,u),ry(S[4],I[4],S[5],I[5],S[6],I[6],S[7],I[7],l,u)}}}}function sy(t,e,n){var a=t[e],i=t[1-e],o=Math.abs(a/i),r=Math.ceil(Math.sqrt(o*n)),s=Math.floor(n/r);0===s&&(s=1,r=n);for(var l=[],u=0;u<r;u++)l.push(s);var d=n-r*s;if(d>0)for(u=0;u<d;u++)l[u%r]+=1;return l}function ly(t,e,n){for(var a=t.r0,i=t.r,o=t.startAngle,r=t.endAngle,s=Math.abs(r-o),l=s*i,u=i-a,d=l>Math.abs(u),c=sy([l,u],d?0:1,e),h=(d?s:u)/c.length,p=0;p<c.length;p++)for(var g=(d?u:s)/c[p],f=0;f<c[p];f++){var y={};d?(y.startAngle=o+h*p,y.endAngle=o+h*(p+1),y.r0=a+g*f,y.r=a+g*(f+1)):(y.startAngle=o+g*f,y.endAngle=o+g*(f+1),y.r0=a+h*p,y.r=a+h*(p+1)),y.clockwise=t.clockwise,y.cx=t.cx,y.cy=t.cy,n.push(y)}}function uy(t,e,n,a){return t*a-n*e}function dy(t,e,n,a,i,o,r,s){var l=n-t,u=a-e,d=r-i,c=s-o,h=uy(d,c,l,u);if(Math.abs(h)<1e-6)return null;var p=uy(t-i,e-o,d,c)/h;return p<0||p>1?null:new sn(p*l+t,p*u+e)}function cy(t,e,n){var a=new sn;sn.sub(a,n,e),a.normalize();var i=new sn;return sn.sub(i,t,e),i.dot(a)}function hy(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function py(t){var n=t.points,a=[],i=[];mt(n,a,i);var o=new e(a[0],a[1],i[0]-a[0],i[1]-a[1]),r=o.width,s=o.height,l=o.x,u=o.y,d=new sn,c=new sn;return r>s?(d.x=c.x=l+r/2,d.y=u,c.y=u+s):(d.y=c.y=u+s/2,d.x=l,c.x=l+r),function(t,e,n){for(var a=t.length,i=[],o=0;o<a;o++){var r=t[o],s=t[(o+1)%a],l=dy(r[0],r[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&i.push({projPt:cy(l,e,n),pt:l,idx:o})}if(i.length<2)return[{points:t},{points:t}];i.sort(function(t,e){return t.projPt-e.projPt});var u=i[0],d=i[i.length-1];if(d.idx<u.idx){var c=u;u=d,d=c}var h=[u.pt.x,u.pt.y],p=[d.pt.x,d.pt.y],g=[h],f=[p];for(o=u.idx+1;o<=d.idx;o++)hy(g,t[o].slice());for(hy(g,p),hy(g,h),o=d.idx+1;o<=u.idx+a;o++)hy(f,t[o%a].slice());return hy(f,h),hy(f,p),[{points:g},{points:f}]}(n,d,c)}function gy(t,e,n,a){if(1===n)a.push(e);else{var i=Math.floor(n/2),o=t(e);gy(t,o[0],i,a),gy(t,o[1],n-i,a)}return a}function fy(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function yy(t,e){var n,a=[],i=t.shape;switch(t.type){case"rect":!function(t,e,n){for(var a=t.width,i=t.height,o=a>i,r=sy([a,i],o?0:1,e),s=o?"width":"height",l=o?"height":"width",u=o?"x":"y",d=o?"y":"x",c=t[s]/r.length,h=0;h<r.length;h++)for(var p=t[l]/r[h],g=0;g<r[h];g++){var f={};f[u]=h*c,f[d]=g*p,f[s]=c,f[l]=p,f.x+=t.x,f.y+=t.y,n.push(f)}}(i,e,a),n=ce;break;case"sector":ly(i,e,a),n=He;break;case"circle":ly({r0:0,r:i.r,startAngle:0,endAngle:2*Math.PI,cx:i.cx,cy:i.cy},e,a),n=He;break;default:var o=t.getComputedTransform(),r=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=A(function(t,e){var n=oy(t),a=[];e=e||1;for(var i=0;i<n.length;i++){var o=n[i],r=[],s=o[0],l=o[1];r.push(s,l);for(var u=2;u<o.length;){var d=o[u++],c=o[u++],h=o[u++],p=o[u++],g=o[u++],f=o[u++];ry(s,l,d,c,h,p,g,f,r,e),s=g,l=f}a.push(r)}return a}(t.getUpdatedPathProxy(),r),function(t){return function(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}(t)}),l=s.length;if(0===l)gy(py,{points:s[0]},e,a);else if(l===e)for(var u=0;u<l;u++)a.push({points:s[u]});else{var d=0,c=A(s,function(t){var e=[],n=[];mt(t,e,n);var a=(n[1]-e[1])*(n[0]-e[0]);return d+=a,{poly:t,area:a}});c.sort(function(t,e){return e.area-t.area});var h=e;for(u=0;u<l;u++){var p=c[u];if(h<=0)break;var g=u===l-1?h:Math.ceil(p.area/d*e);g<0||(gy(py,{points:p.poly},g,a),h-=g)}}n=Xt}if(!n)return function(t,e){for(var n=[],a=0;a<e;a++)n.push(Xi(t));return n}(t,e);var f=[];for(u=0;u<a.length;u++){var y=new n;y.setShape(a[u]),fy(t,y),f.push(y)}return f}function vy(t,e){var n=t.length,a=e.length;if(n===a)return[t,e];for(var i=[],o=[],r=n<a?t:e,s=Math.min(n,a),l=Math.abs(a-n)/6,u=(s-2)/6,d=Math.ceil(l/u)+1,c=[r[0],r[1]],h=l,p=2;p<s;){var g=r[p-2],f=r[p-1],y=r[p++],v=r[p++],m=r[p++],x=r[p++],_=r[p++],b=r[p++];if(h<=0)c.push(y,v,m,x,_,b);else{for(var w=Math.min(h,d-1)+1,S=1;S<=w;S++){var I=S/w;Hi(g,y,m,_,I,i),Hi(f,v,x,b,I,o),g=i[3],f=o[3],c.push(i[1],o[1],i[2],o[2],g,f),y=i[5],v=o[5],m=i[6],x=o[6]}h-=w-1}}return r===t?[c,e]:[t,c]}function my(t,e){for(var n=t.length,a=t[n-2],i=t[n-1],o=[],r=0;r<e.length;)o[r++]=a,o[r++]=i;return o}function xy(t){for(var e=0,n=0,a=0,i=t.length,o=0,r=i-2;o<i;r=o,o+=2){var s=t[r],l=t[r+1],u=t[o],d=t[o+1],c=s*d-u*l;e+=c,n+=(s+u)*c,a+=(l+d)*c}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,a/e/3,e]}function _y(t,e,n,a){for(var i=(t.length-2)/6,o=1/0,r=0,s=t.length,l=s-2,u=0;u<i;u++){for(var d=6*u,c=0,h=0;h<s;h+=2){var p=0===h?d:(d+h-2)%l+2,g=t[p]-n[0],f=t[p+1]-n[1],y=e[h]-a[0]-g,v=e[h+1]-a[1]-f;c+=y*y+v*v}c<o&&(o=c,r=u)}return r}function by(t){for(var e=[],n=t.length,a=0;a<n;a+=2)e[a]=t[n-a-2],e[a+1]=t[n-a-1];return e}function wy(t){return t.__isCombineMorphing}var Sy="__mOriginal_";function Iy(t,e,n){var a=Sy+e,i=t[a]||t[e];t[a]||(t[a]=t[e]);var o=n.replace,r=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=o?o.apply(this,e):i.apply(this,e),r&&r.apply(this,e),t}}function My(t,e){var n=Sy+e;t[n]&&(t[e]=t[n],t[n]=null)}function Cy(t,e){for(var n=0;n<t.length;n++)for(var a=t[n],i=0;i<a.length;){var o=a[i],r=a[i+1];a[i++]=e[0]*o+e[2]*r+e[4],a[i++]=e[1]*o+e[3]*r+e[5]}}function Ly(t,e){var n=t.getUpdatedPathProxy(),a=e.getUpdatedPathProxy(),i=function(t,e){for(var n,a,i,o=[],r=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],u=e[s],d=void 0,c=void 0;l?u?(a=d=(n=vy(l,u))[0],i=c=n[1]):(c=my(i||l,l),d=l):(d=my(a||u,u),c=u),o.push(d),r.push(c)}return[o,r]}(oy(n),oy(a)),o=i[0],r=i[1],s=t.getComputedTransform(),l=e.getComputedTransform();s&&Cy(o,s),l&&Cy(r,l),Iy(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var u=function(t,e,n,a){for(var i,o=[],r=0;r<t.length;r++){var s=t[r],l=e[r],u=xy(s),d=xy(l);null==i&&(i=u[2]<0!=d[2]<0);var c=[],h=[],p=0,g=1/0,f=[],y=s.length;i&&(s=by(s));for(var v=6*_y(s,l,u,d),m=y-2,x=0;x<m;x+=2){var _=(v+x)%m+2;c[x+2]=s[_]-u[0],c[x+3]=s[_+1]-u[1]}c[0]=s[v]-u[0],c[1]=s[v+1]-u[1];for(var b=a/n,w=-a/2;w<=a/2;w+=b){var S=Math.sin(w),I=Math.cos(w),M=0;for(x=0;x<s.length;x+=2){var C=c[x],L=c[x+1],T=l[x]-d[0],A=l[x+1]-d[1],D=T*I-A*S,P=T*S+A*I;f[x]=D,f[x+1]=P;var N=D-C,k=P-L;M+=N*N+k*k}if(M<g){g=M,p=w;for(var E=0;E<f.length;E++)h[E]=f[E]}}o.push({from:c,to:h,fromCp:u,toCp:d,rotation:-p})}return o}(o,r,10,Math.PI),d=[];Iy(e,"buildPath",{replace:function(t){for(var n=e.__morphT,a=1-n,i=[],o=0;o<u.length;o++){var r=u[o],s=r.from,l=r.to,c=r.rotation*n,h=r.fromCp,p=r.toCp,g=Math.sin(c),f=Math.cos(c);Zi(i,h,p,n);for(var y=0;y<s.length;y+=2){var v=s[y],m=s[y+1],x=v*a+(S=l[y])*n,_=m*a+(I=l[y+1])*n;d[y]=x*f-_*g+i[0],d[y+1]=x*g+_*f+i[1]}var b=d[0],w=d[1];t.moveTo(b,w);for(y=2;y<s.length;){var S=d[y++],I=d[y++],M=d[y++],C=d[y++],L=d[y++],T=d[y++];b===S&&w===I&&M===L&&C===T?t.lineTo(L,T):t.bezierCurveTo(S,I,M,C,L,T),b=L,w=T}}}})}function Ty(t,e,n){if(!t||!e)return e;var a=n.done,i=n.during;return Ly(t,e),e.__morphT=0,e.animateTo({__morphT:1},At({during:function(t){e.dirtyShape(),i&&i(t)},done:function(){My(e,"buildPath"),My(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),a&&a()}},n)),e}function Ay(t,e,n,a,i,o){t=i===n?0:Math.round(32767*(t-n)/(i-n)),e=o===a?0:Math.round(32767*(e-a)/(o-a));for(var r,s=0,l=32768;l>0;l/=2){var u=0,d=0;(t&l)>0&&(u=1),(e&l)>0&&(d=1),s+=l*l*(3*u^d),0===d&&(1===u&&(t=l-1-t,e=l-1-e),r=t,t=e,e=r)}return s}function Dy(t){var e=1/0,n=1/0,a=-1/0,i=-1/0,o=A(t,function(t){var o=t.getBoundingRect(),r=t.getComputedTransform(),s=o.x+o.width/2+(r?r[4]:0),l=o.y+o.height/2+(r?r[5]:0);return e=Math.min(s,e),n=Math.min(l,n),a=Math.max(s,a),i=Math.max(l,i),[s,l]});return A(o,function(o,r){return{cp:o,z:Ay(o[0],o[1],e,n,a,i),path:t[r]}}).sort(function(t,e){return t.z-e.z}).map(function(t){return t.path})}function Py(t){return yy(t.path,t.count)}function Ny(t){return dt(t[0])}function ky(t,e){for(var n=[],a=t.length,i=0;i<a;i++)n.push({one:t[i],many:[]});for(i=0;i<e.length;i++){var o=e[i].length,r=void 0;for(r=0;r<o;r++)n[r%a].many.push(e[i][r])}var s=0;for(i=a-1;i>=0;i--)if(!n[i].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}o=l.length;var u=Math.ceil(o/2);n[i].many=l.slice(u,o),n[s].many=l.slice(0,u),s++}return n}var Ey={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),a=0;a<t.count;a++){var i=Xi(t.path);i.setStyle("opacity",n),e.push(i)}return e},split:null};function Ry(t,e,a,i,o,r){if(t.length&&e.length){var s=va("update",i,o);if(s&&s.duration>0){var l,u,d=i.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},s);Ny(t)&&(l=t,u=e),Ny(e)&&(l=e,u=t);for(var h=l?l===t:t.length>e.length,p=l?ky(u,l):ky(h?e:t,[h?t:e]),g=0,f=0;f<p.length;f++)g+=p[f].many.length;var y=0;for(f=0;f<p.length;f++)v(p[f],h,y,g),y+=p[f].many.length}}function v(t,e,i,o,s){var l=t.many,u=t.one;if(1!==l.length||s)for(var h=At({dividePath:Ey[a],individualDelay:d&&function(t,e,n,a){return d(t+i,o)}},c),p=e?function(t,e,a){var i=[];!function t(e){for(var n=0;n<e.length;n++){var a=e[n];wy(a)?t(a.childrenRef()):a instanceof W&&i.push(a)}}(t);var o=i.length;if(!o)return{fromIndividuals:[],toIndividuals:[],count:0};var r=(a.dividePath||Py)({path:e,count:o});if(r.length!==o)return{fromIndividuals:[],toIndividuals:[],count:0};i=Dy(i),r=Dy(r);for(var s=a.done,l=a.during,u=a.individualDelay,d=new n,c=0;c<o;c++){var h=i[c],p=r[c];p.parent=e,p.copyTransform(d),u||Ly(h,p)}function g(t){for(var e=0;e<r.length;e++)r[e].addSelfToZr(t)}function f(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,My(e,"addSelfToZr"),My(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return r},Iy(e,"addSelfToZr",{after:function(t){g(t)}}),Iy(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<r.length;e++)r[e].removeSelfFromZr(t)}});var y=r.length;if(u){var v=y,m=function(){0===--v&&(f(),s&&s())};for(c=0;c<y;c++){var x=u?At({delay:(a.delay||0)+u(c,y,i[c],r[c]),done:m},a):a;Ty(i[c],r[c],x)}}else e.__morphT=0,e.animateTo({__morphT:1},At({during:function(t){for(var n=0;n<y;n++){var a=r[n];a.__morphT=e.__morphT,a.dirtyShape()}l&&l(t)},done:function(){f();for(var e=0;e<t.length;e++)My(t[e],"updateTransform");s&&s()}},a));return e.__zr&&g(e.__zr),{fromIndividuals:i,toIndividuals:r,count:y}}(l,u,h):function(t,e,n){var a=e.length,i=[],o=n.dividePath||Py;if(wy(t)){!function t(e){for(var n=0;n<e.length;n++){var a=e[n];wy(a)?t(a.childrenRef()):a instanceof W&&i.push(a)}}(t.childrenRef());var r=i.length;if(r<a)for(var s=0,l=r;l<a;l++)i.push(Xi(i[s++%r]));i.length=a}else{i=o({path:t,count:a});var u=t.getComputedTransform();for(l=0;l<i.length;l++)i[l].setLocalTransform(u);if(i.length!==a)return{fromIndividuals:[],toIndividuals:[],count:0}}i=Dy(i),e=Dy(e);var d=n.individualDelay;for(l=0;l<a;l++){var c=d?At({delay:(n.delay||0)+d(l,a,i[l],e[l])},n):n;Ty(i[l],e[l],c)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}(u,l,h),g=p.fromIndividuals,f=p.toIndividuals,y=g.length,m=0;m<y;m++){x=d?At({delay:d(m,y)},c):c;r(g[m],f[m],e?l[m]:t.one,e?t.one:l[m],x)}else{var x,_=e?l[0]:u,b=e?u:l[0];if(wy(_))v({many:[_],one:b},!0,i,o,!0);else Ty(_,b,x=d?At({delay:d(i,o)},c):c),r(_,b,_,b,x)}}}function zy(t){if(!t)return[];if(dt(t)){for(var e=[],n=0;n<t.length;n++)e.push(zy(t[n]));return e}var a=[];return t.traverse(function(t){t instanceof W&&!t.disableMorphing&&!t.invisible&&!t.ignore&&a.push(t)}),a}var Oy=t();function Vy(t,e,n,a){var i=function(t,e){for(var n=t.dimensions,a=0;a<n.length;a++){var i=t.getDimensionInfo(n[a]);if(i&&0===i.otherDims[e])return n[a]}}(t,a?"itemChildGroupId":"itemGroupId");if(i){var o=function(t,e,n){var a=t.getDimensionInfo(n),i=a&&a.ordinalMeta;if(a){var o=t.get(a.name,e);return i&&i.categories[o]||o+""}}(t,e,i);return o}var r=t.getRawDataItem(e),s=a?"childGroupId":"groupId";return r&&r[s]?r[s]+"":a?void 0:n||t.getId(e)}function By(t){var e=[];return l(t,function(t){var n=t.data,a=t.dataGroupId;if(!(n.count()>1e4))for(var i=n.getIndices(),o=0;o<i.length;o++)e.push({data:n,groupId:Vy(n,o,a,!1),childGroupId:Vy(n,o,a,!0),divide:t.divide,dataIndex:o})}),e}function Gy(t,e,n){t.traverse(function(t){t instanceof W&&_(t,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})})}function Wy(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function Fy(t){t.stopAnimation(),t.isGroup&&t.traverse(function(t){t.stopAnimation()})}function Yy(t,e,n){var a=By(t),i=By(e);function o(t,e,n,a,i){(n||t)&&e.animateFrom({style:n&&n!==t?R(R({},n.style),t.style):t.style},i)}var r=!1,s=0,u=Yt(),c=Yt();a.forEach(function(t){t.groupId&&u.set(t.groupId,!0),t.childGroupId&&c.set(t.childGroupId,!0)});for(var h=0;h<i.length;h++){var p=i[h].groupId;if(c.get(p)){s=1;break}var g=i[h].childGroupId;if(g&&u.get(g)){s=2;break}}function f(t,e){return function(n){var a=n.data,i=n.dataIndex;return e?a.getId(i):t?1===s?n.childGroupId:n.groupId:2===s?n.childGroupId:n.groupId}}var y=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var a=0;a<n;a++){var i=t[a],o=e[a];if(i.data.getId(i.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}(a,i),v={};if(!y)for(h=0;h<i.length;h++){var m=i[h],x=m.data.getItemGraphicEl(m.dataIndex);x&&(v[x.id]=!0)}function _(t,e){var n=a[e],s=i[t],l=s.data.hostModel,u=n.data.getItemGraphicEl(n.dataIndex),d=s.data.getItemGraphicEl(s.dataIndex);u!==d?u&&v[u.id]||d&&(Fy(d),u?(Fy(u),Wy(u),r=!0,Ry(zy(u),zy(d),s.divide,l,t,o)):Gy(d,l,t)):d&&function(t,e,n){var a=va("update",n,e);a&&t.traverse(function(t){if(t instanceof de){var e=qi(t);e&&t.animateFrom({style:e},a)}})}(d,s.dataIndex,l)}new $t(a,i,f(!0,y),f(!1,y),null,"multiple").update(_).updateManyToOne(function(t,e){var n=i[t],s=n.data,u=s.hostModel,c=s.getItemGraphicEl(n.dataIndex),h=d(A(e,function(t){return a[t].data.getItemGraphicEl(a[t].dataIndex)}),function(t){return t&&t!==c&&!v[t.id]});c&&(Fy(c),h.length?(l(h,function(t){Fy(t),Wy(t)}),r=!0,Ry(zy(h),zy(c),n.divide,u,t,o)):Gy(c,u,n.dataIndex))}).updateOneToMany(function(t,e){var n=a[e],s=n.data.getItemGraphicEl(n.dataIndex);if(!s||!v[s.id]){var u=d(A(t,function(t){return i[t].data.getItemGraphicEl(i[t].dataIndex)}),function(t){return t&&t!==s}),c=i[t[0]].data.hostModel;u.length&&(l(u,function(t){return Fy(t)}),s?(Fy(s),Wy(s),r=!0,Ry(zy(s),zy(u),n.divide,c,t[0],o)):l(u,function(e){return Gy(e,c,t[0])}))}}).updateManyToMany(function(t,e){new $t(e,t,function(t){return a[t].data.getId(a[t].dataIndex)},function(t){return i[t].data.getId(i[t].dataIndex)}).update(function(n,a){_(t[n],e[a])}).execute()}).execute(),r&&l(e,function(t){var e=t.data.hostModel,a=e&&n.getViewOfSeriesModel(e),i=va("update",e,0);a&&e.isAnimationEnabled()&&i&&i.duration>0&&a.group.traverse(function(t){t instanceof W&&!t.animators.length&&t.animateFrom({style:{opacity:0}},i)})})}function Uy(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function Hy(t){return dt(t)?t.sort().join(","):t}function Xy(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function Zy(t,e){for(var n=0;n<t.length;n++){if(null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id)return n}}var jy=function(){function t(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return t.prototype.setBreaks=function(t){this.breaks=t.breaks},t.prototype.update=function(t){!function(t,e){var n=0,a={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},i=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},o={S:{tpAbs:i(),tpPrct:i()},E:{tpAbs:i(),tpPrct:i()}};l(t.breaks,function(t){var i=t.gapParsed;"tpPrct"===i.type&&(n+=i.val);var r=tv(t,e);if(r){var s=r.vmin!==t.vmin,l=r.vmax!==t.vmax,u=r.vmax-r.vmin;if(s&&l);else if(s||l){var d=s?"S":"E";o[d][i.type].has=!0,o[d][i.type].span=u,o[d][i.type].inExtFrac=u/(t.vmax-t.vmin),o[d][i.type].val=i.val}else a[i.type].span+=u,a[i.type].val+=i.val}});var r=n*(e[1]-e[0]+0+(a.tpAbs.val-a.tpAbs.span)+(o.S.tpAbs.has?(o.S.tpAbs.val-o.S.tpAbs.span)*o.S.tpAbs.inExtFrac:0)+(o.E.tpAbs.has?(o.E.tpAbs.val-o.E.tpAbs.span)*o.E.tpAbs.inExtFrac:0)-a.tpPrct.span-(o.S.tpPrct.has?o.S.tpPrct.span*o.S.tpPrct.inExtFrac:0)-(o.E.tpPrct.has?o.E.tpPrct.span*o.E.tpPrct.inExtFrac:0))/(1-a.tpPrct.val-(o.S.tpPrct.has?o.S.tpPrct.val*o.S.tpPrct.inExtFrac:0)-(o.E.tpPrct.has?o.E.tpPrct.val*o.E.tpPrct.inExtFrac:0));l(t.breaks,function(t){var e=t.gapParsed;"tpPrct"===e.type&&(t.gapReal=0!==n?Math.max(r,0)*e.val/n:0),"tpAbs"===e.type&&(t.gapReal=e.val),null==t.gapReal&&(t.gapReal=0)})}(this,t);var e=this._elapsedExtent;e[0]=this.elapse(t[0]),e[1]=this.elapse(t[1])},t.prototype.hasBreaks=function(){return!!this.breaks.length},t.prototype.calcNiceTickMultiple=function(t,e){for(var n=0;n<this.breaks.length;n++){var a=this.breaks[n];if(a.vmin<t&&t<a.vmax)return e(t,a.vmax)}return 0},t.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},t.prototype.normalize=function(t){var e=this._elapsedExtent[1]-this._elapsedExtent[0];return 0===e?.5:(this.elapse(t)-this._elapsedExtent[0])/e},t.prototype.scale=function(t){return this.unelapse(t*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},t.prototype.elapse=function(t){for(var e=Ky,n=$y,a=!0,i=0;i<this.breaks.length;i++){var o=this.breaks[i];if(t<=o.vmax){t>o.vmin?e+=o.vmin-n+(t-o.vmin)/(o.vmax-o.vmin)*o.gapReal:e+=t-n,n=o.vmax,a=!1;break}e+=o.vmin-n+o.gapReal,n=o.vmax}return a&&(e+=t-n),e},t.prototype.unelapse=function(t){for(var e=Ky,n=$y,a=!0,i=0,o=0;o<this.breaks.length;o++){var r=this.breaks[o],s=e+r.vmin-n,l=s+r.gapReal;if(t<=l){i=t>s?r.vmin+(t-s)/(l-s)*(r.vmax-r.vmin):n+t-e,n=r.vmax,a=!1;break}e=l,n=r.vmax}return a&&(i=n+t-e),i},t}();function qy(){return new jy}var Ky=0,$y=0;function Qy(t,e,n,a,i,o){"no"!==t&&l(n,function(n){var r=tv(n,o);if(r)for(var s=e.length-1;s>=0;s--){var l=e[s],u=a(l),d=3*i/4;u>r.vmin-d&&u<r.vmax+d&&("preserve_extent_bound"!==t||u!==o[0]&&u!==o[1])&&e.splice(s,1)}})}function Jy(t,e,n,a){l(e,function(e){var i=tv(e,n);i&&(t.push({value:i.vmin,break:{type:"vmin",parsedBreak:i},time:a?a(i):void 0}),t.push({value:i.vmax,break:{type:"vmax",parsedBreak:i},time:a?a(i):void 0}))}),e.length&&t.sort(function(t,e){return t.value-e.value})}function tv(t,e){var n=Math.max(t.vmin,e[0]),a=Math.min(t.vmax,e[1]);return n<a||n===a&&n>e[0]&&n<e[1]?{vmin:n,vmax:a,breakOption:t.breakOption,gapParsed:t.gapParsed,gapReal:t.gapReal}:null}function ev(t,e,n){var a=[];if(!t)return{breaks:a};l(t,function(t){if(t&&null!=t.start&&null!=t.end&&!t.isExpanded){var i={breakOption:at(t),vmin:e(t.start),vmax:e(t.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(null!=t.gap){var o=!1;if(N(t.gap)){var r=Qi(t.gap);if(r.match(/%$/)){var s=parseFloat(r)/100;(function(t){return t>=0&&t<.99999})(s)||(s=0),i.gapParsed.type="tpPrct",i.gapParsed.val=s,o=!0}}if(!o){var u=e(t.gap);(!isFinite(u)||u<0)&&(u=0),i.gapParsed.type="tpAbs",i.gapParsed.val=u}}if(i.vmin===i.vmax&&(i.gapParsed.type="tpAbs",i.gapParsed.val=0),n&&n.noNegative&&l(["vmin","vmax"],function(t){i[t]<0&&(i[t]=0)}),i.vmin>i.vmax){var d=i.vmax;i.vmax=i.vmin,i.vmin=d}a.push(i)}}),a.sort(function(t,e){return t.vmin-e.vmin});var i=-1/0;return l(a,function(t,e){i>t.vmin&&(a[e]=null),i=t.vmax}),{breaks:a.filter(function(t){return!!t})}}function nv(t,e){return av(e)===av(t)}function av(t){return t.start+"_\0_"+t.end}function iv(t,e,n){var a=[];l(t,function(t,n){var i=e(t);i&&"vmin"===i.type&&a.push([n])}),l(t,function(n,i){var o=e(n);if(o&&"vmax"===o.type){var r=$i(a,function(n){return nv(e(t[n[0]]).parsedBreak.breakOption,o.parsedBreak.breakOption)});r&&r.push(i)}});var i=[];return l(a,function(e){2===e.length&&i.push(n?e:[t[e[0]],t[e[1]]])}),i}function ov(t,e,n,a){var i,o;if(t.break){var r=t.break.parsedBreak,s=$i(n,function(e){return nv(e.breakOption,t.break.parsedBreak.breakOption)}),l=a(Math.pow(e,r.vmin),s.vmin),u=a(Math.pow(e,r.vmax),s.vmax),d={type:r.gapParsed.type,val:"tpAbs"===r.gapParsed.type?tn(Math.pow(e,r.vmin+r.gapParsed.val))-l:r.gapParsed.val};i={type:t.break.type,parsedBreak:{breakOption:r.breakOption,vmin:l,vmax:u,gapParsed:d,gapReal:r.gapReal}},o=s[t.break.type]}return{brkRoundingCriterion:o,vBreak:i}}function rv(t,e,n){var a={noNegative:!0},i=ev(t,n,a),o=ev(t,n,a),r=Math.log(e);return o.breaks=A(o.breaks,function(t){var e=Math.log(t.vmin)/r;return{vmin:e,vmax:Math.log(t.vmax)/r,gapParsed:{type:t.gapParsed.type,val:"tpAbs"===t.gapParsed.type?Math.log(t.vmin+t.gapParsed.val)/r-e:t.gapParsed.val},gapReal:t.gapReal,breakOption:t.breakOption}}),{parsedOriginal:i,parsedLogged:o}}var sv={vmin:"start",vmax:"end"};function lv(t,e){return e&&((t=t||{}).break={type:sv[e.type],start:e.parsedBreak.vmin,end:e.parsedBreak.vmax}),t}var uv=t();function dv(t,e,n,a,i){var o=n.axis;if(!o.scale.isBlank()&&to()){var r=to().retrieveAxisBreakPairs(o.scale.getTicks({breakTicks:"only_break"}),function(t){return t.break},!1);if(r.length){var s=n.getModel("breakArea"),u=s.get("zigzagAmplitude"),d=s.get("zigzagMinSpan"),c=s.get("zigzagMaxSpan");d=Math.max(2,d||0),c=Math.max(d,c||0);var h=s.get("expandOnClick"),p=s.get("zigzagZ"),g=s.getModel("itemStyle").getItemStyle(),f=g.stroke,y=g.lineWidth,v=g.lineDash,m=g.fill,x=new yt({ignoreModelZ:!0}),_=o.isHorizontal(),b=uv(e).visualList||(uv(e).visualList=[]);l(b,function(t){return t.shouldRemove=!0});for(var w=function(t){var e=r[t][0].break.parsedBreak,s=[];s[0]=o.toGlobalCoord(o.dataToCoord(e.vmin,!0)),s[1]=o.toGlobalCoord(o.dataToCoord(e.vmax,!0)),s[1]<s[0]&&s.reverse();var l=function(t,e){var n=$i(t,function(t){return to().identifyAxisBreak(t.parsedBreak.breakOption,e.breakOption)});return n||t.push(n={zigzagRandomList:[],parsedBreak:e,shouldRemove:!1}),n}(b,e);l.shouldRemove=!1;var w=new yt;!function(t,e,n,i,o,r){var s={stroke:f,lineWidth:y,lineDash:v,fill:"none"},l=o?0:1,h=1-l,x=a[ni[h]]+a[ai[h]];function _(t){var e=[],n=[];e[l]=n[l]=t,e[h]=a[ni[h]],n[h]=x;var i={x1:e[0],y1:e[1],x2:n[0],y2:n[1]};return ro(i,i,{lineWidth:1}),e[0]=i.x1,e[1]=i.y1,e[l]}n=_(n),i=_(i);for(var b=[],w=[],S=!0,I=a[ni[h]],M=0;;M++){var C=I===a[ni[h]],L=I>=x;L&&(I=x);var T=[],A=[];T[l]=n,A[l]=i,C||L||(T[l]+=S?-u:u,A[l]-=S?u:-u),T[h]=I,A[h]=I,b.push(T),w.push(A);var D=void 0;if(M<t.length?D=t[M]:(D=Math.random(),t.push(D)),I+=D*(c-d)+d,S=!S,L)break}var P=to().serializeAxisBreakIdentifier(r.breakOption);if(e.add(new rn({anid:"break_a_"+P,shape:{points:b},style:s,z:p})),0!==r.gapReal){e.add(new rn({anid:"break_b_"+P,shape:{points:w},style:s,z:p}));var N=w.slice();N.reverse();var k=b.concat(N);e.add(new Xt({anid:"break_c_"+P,shape:{points:k},style:{fill:m,opacity:g.opacity},z:p}))}}(l.zigzagRandomList,w,s[0],s[1],_,e),h&&w.on("click",function(){var t={type:eo,breaks:[{start:e.breakOption.start,end:e.breakOption.end}]};t[o.dim+"AxisIndex"]=n.componentIndex,i.dispatchAction(t)}),w.silent=!h,x.add(w)},S=0;S<r.length;S++)w(S);t.add(x),function(t){for(var e=t.length-1;e>=0;e--)t[e].shouldRemove&&t.splice(e,1)}(b)}}}function cv(t,e,n,a){var i=t.axis,o=n.transform;et(a.style);var r=i.getExtent();i.inverse&&(r=r.slice()).reverse();var s=to().retrieveAxisBreakPairs(i.scale.getTicks({breakTicks:"only_break"}),function(t){return t.break},!1),l=A(s,function(t){var e=t[0].break.parsedBreak,n=[i.dataToCoord(e.vmin,!0),i.dataToCoord(e.vmax,!0)];return n[0]>n[1]&&n.reverse(),{coordPair:n,brkId:to().serializeAxisBreakIdentifier(e.breakOption)}});l.sort(function(t,e){return t.coordPair[0]-e.coordPair[0]});for(var u=r[0],d=null,c=0;c<l.length;c++){var h=l[c],p=Math.max(h.coordPair[0],r[0]),g=Math.min(h.coordPair[1],r[1]);u<=p&&f(u,p,d,h),u=g,d=h}function f(t,n,i,r){function s(t,e){o&&(Ei(t,t,o),Ei(e,e,o))}function l(t,e){var n={x1:t[0],y1:t[1],x2:e[0],y2:e[1]};ro(n,n,a.style),t[0]=n.x1,t[1]=n.y1,e[0]=n.x2,e[1]=n.y2}var u=[t,0],d=[n,0],c=[t,5],h=[n,5];s(u,c),l(u,c),s(d,h),l(d,h),l(u,d);var p=new Je(R({shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]}},a));e.add(p),p.anid="breakLine_"+(i?i.brkId:"\0")+"_\0_"+(r?r.brkId:"\0")}u<=r[1]&&f(u,r[1],d,null)}function hv(t,e,n){if(!$i(n,function(t){return!t})){var a=new sn;if(io(n[0],n[1],a,{direction:-(t?e+Math.PI:e),touchThreshold:0,bidirectional:!1})){var i=te();xn(i,i,-e);var o=A(n,function(t){return t.transform?ki(te(),i,t.transform):i}),r=.5;if(f(0)||f(1)){var s=A(n,function(t,e){var n=t.localRect.clone();return n.applyTransform(o[e]),n}),l=new sn;l.copy(n[0].label).add(n[1].label).scale(.5),l.transform(i);var u=a.clone().transform(i),d=(s[0].x+s[1].x+(u.x>=0?s[0].width:s[1].width)+u.x)/2-l.x,c=Math.min(d,d-u.x),h=Math.max(d,d-u.x);r=(d-(h<0?h:c>0?c:0))/u.x}var p=new sn,g=new sn;sn.scale(p,a,-r),sn.scale(g,a,1-r),oo(n[0],p),oo(n[1],g)}}function f(t){var e=n[0].localRect,a=new sn(e[ai[t]]*o[0][0],e[ai[t]]*o[0][1]);return Math.abs(a.y)<1e-5}}function pv(t,e){var n={breaks:[]};return l(e.breaks,function(a){if(a){var i=$i(t.get("breaks",!0),function(t){return to().identifyAxisBreak(t,a)});if(i){var o=e.type,r={isExpanded:!!i.isExpanded};i.isExpanded=o===eo||o!==no&&(o===ao?!i.isExpanded:i.isExpanded),n.breaks.push({start:i.start,end:i.end,isExpanded:!!i.isExpanded,old:r})}}}),n}function gv(t,n){l(t,function(t){if(!t.model.get(["axisLabel","inside"])){var a=function(t){var n,a,i=t.model,o=t.scale;if(!i.get(["axisLabel","show"])||o.isBlank())return;var r=o.getExtent();a=o instanceof si?o.count():(n=o.getTicks()).length;var s,l=t.getLabelModel(),u=uo(t),d=1;a>40&&(d=Math.ceil(a/40));for(var c=0;c<a;c+=d){var h=u(n?n[c]:{value:r[0]+c},c),p=g(l.getTextRect(h),l.get("rotate")||0);s?s.union(p):s=p}return s;function g(t,n){var a=n*Math.PI/180,i=t.width,o=t.height,r=i*Math.abs(Math.cos(a))+Math.abs(o*Math.sin(a)),s=i*Math.abs(Math.sin(a))+Math.abs(o*Math.cos(a));return new e(t.x,t.y,r,s)}}(t);if(a){var i=t.isHorizontal()?"height":"width",o=t.model.get(["axisLabel","margin"]);n[i]-=a[i]+o,"top"===t.position?n.y+=a.height+o:"left"===t.position&&(n.x+=a.width+o)}}})}Nn([co]),Nn([function(t){t.registerPainter("svg",ns)}]),Nn([ho,po,go,fo,yo,vo,function(t){t.registerChartView(gs),t.registerSeriesModel(zs),t.registerLayout(Vs),t.registerVisual(Bs),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,a=e.getData().tree.getNodeByDataIndex(n);a.isExpand=!a.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e,n){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=e.coordinateSystem,a=Wt(n,t,e.get("scaleLimit"));e.setCenter(a.center),e.setZoom(a.zoom)})})}(t)},function(t){t.registerSeriesModel(Fs),t.registerChartView(il),t.registerVisual(rl),t.registerLayout(xl),function(t){for(var e=0;e<Gs.length;e++)t.registerAction({type:Gs[e],update:"updateView"},gt);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var a=Ns(t,["treemapZoomToNode","treemapRootToNode"],e);if(a){var i=e.getViewRoot();i&&(t.direction=Es(i,a.node)?"rollUp":"drillDown"),e.resetViewRoot(a.node)}})})}(t)},function(t){t.registerChartView(su),t.registerSeriesModel(gu),t.registerProcessor(Ml),t.registerVisual(Cl),t.registerVisual(Tl),t.registerLayout(Vl),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Xl),t.registerLayout(jl),t.registerCoordinateSystem("graphView",{dimensions:xt.dimensions,create:ql}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},gt),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},gt),t.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e,n){e.eachComponent({mainType:"series",query:t},function(e){var a=n.getViewOfSeriesModel(e);a&&(null!=t.dx&&null!=t.dy&&a.updateViewOnPan(e,n,t),null!=t.zoom&&null!=t.originX&&null!=t.originY&&a.updateViewOnZoom(e,n,t));var i=e.coordinateSystem,o=Wt(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom)})})},function(t){t.registerChartView(xu),t.registerSeriesModel(_u),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,wu),t.registerProcessor($e("chord"))},function(t){t.registerChartView(Cu),t.registerSeriesModel(Lu)},function(t){t.registerChartView(Du),t.registerSeriesModel(Pu),t.registerLayout(Nu),t.registerProcessor($e("funnel"))},function(t){Nn(cd),t.registerChartView(ku),t.registerSeriesModel(Bu),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,Fu)},function(t){t.registerChartView(gd),t.registerSeriesModel(yd),t.registerLayout(vd),t.registerVisual(Ad),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),t.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(t,e,n){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){var n=e.coordinateSystem,a=Wt(n,t,e.get("scaleLimit"));e.setCenter(a.center),e.setZoom(a.zoom)})})},function(t){t.registerSeriesModel(Dd),t.registerChartView(Pd),t.registerLayout(Vd),t.registerTransform(Bd)},mo,function(t){t.registerChartView(Fd),t.registerSeriesModel(Yd),t.registerLayout(Yn("effectScatter"))},function(t){t.registerChartView($d),t.registerSeriesModel(ec),t.registerLayout(Kd),t.registerVisual(ac)},function(t){t.registerChartView(rc),t.registerSeriesModel(sc)},function(t){t.registerChartView(cc),t.registerSeriesModel(Ac),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,Nt(sa,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,la("pictorialBar"))},function(t){t.registerChartView(Dc),t.registerSeriesModel(Pc),t.registerLayout(Nc),t.registerProcessor($e("themeRiver"))},function(t){t.registerChartView(Oc),t.registerSeriesModel(Vc),t.registerLayout(Nt(Wc,"sunburst")),t.registerProcessor(Nt($e,"sunburst")),t.registerVisual(Yc),function(t){t.registerAction({type:Rc,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var a=Ns(t,[Rc],e);if(a){var i=e.getViewRoot();i&&(t.direction=Es(i,a.node)?"rollUp":"drillDown"),e.resetViewRoot(a.node)}})}),t.registerAction({type:zc,update:"none"},function(t,e,n){t=R({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e){var n=Ns(t,[zc],e);n&&(t.dataIndex=n.node.dataIndex)}),n.dispatchAction(R(t,{type:"highlight"}))}),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(t,e,n){t=R({},t),n.dispatchAction(R(t,{type:"downplay"}))})}(t)},function(t){t.registerChartView(Eh),t.registerSeriesModel(Zc)}]),Nn(xo),Nn(function(t){Nn(Ga),Ra.registerAxisPointerClass("PolarAxisPointer",Qh),t.registerCoordinateSystem("polar",hp),t.registerComponentModel(tp),t.registerComponentView(Lp),Pn(t,"angle",np,Mp),Pn(t,"radius",ap,Cp),t.registerComponentView(vp),t.registerComponentView(_p),t.registerLayout(Nt(Ip,"bar"))}),Nn(_o),Nn(function(t){Nn(Ga),Ra.registerAxisPointerClass("SingleAxisPointer",Gp),t.registerComponentView(Up),t.registerComponentView(Dp),t.registerComponentModel(Np),Pn(t,"single",Np,Np.defaultOption),t.registerCoordinateSystem("single",Op)}),Nn(cd),Nn(function(t){t.registerComponentModel(Hp),t.registerComponentView(Zp),t.registerCoordinateSystem("calendar",qp)}),Nn(function(t){t.registerComponentModel(wg),t.registerComponentView(Lg),t.registerCoordinateSystem("matrix",Rg)}),Nn(function(t){t.registerComponentModel(nf),t.registerComponentView(rf),t.registerPreprocessor(function(t){var e=t.graphic;dt(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}),Nn(bo),Nn(wo),Nn(Ga),Nn(So),Nn(Io),Nn(function(t){t.registerComponentModel(hf),t.registerComponentView(vf),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e,n){var a=e.getComponent("timeline");return a&&null!=t.currentIndex&&(a.setCurrentIndex(t.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.getPlayState()&&(a.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:a.get("replaceMerge",!0)}),At({currentIndex:a.option.currentIndex},t)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)})}(t),t.registerPreprocessor(_f)}),Nn(Mo),Nn(Co),Nn(function(t){t.registerComponentModel(Sf),t.registerComponentView(Pf),t.registerPreprocessor(function(t){Di(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),Nn(Lo),Nn(To),Nn(Ao),Nn(Do),Nn(Po),Nn(No),Nn(ko),Nn(function(t){t.registerComponentModel(kf),t.registerComponentView(Ef)}),Nn(function(t){t.registerPreprocessor(Wf),t.registerVisual(t.PRIORITY.VISUAL.ARIA,Gf)}),Nn(function(t){t.registerTransform(Jf),t.registerTransform(ty)}),Nn(function(t){t.registerComponentModel(ey),t.registerComponentView(ny)}),Nn(function(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,e,n){l(Ut(n.seriesTransition),function(t){l(Ut(t.to),function(t){for(var e=n.updatedSeries,a=0;a<e.length;a++)(null!=t.seriesIndex&&t.seriesIndex===e[a].seriesIndex||null!=t.seriesId&&t.seriesId===e[a].id)&&(e[a][ji]=!0)})})}),t.registerUpdateLifecycle("series:transition",function(t,e,n){var a=Oy(e);if(a.oldSeries&&n.updatedSeries&&n.optionChanged){var i=n.seriesTransition;if(i)l(Ut(i),function(t){!function(t,e,n,a){var i=[],o=[];l(Ut(t.from),function(t){var n=Zy(e.oldSeries,t);n>=0&&i.push({dataGroupId:e.oldDataGroupIds[n],data:e.oldData[n],divide:Xy(e.oldData[n]),groupIdDim:t.dimension})}),l(Ut(t.to),function(t){var a=Zy(n.updatedSeries,t);if(a>=0){var i=n.updatedSeries[a].getData();o.push({dataGroupId:e.oldDataGroupIds[a],data:i,divide:Xy(i),groupIdDim:t.dimension})}}),i.length>0&&o.length>0&&Yy(i,o,a)}(t,a,n,e)});else{var o=function(t,e){var n=Yt(),a=Yt(),i=Yt();return l(t.oldSeries,function(e,n){var o=t.oldDataGroupIds[n],r=t.oldData[n],s=Uy(e),u=Hy(s);a.set(u,{dataGroupId:o,data:r}),dt(s)&&l(s,function(t){i.set(t,{key:u,dataGroupId:o,data:r})})}),l(e.updatedSeries,function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.get("dataGroupId"),o=t.getData(),r=Uy(t),s=Hy(r),u=a.get(s);if(u)n.set(s,{oldSeries:[{dataGroupId:u.dataGroupId,divide:Xy(u.data),data:u.data}],newSeries:[{dataGroupId:e,divide:Xy(o),data:o}]});else if(dt(r)){var d=[];l(r,function(t){var e=a.get(t);e.data&&d.push({dataGroupId:e.dataGroupId,divide:Xy(e.data),data:e.data})}),d.length&&n.set(s,{oldSeries:d,newSeries:[{dataGroupId:e,data:o,divide:Xy(o)}]})}else{var c=i.get(r);if(c){var h=n.get(c.key);h||(h={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:Xy(c.data)}],newSeries:[]},n.set(c.key,h)),h.newSeries.push({dataGroupId:e,data:o,divide:Xy(o)})}}}}),n}(a,n);l(o.keys(),function(t){var n=o.get(t);Yy(n.oldSeries,n.newSeries,e)})}l(n.updatedSeries,function(t){t[ji]&&(t[ji]=!1)})}for(var r=t.getSeries(),s=a.oldSeries=[],u=a.oldDataGroupIds=[],d=a.oldData=[],c=0;c<r.length;c++){var h=r[c].getData();h.count()<1e4&&(s.push(r[c]),u.push(r[c].get("dataGroupId")),d.push(h))}})}),Nn(function(t){t.registerUpdateLifecycle("series:beforeupdate",function(t,e,n){var a=Uo(e).labelManager;a||(a=Uo(e).labelManager=new Yo),a.clearLabels()}),t.registerUpdateLifecycle("series:layoutlabels",function(t,e,n){var a=Uo(e).labelManager;n.updatedSeries.forEach(function(t){a.addLabelsOfSeries(e.getViewOfSeriesModel(t))}),a.updateLayoutConfig(e),a.layout(e),a.processLabelsOverall()})}),Nn(function(t){so(t),Ki({createScaleBreakContext:qy,pruneTicksByBreak:Qy,addBreaksToTicks:Jy,parseAxisBreakOption:ev,identifyAxisBreak:nv,serializeAxisBreakIdentifier:av,retrieveAxisBreakPairs:iv,getTicksLogTransformBreak:ov,logarithmicParseBreaksFromOption:rv,makeAxisLabelFormatterParamBreak:lv}),Ji({adjustBreakLabelPair:hv,buildAxisBreakLine:cv,rectCoordBuildBreakAxis:dv,updateModelAxisBreak:pv})}),Nn(function(){lo(gv)}),Nn(Eo);
